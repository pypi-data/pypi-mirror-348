Metadata-Version: 2.1
Name: pixiv-tag-downloader
Version: 1.0.0
Summary: æ ¹æ®æ ‡ç­¾ä¸‹è½½Pixivç”¨æˆ·ä½œå“çš„å·¥å…·
Home-page: https://github.com/TrustAsia/PixivTagDownloader
Author: Mannix Sun
Author-email: Mannix Sun <root@teamcs.org>
License: MIT
Project-URL: Homepage, https://github.com/example/pixiv_tag_downloader
Project-URL: Issues, https://github.com/example/pixiv_tag_downloader/issues
Project-URL: Documentation, https://github.com/example/pixiv_tag_downloader#readme
Project-URL: Source, https://github.com/example/pixiv_tag_downloader
Keywords: pixiv,download,tag,artwork,manga,novel
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: End Users/Desktop
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Topic :: Internet :: WWW/HTTP :: Indexing/Search
Classifier: Topic :: Multimedia :: Graphics
Classifier: Topic :: Utilities
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: requests>=2.28.0
Requires-Dist: beautifulsoup4>=4.11.0
Requires-Dist: pyyaml>=6.0
Requires-Dist: tqdm>=4.64.0
Requires-Dist: jsonschema>=4.16.0
Requires-Dist: xmlrpc-aria2>=1.0.2
Requires-Dist: colorama>=0.4.6
Requires-Dist: python-dateutil>=2.8.2

# Pixiv Tag Downloader

æ ¹æ®æ ‡ç­¾ä¸‹è½½Pixivç”¨æˆ·ä½œå“çš„å·¥å…·ï¼Œæ”¯æŒå›¾ç‰‡ã€æ’ç”»ã€æ¼«ç”»å’Œå°è¯´çš„ä¸‹è½½ï¼Œå¹¶æä¾›æ ‡ç­¾è¿‡æ»¤åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸ–¼ï¸ æ”¯æŒä¸‹è½½Pixivç”¨æˆ·çš„æ‰€æœ‰ç±»å‹ä½œå“ï¼ˆå›¾ç‰‡ã€æ’ç”»ã€æ¼«ç”»ã€å°è¯´ï¼‰
- ğŸ·ï¸ æ”¯æŒæŒ‰æ ‡ç­¾è¿‡æ»¤ä½œå“ï¼Œæ”¯æŒAND/ORé€»è¾‘
- ğŸš€ å¤šçº¿ç¨‹ä¸‹è½½ï¼Œæé«˜ä¸‹è½½æ•ˆç‡
- ğŸ“‚ æ”¯æŒè‡ªå®šä¹‰è¾“å‡ºç›®å½•ç»“æ„å’Œæ–‡ä»¶å‘½åè§„åˆ™
- ğŸ“ ä¸ºæ¯ä¸ªä½œå“ç”ŸæˆåŒ…å«å…ƒæ•°æ®çš„æ–‡ä»¶
- ğŸŒ æ”¯æŒå¤šç§ä¸‹è½½æ–¹å¼ï¼šç›´æ¥ä¸‹è½½ã€aria2cå‘½ä»¤è¡Œå’Œaria2 RPCï¼ˆåŒ…æ‹¬WSSåè®®ï¼‰
- ğŸ–¥ï¸ æä¾›äº¤äº’å¼å‘½ä»¤è¡Œç•Œé¢å’Œå‘½ä»¤è¡Œå‚æ•°ä¸¤ç§ä½¿ç”¨æ–¹å¼
- ğŸ§© å¯ä½œä¸ºPythonæ¨¡å—å¯¼å…¥ä½¿ç”¨
- ğŸŒ æ”¯æŒé…ç½®ä»£ç†
- ğŸ”„ å†…ç½®éšæœºå»¶è¿ŸåŠŸèƒ½ï¼Œé™ä½è¢«å°é£é™©

## å®‰è£…æ–¹æ³•

### ä»PyPIå®‰è£…

```bash
pip install pixiv-tag-downloader
```

### ä»æºç å®‰è£…

```bash
git clone https://github.com/example/pixiv_tag_downloader.git
cd pixiv_tag_downloader
pip install -e .
```

## ä½¿ç”¨æ–¹æ³•

### å‡†å¤‡Cookie

1. åœ¨æµè§ˆå™¨ä¸­ç™»å½•Pixiv
2. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·å¯¼å‡ºCookie
3. å°†Cookieä¿å­˜ä¸ºç¨‹åºè¿è¡Œç›®å½•ä¸‹çš„`cookie.txt`æ–‡ä»¶ï¼Œæ ¼å¼ä¸ºï¼š

   ```bash
   key1=value1; key2=value2; ...
   ```

### äº¤äº’å¼ä½¿ç”¨

```bash
pixiv-tag-downloader
```

ç¨‹åºå°†å¼•å¯¼æ‚¨å®Œæˆä¸‹è½½æµç¨‹ï¼š

1. è¾“å…¥Pixivç”¨æˆ·IDï¼ˆUIDï¼‰
2. é€‰æ‹©æ˜¯å¦æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æ ‡ç­¾
3. é€‰æ‹©è¦ä¸‹è½½çš„æ ‡ç­¾å’Œè¿‡æ»¤é€»è¾‘
4. ç¡®è®¤ä¸‹è½½ä¿¡æ¯

### å‘½ä»¤è¡Œå‚æ•°

```bash
pixiv-tag-downloader -u ç”¨æˆ·ID -t æ ‡ç­¾1,æ ‡ç­¾2 -l and --output-dir ./ä¸‹è½½ç›®å½• --download-method direct --threads 4
```

ä¸»è¦å‚æ•°ï¼š

- `-u, --uid`: æŒ‡å®šPixivç”¨æˆ·ID
- `-t, --tags`: æŒ‡å®šè¦ä¸‹è½½çš„æ ‡ç­¾ï¼Œå¤šä¸ªæ ‡ç­¾ç”¨é€—å·åˆ†éš”
- `-l, --logic`: æ ‡ç­¾è¿‡æ»¤é€»è¾‘ï¼Œå¯é€‰å€¼ä¸º`and`æˆ–`or`
- `--output-dir`: æŒ‡å®šè¾“å‡ºç›®å½•ï¼Œè¦†ç›–é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®
- `--threads`: æŒ‡å®šä¸‹è½½çº¿ç¨‹æ•°
- `--download-method`: æŒ‡å®šä¸‹è½½æ–¹å¼ï¼Œå¯é€‰å€¼ä¸º`direct`ã€`aria2c`æˆ–`aria2-rpc`
- `--aria2-rpc-url`: æŒ‡å®šAria2 RPCæœåŠ¡åœ°å€
- `--config`: æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„

### é…ç½®æ–‡ä»¶

ç¨‹åºæ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶è‡ªå®šä¹‰è®¾ç½®ï¼Œè¯¦è§[é…ç½®æ–‡ä»¶ç¤ºä¾‹](config.yaml.example)ã€‚

é…ç½®æ–‡ä»¶å¯æ”¾ç½®äºä»¥ä¸‹ä½ç½®ï¼š

- å½“å‰ç›®å½•ä¸‹çš„`config.yaml`æˆ–`config.yml`
- ç”¨æˆ·ç›®å½•ä¸‹çš„`~/.pixiv_tag_downloader/config.yaml`
- é€šè¿‡`--config`å‚æ•°æŒ‡å®šçš„è·¯å¾„

## ä½œä¸ºæ¨¡å—ä½¿ç”¨

```python
from pixiv_tag_downloader.auth.cookie import get_cookie_manager
from pixiv_tag_downloader.api.pixiv import get_pixiv_api
from pixiv_tag_downloader.download.aria2 import create_downloader
from pixiv_tag_downloader.utils.path_formatter import get_path_formatter
from pixiv_tag_downloader.utils.file_utils import get_file_utils

# åˆå§‹åŒ–Cookie
cookie_manager = get_cookie_manager()
success, message = cookie_manager.load_cookie()
if not success:
    print(f"CookieåŠ è½½å¤±è´¥: {message}")
    exit(1)

# è·å–ç”¨æˆ·ä½œå“
pixiv_api = get_pixiv_api()
user_info = pixiv_api.get_user_info("12345678")
artworks = pixiv_api.get_user_artworks_ids("12345678")

# ä¸‹è½½ä½œå“
downloader = create_downloader("direct")
path_formatter = get_path_formatter()
file_utils = get_file_utils()

# ä¸‹è½½ç¤ºä¾‹
for pid in artworks['illustrations'][:5]:  # åªä¸‹è½½å‰5ä¸ªä½œå“
    artwork = pixiv_api.get_artwork_details(pid)
    img_url = artwork.get('urls', {}).get('original')
    if img_url:
        save_path = path_formatter.format_artwork_path(artwork)
        downloader.download_file(img_url, save_path)
        metadata_path = path_formatter.format_metadata_path(save_path)
        file_utils.write_metadata_file(metadata_path, artwork)
```

## ç³»ç»Ÿè¦æ±‚

- Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- å¦‚éœ€ä½¿ç”¨Aria2ä¸‹è½½åŠŸèƒ½ï¼Œè¯·å®‰è£…Aria2

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦è§[LICENSE](LICENSE)æ–‡ä»¶ã€‚

## å…è´£å£°æ˜

æœ¬å·¥å…·ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”ã€‚ä½¿ç”¨æœ¬å·¥å…·ä¸‹è½½çš„ä½œå“ä»…å¯ç”¨äºä¸ªäººå¤‡ä»½ï¼Œç¦æ­¢ç”¨äºå•†ä¸šç”¨é€”æˆ–å…¬å¼€åˆ†å‘ã€‚ç”¨æˆ·éœ€éµå®ˆPixivçš„æœåŠ¡æ¡æ¬¾ï¼Œå¹¶å¯¹è‡ªå·±çš„è¡Œä¸ºè´Ÿå…¨éƒ¨è´£ä»»ã€‚ä½œè€…ä¸å¯¹å› ä½¿ç”¨æœ¬å·¥å…·å¯èƒ½å¯¼è‡´çš„ä»»ä½•é—®é¢˜æ‰¿æ‹…è´£ä»»ã€‚
