function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index-ChWW_c_j.js","./index-CPCeQU9V.css","./BuilderEmbeddedCodeEditor-CbK-r9w6.js","./BuilderEmbeddedCodeEditor-DiDqfWdt.css","./BuilderGraphSelect-DV5Xy0HK.js","./useListResources-BpMgq7XI.js","./BuilderApp-0XXiQ2l7.js","./marked.esm-273vDTCT.js","./BuilderApp-CAhvLO4a.css","./BuilderGraphSelect-CVO4gzts.css","./BuilderApplicationSelect-CwzU4F1-.js","./BuilderApplicationSelect-DYYFtqjx.css","./BuilderModelSelect-ow0XEf2t.js","./BuilderModelSelect-QHUGd86u.css","./BuilderSettingsHandlers-j1aMAV4J.js","./useBlueprintRun-CBOvzWTA.js","./BuilderSettingsHandlers-1QLaHR8J.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as q,i as L,a as W,u as ht,c as x,r as X,w as $e,n as Se,o as p,e as $,N as h,b as F,x as D,f as I,W as H,X as w,a7 as Ie,ao as Oe,s as O,z as Q,A as me,t as G,V as Me,C as Ye,ai as te,_ as z,l as Y,P as st,at as gt,aF as _t,S as bt,aj as kt,ag as de,y as ie,q as Be,aG as It,H as St,I as he,aH as Et,aI as Ct,G as Re,aA as xt,aC as wt,aJ as le,aK as Ae,ad as ne,M as oe,Q as Bt,ah as He,aw as Xe,k as at,v as Te,aL as De,aa as $t,aM as Mt,aN as At,aO as J,aP as Ft,aQ as Tt,aR as Vt,aS as Ot,F as ve,aT as Rt}from"./index-ChWW_c_j.js";import{u as Pt,B as be}from"./BuilderApp-0XXiQ2l7.js";import{p as Lt}from"./instancePath-BsbOTTI8.js";import{u as Wt}from"./useComponentDescription-FHKxu8gg.js";import{B as Ze}from"./BuilderEmbeddedCodeEditor-CbK-r9w6.js";import"./marked.esm-273vDTCT.js";const jt=["data-writer-id"],Dt={id:"validChildrenTypes"},Nt=["value"],Kt=q({__name:"BuilderSettingsActions",setup(n){const e=L(W.core),t=L(W.builderManager),s=ht(e),{createAndInsertComponent:o,moveComponentUp:l,moveComponentDown:a,cutComponent:r,pasteComponent:i,copyComponent:d,isAddAllowed:m,isCopyAllowed:g,isCutAllowed:S,isGoToParentAllowed:u,isPasteAllowed:c,isDeleteAllowed:E,getEnabledMoves:y,removeComponentsSubtree:v,goToParent:_}=te(e,t,s),A=Pt();async function N(){try{await i(M.value)}catch(R){A.pushToast({type:"error",message:String(R)})}}function j(){if(!C.value.isDeleteEnabled)return;const R=t.selection.value.map(T=>T.componentId);R.length!==0&&v(...R)}const M=t.firstSelectedId,V=x(()=>{var R;return(R=t.firstSelectedItem.value)==null?void 0:R.instancePath}),B=X(!1),C=X(null),f=x(()=>t.firstSelectedId.value?c(t.firstSelectedId.value):!1),k=x(()=>{const R=e.getContainableTypes(M.value),T={};return R.map(U=>{const ee=e.getComponentDefinition(U);T[U]=ee}),T});function b(R){const T=R.target.value,U=Object.entries(k.value).filter(([se,ue])=>ue.name==T);if(U.length==0)return;const ee=U[0][0];o(ee,M.value),B.value=!1}function K(){var ee,se;const R=e.getComponentById(M.value);if(!R)return;const{up:T,down:U}=y(M.value);C.value={isAddEnabled:m(M.value),componentTypeName:(ee=e.getComponentDefinition(R.type))==null?void 0:ee.name,toolkit:(se=e.getComponentDefinition(R.type))==null?void 0:se.toolkit,isMoveUpEnabled:T,isMoveDownEnabled:U,isCopyEnabled:g(M.value),isCutEnabled:S(M.value),isGoToParentEnabled:u(M.value),isDeleteEnabled:E(M.value)}}return $e(()=>{var R;return(R=e.getComponentById(M.value))==null?void 0:R.position},async R=>{typeof R>"u"||R===null||K()},{flush:"post"}),Se(()=>{K()}),(R,T)=>{var U,ee,se,ue,Ce,xe,we;return p(),$("div",{class:Ye(["BuilderSettingsActions",{collapsed:h(t).isSettingsBarCollapsed.value}]),"data-writer-id":h(M)},[h(t).isSingleSelectionActive.value?(p(),F(H,{key:0,"data-writer-tooltip":"Add child","data-writer-tooltip-placement":"left",variant:"neutral",size:"smallIcon",class:"actionButton",disabled:!((U=C.value)!=null&&U.isAddEnabled),onClick:T[0]||(T[0]=ce=>{var Z;return(Z=C.value)!=null&&Z.isAddEnabled?B.value=!0:void 0})},{default:D(()=>T[8]||(T[8]=[I("i",{class:"material-symbols-outlined"},"add",-1)])),_:1},8,["disabled"])):w("",!0),h(t).isSingleSelectionActive.value?(p(),F(H,{key:1,class:"actionButton",size:"small",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":`Move up (${h(Ie)()}↑)`,disabled:!((ee=C.value)!=null&&ee.isMoveUpEnabled),onClick:T[1]||(T[1]=ce=>{var Z;return(Z=C.value)!=null&&Z.isMoveUpEnabled?h(l)(h(M)):void 0})},{default:D(()=>T[9]||(T[9]=[I("i",{class:"material-symbols-outlined"},"arrow_upward",-1)])),_:1},8,["data-writer-tooltip","disabled"])):w("",!0),h(t).isSingleSelectionActive.value?(p(),F(H,{key:2,class:"actionButton",variant:"neutral",size:"small","data-writer-tooltip":`Move down (${h(Ie)()}↓)`,"data-writer-tooltip-placement":"left",disabled:!((se=C.value)!=null&&se.isMoveDownEnabled),onClick:T[2]||(T[2]=ce=>{var Z;return(Z=C.value)!=null&&Z.isMoveDownEnabled?h(a)(h(M)):void 0})},{default:D(()=>T[10]||(T[10]=[I("i",{class:"material-symbols-outlined"},"arrow_downward",-1)])),_:1},8,["data-writer-tooltip","disabled"])):w("",!0),h(t).isSingleSelectionActive.value?(p(),F(H,{key:3,class:"actionButton",variant:"neutral",size:"small","data-writer-tooltip":`Cut (${h(Ie)()}X)`,"data-writer-tooltip-placement":"left",disabled:!((ue=C.value)!=null&&ue.isCutEnabled),onClick:T[3]||(T[3]=ce=>{var Z;return(Z=C.value)!=null&&Z.isCutEnabled?h(r)(h(M)):void 0})},{default:D(()=>T[11]||(T[11]=[I("i",{class:"material-symbols-outlined"},"cut",-1)])),_:1},8,["data-writer-tooltip","disabled"])):w("",!0),h(t).isSingleSelectionActive.value?(p(),F(H,{key:4,class:"actionButton",variant:"neutral",size:"small","data-writer-tooltip":`Copy (${h(Ie)()}C)`,"data-writer-tooltip-placement":"left",disabled:!((Ce=C.value)!=null&&Ce.isCopyEnabled),onClick:T[4]||(T[4]=ce=>{var Z;return(Z=C.value)!=null&&Z.isCopyEnabled?h(d)(h(M)):void 0})},{default:D(()=>T[12]||(T[12]=[I("i",{class:"material-symbols-outlined"},"content_copy",-1)])),_:1},8,["data-writer-tooltip","disabled"])):w("",!0),h(t).isSingleSelectionActive.value?(p(),F(H,{key:5,class:"actionButton",variant:"neutral",size:"small","data-writer-tooltip":`Paste (${h(Ie)()}V)`,"data-writer-tooltip-placement":"left",disabled:!f.value,onClick:N},{default:D(()=>T[13]||(T[13]=[I("i",{class:"material-symbols-outlined"},"content_paste",-1)])),_:1},8,["data-writer-tooltip","disabled"])):w("",!0),h(t).isSingleSelectionActive.value?(p(),F(H,{key:6,class:"actionButton",variant:"neutral",size:"small","data-writer-tooltip":`Go to parent (${h(Ie)()}⇧↑)`,"data-writer-tooltip-placement":"left",disabled:!((xe=C.value)!=null&&xe.isGoToParentEnabled),onClick:T[5]||(T[5]=ce=>{var Z;return(Z=C.value)!=null&&Z.isGoToParentEnabled?h(_)(h(M),V.value):void 0})},{default:D(()=>T[14]||(T[14]=[I("i",{class:"material-symbols-outlined"},"move_up",-1)])),_:1},8,["data-writer-tooltip","disabled"])):w("",!0),h(t).selectionStatus.value===h(Oe).Multiple?(p(),F(H,{key:7,class:"actionButton",variant:"neutral",size:"small","data-automation-action":"clear-selection","data-writer-tooltip":"Clear selection","data-writer-tooltip-placement":"left",onClick:T[6]||(T[6]=ce=>h(t).setSelection(null))},{default:D(()=>T[15]||(T[15]=[I("i",{class:"material-symbols-outlined"},"close",-1)])),_:1})):w("",!0),O(H,{class:"actionButton delete",variant:"neutral",size:"small","data-automation-action":"delete","data-writer-tooltip":"Delete (Del)","data-writer-tooltip-placement":"left",disabled:!((we=C.value)!=null&&we.isDeleteEnabled),onClick:j},{default:D(()=>T[16]||(T[16]=[I("i",{class:"material-symbols-outlined"},"delete",-1)])),_:1},8,["disabled"]),B.value?(p(),F(Me,{key:8,title:"Add child component","display-close-button":"",onClose:T[7]||(T[7]=ce=>B.value=!1)},{default:D(()=>[I("input",{class:"addModalInput",type:"text",list:"validChildrenTypes",placeholder:"Component...",onChange:b},null,32),I("datalist",Dt,[(p(!0),$(Q,null,me(k.value,(ce,Z)=>(p(),$("option",{key:Z,value:ce.name},G(ce.name),9,Nt))),128))])]),_:1})):w("",!0)],10,jt)}}}),Ut=z(Kt,[["__scopeId","data-v-4e5064fe"]]);function ye(n){return Array.isArray?Array.isArray(n):ut(n)==="[object Array]"}const qt=1/0;function zt(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-qt?"-0":e}function Jt(n){return n==null?"":zt(n)}function pe(n){return typeof n=="string"}function it(n){return typeof n=="number"}function Yt(n){return n===!0||n===!1||Gt(n)&&ut(n)=="[object Boolean]"}function rt(n){return typeof n=="object"}function Gt(n){return rt(n)&&n!==null}function ae(n){return n!=null}function Le(n){return!n.trim().length}function ut(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const Ht="Incorrect 'index' type",Xt=n=>`Invalid value for key ${n}`,Zt=n=>`Pattern length exceeds max of ${n}.`,Qt=n=>`Missing ${n} property in key`,en=n=>`Property 'weight' in key '${n}' must be a positive integer`,Qe=Object.prototype.hasOwnProperty;class tn{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(s=>{let o=dt(s);this._keys.push(o),this._keyMap[o.id]=o,t+=o.weight}),this._keys.forEach(s=>{s.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function dt(n){let e=null,t=null,s=null,o=1,l=null;if(pe(n)||ye(n))s=n,e=et(n),t=Ne(n);else{if(!Qe.call(n,"name"))throw new Error(Qt("name"));const a=n.name;if(s=a,Qe.call(n,"weight")&&(o=n.weight,o<=0))throw new Error(en(a));e=et(a),t=Ne(a),l=n.getFn}return{path:e,id:t,weight:o,src:s,getFn:l}}function et(n){return ye(n)?n:n.split(".")}function Ne(n){return ye(n)?n.join("."):n}function nn(n,e){let t=[],s=!1;const o=(l,a,r)=>{if(ae(l))if(!a[r])t.push(l);else{let i=a[r];const d=l[i];if(!ae(d))return;if(r===a.length-1&&(pe(d)||it(d)||Yt(d)))t.push(Jt(d));else if(ye(d)){s=!0;for(let m=0,g=d.length;m<g;m+=1)o(d[m],a,r+1)}else a.length&&o(d,a,r+1)}};return o(n,pe(e)?e.split("."):e,0),s?t:t[0]}const on={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ln={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},sn={location:0,threshold:.6,distance:100},an={useExtendedSearch:!1,getFn:nn,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var P={...ln,...on,...sn,...an};const rn=/[^ ]+/g;function un(n=1,e=3){const t=new Map,s=Math.pow(10,e);return{get(o){const l=o.match(rn).length;if(t.has(l))return t.get(l);const a=1/Math.pow(l,.5*n),r=parseFloat(Math.round(a*s)/s);return t.set(l,r),r},clear(){t.clear()}}}class Ge{constructor({getFn:e=P.getFn,fieldNormWeight:t=P.fieldNormWeight}={}){this.norm=un(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,s)=>{this._keysMap[t.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,pe(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();pe(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,s=this.size();t<s;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!ae(e)||Le(e))return;let s={v:e,i:t,n:this.norm.get(e)};this.records.push(s)}_addObject(e,t){let s={i:t,$:{}};this.keys.forEach((o,l)=>{let a=o.getFn?o.getFn(e):this.getFn(e,o.path);if(ae(a)){if(ye(a)){let r=[];const i=[{nestedArrIndex:-1,value:a}];for(;i.length;){const{nestedArrIndex:d,value:m}=i.pop();if(ae(m))if(pe(m)&&!Le(m)){let g={v:m,i:d,n:this.norm.get(m)};r.push(g)}else ye(m)&&m.forEach((g,S)=>{i.push({nestedArrIndex:S,value:g})})}s.$[l]=r}else if(pe(a)&&!Le(a)){let r={v:a,n:this.norm.get(a)};s.$[l]=r}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function ct(n,e,{getFn:t=P.getFn,fieldNormWeight:s=P.fieldNormWeight}={}){const o=new Ge({getFn:t,fieldNormWeight:s});return o.setKeys(n.map(dt)),o.setSources(e),o.create(),o}function dn(n,{getFn:e=P.getFn,fieldNormWeight:t=P.fieldNormWeight}={}){const{keys:s,records:o}=n,l=new Ge({getFn:e,fieldNormWeight:t});return l.setKeys(s),l.setIndexRecords(o),l}function Ve(n,{errors:e=0,currentLocation:t=0,expectedLocation:s=0,distance:o=P.distance,ignoreLocation:l=P.ignoreLocation}={}){const a=e/n.length;if(l)return a;const r=Math.abs(s-t);return o?a+r/o:r?1:a}function cn(n=[],e=P.minMatchCharLength){let t=[],s=-1,o=-1,l=0;for(let a=n.length;l<a;l+=1){let r=n[l];r&&s===-1?s=l:!r&&s!==-1&&(o=l-1,o-s+1>=e&&t.push([s,o]),s=-1)}return n[l-1]&&l-s>=e&&t.push([s,l-1]),t}const _e=32;function pn(n,e,t,{location:s=P.location,distance:o=P.distance,threshold:l=P.threshold,findAllMatches:a=P.findAllMatches,minMatchCharLength:r=P.minMatchCharLength,includeMatches:i=P.includeMatches,ignoreLocation:d=P.ignoreLocation}={}){if(e.length>_e)throw new Error(Zt(_e));const m=e.length,g=n.length,S=Math.max(0,Math.min(s,g));let u=l,c=S;const E=r>1||i,y=E?Array(g):[];let v;for(;(v=n.indexOf(e,c))>-1;){let V=Ve(e,{currentLocation:v,expectedLocation:S,distance:o,ignoreLocation:d});if(u=Math.min(V,u),c=v+m,E){let B=0;for(;B<m;)y[v+B]=1,B+=1}}c=-1;let _=[],A=1,N=m+g;const j=1<<m-1;for(let V=0;V<m;V+=1){let B=0,C=N;for(;B<C;)Ve(e,{errors:V,currentLocation:S+C,expectedLocation:S,distance:o,ignoreLocation:d})<=u?B=C:N=C,C=Math.floor((N-B)/2+B);N=C;let f=Math.max(1,S-C+1),k=a?g:Math.min(S+C,g)+m,b=Array(k+2);b[k+1]=(1<<V)-1;for(let R=k;R>=f;R-=1){let T=R-1,U=t[n.charAt(T)];if(E&&(y[T]=+!!U),b[R]=(b[R+1]<<1|1)&U,V&&(b[R]|=(_[R+1]|_[R])<<1|1|_[R+1]),b[R]&j&&(A=Ve(e,{errors:V,currentLocation:T,expectedLocation:S,distance:o,ignoreLocation:d}),A<=u)){if(u=A,c=T,c<=S)break;f=Math.max(1,2*S-c)}}if(Ve(e,{errors:V+1,currentLocation:S,expectedLocation:S,distance:o,ignoreLocation:d})>u)break;_=b}const M={isMatch:c>=0,score:Math.max(.001,A)};if(E){const V=cn(y,r);V.length?i&&(M.indices=V):M.isMatch=!1}return M}function vn(n){let e={};for(let t=0,s=n.length;t<s;t+=1){const o=n.charAt(t);e[o]=(e[o]||0)|1<<s-t-1}return e}class pt{constructor(e,{location:t=P.location,threshold:s=P.threshold,distance:o=P.distance,includeMatches:l=P.includeMatches,findAllMatches:a=P.findAllMatches,minMatchCharLength:r=P.minMatchCharLength,isCaseSensitive:i=P.isCaseSensitive,ignoreLocation:d=P.ignoreLocation}={}){if(this.options={location:t,threshold:s,distance:o,includeMatches:l,findAllMatches:a,minMatchCharLength:r,isCaseSensitive:i,ignoreLocation:d},this.pattern=i?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const m=(S,u)=>{this.chunks.push({pattern:S,alphabet:vn(S),startIndex:u})},g=this.pattern.length;if(g>_e){let S=0;const u=g%_e,c=g-u;for(;S<c;)m(this.pattern.substr(S,_e),S),S+=_e;if(u){const E=g-_e;m(this.pattern.substr(E),E)}}else m(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:s}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let c={isMatch:!0,score:0};return s&&(c.indices=[[0,e.length-1]]),c}const{location:o,distance:l,threshold:a,findAllMatches:r,minMatchCharLength:i,ignoreLocation:d}=this.options;let m=[],g=0,S=!1;this.chunks.forEach(({pattern:c,alphabet:E,startIndex:y})=>{const{isMatch:v,score:_,indices:A}=pn(e,c,E,{location:o+y,distance:l,threshold:a,findAllMatches:r,minMatchCharLength:i,includeMatches:s,ignoreLocation:d});v&&(S=!0),g+=_,v&&A&&(m=[...m,...A])});let u={isMatch:S,score:S?g/this.chunks.length:1};return S&&s&&(u.indices=m),u}}class ge{constructor(e){this.pattern=e}static isMultiMatch(e){return tt(e,this.multiRegex)}static isSingleMatch(e){return tt(e,this.singleRegex)}search(){}}function tt(n,e){const t=n.match(e);return t?t[1]:null}class fn extends ge{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class mn extends ge{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class yn extends ge{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class hn extends ge{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class gn extends ge{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class _n extends ge{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class vt extends ge{constructor(e,{location:t=P.location,threshold:s=P.threshold,distance:o=P.distance,includeMatches:l=P.includeMatches,findAllMatches:a=P.findAllMatches,minMatchCharLength:r=P.minMatchCharLength,isCaseSensitive:i=P.isCaseSensitive,ignoreLocation:d=P.ignoreLocation}={}){super(e),this._bitapSearch=new pt(e,{location:t,threshold:s,distance:o,includeMatches:l,findAllMatches:a,minMatchCharLength:r,isCaseSensitive:i,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class ft extends ge{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,s;const o=[],l=this.pattern.length;for(;(s=e.indexOf(this.pattern,t))>-1;)t=s+l,o.push([s,t-1]);const a=!!o.length;return{isMatch:a,score:a?0:1,indices:o}}}const Ke=[fn,ft,yn,hn,_n,gn,mn,vt],nt=Ke.length,bn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,kn="|";function In(n,e={}){return n.split(kn).map(t=>{let s=t.trim().split(bn).filter(l=>l&&!!l.trim()),o=[];for(let l=0,a=s.length;l<a;l+=1){const r=s[l];let i=!1,d=-1;for(;!i&&++d<nt;){const m=Ke[d];let g=m.isMultiMatch(r);g&&(o.push(new m(g,e)),i=!0)}if(!i)for(d=-1;++d<nt;){const m=Ke[d];let g=m.isSingleMatch(r);if(g){o.push(new m(g,e));break}}}return o})}const Sn=new Set([vt.type,ft.type]);class En{constructor(e,{isCaseSensitive:t=P.isCaseSensitive,includeMatches:s=P.includeMatches,minMatchCharLength:o=P.minMatchCharLength,ignoreLocation:l=P.ignoreLocation,findAllMatches:a=P.findAllMatches,location:r=P.location,threshold:i=P.threshold,distance:d=P.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:s,minMatchCharLength:o,findAllMatches:a,ignoreLocation:l,location:r,threshold:i,distance:d},this.pattern=t?e:e.toLowerCase(),this.query=In(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:o}=this.options;e=o?e:e.toLowerCase();let l=0,a=[],r=0;for(let i=0,d=t.length;i<d;i+=1){const m=t[i];a.length=0,l=0;for(let g=0,S=m.length;g<S;g+=1){const u=m[g],{isMatch:c,indices:E,score:y}=u.search(e);if(c){if(l+=1,r+=y,s){const v=u.constructor.type;Sn.has(v)?a=[...a,...E]:a.push(E)}}else{r=0,l=0,a.length=0;break}}if(l){let g={isMatch:!0,score:r/l};return s&&(g.indices=a),g}}return{isMatch:!1,score:1}}}const Ue=[];function Cn(...n){Ue.push(...n)}function qe(n,e){for(let t=0,s=Ue.length;t<s;t+=1){let o=Ue[t];if(o.condition(n,e))return new o(n,e)}return new pt(n,e)}const Pe={AND:"$and",OR:"$or"},ze={PATH:"$path",PATTERN:"$val"},Je=n=>!!(n[Pe.AND]||n[Pe.OR]),xn=n=>!!n[ze.PATH],wn=n=>!ye(n)&&rt(n)&&!Je(n),ot=n=>({[Pe.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function mt(n,e,{auto:t=!0}={}){const s=o=>{let l=Object.keys(o);const a=xn(o);if(!a&&l.length>1&&!Je(o))return s(ot(o));if(wn(o)){const i=a?o[ze.PATH]:l[0],d=a?o[ze.PATTERN]:o[i];if(!pe(d))throw new Error(Xt(i));const m={keyId:Ne(i),pattern:d};return t&&(m.searcher=qe(d,e)),m}let r={children:[],operator:l[0]};return l.forEach(i=>{const d=o[i];ye(d)&&d.forEach(m=>{r.children.push(s(m))})}),r};return Je(n)||(n=ot(n)),s(n)}function Bn(n,{ignoreFieldNorm:e=P.ignoreFieldNorm}){n.forEach(t=>{let s=1;t.matches.forEach(({key:o,norm:l,score:a})=>{const r=o?o.weight:null;s*=Math.pow(a===0&&r?Number.EPSILON:a,(r||1)*(e?1:l))}),t.score=s})}function $n(n,e){const t=n.matches;e.matches=[],ae(t)&&t.forEach(s=>{if(!ae(s.indices)||!s.indices.length)return;const{indices:o,value:l}=s;let a={indices:o,value:l};s.key&&(a.key=s.key.src),s.idx>-1&&(a.refIndex=s.idx),e.matches.push(a)})}function Mn(n,e){e.score=n.score}function An(n,e,{includeMatches:t=P.includeMatches,includeScore:s=P.includeScore}={}){const o=[];return t&&o.push($n),s&&o.push(Mn),n.map(l=>{const{idx:a}=l,r={item:e[a],refIndex:a};return o.length&&o.forEach(i=>{i(l,r)}),r})}class Ee{constructor(e,t={},s){this.options={...P,...t},this.options.useExtendedSearch,this._keyStore=new tn(this.options.keys),this.setCollection(e,s)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Ge))throw new Error(Ht);this._myIndex=t||ct(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){ae(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let s=0,o=this._docs.length;s<o;s+=1){const l=this._docs[s];e(l,s)&&(this.removeAt(s),s-=1,o-=1,t.push(l))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:s,includeScore:o,shouldSort:l,sortFn:a,ignoreFieldNorm:r}=this.options;let i=pe(e)?pe(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Bn(i,{ignoreFieldNorm:r}),l&&i.sort(a),it(t)&&t>-1&&(i=i.slice(0,t)),An(i,this._docs,{includeMatches:s,includeScore:o})}_searchStringList(e){const t=qe(e,this.options),{records:s}=this._myIndex,o=[];return s.forEach(({v:l,i:a,n:r})=>{if(!ae(l))return;const{isMatch:i,score:d,indices:m}=t.searchIn(l);i&&o.push({item:l,idx:a,matches:[{score:d,value:l,norm:r,indices:m}]})}),o}_searchLogical(e){const t=mt(e,this.options),s=(r,i,d)=>{if(!r.children){const{keyId:g,searcher:S}=r,u=this._findMatches({key:this._keyStore.get(g),value:this._myIndex.getValueForItemAtKeyId(i,g),searcher:S});return u&&u.length?[{idx:d,item:i,matches:u}]:[]}const m=[];for(let g=0,S=r.children.length;g<S;g+=1){const u=r.children[g],c=s(u,i,d);if(c.length)m.push(...c);else if(r.operator===Pe.AND)return[]}return m},o=this._myIndex.records,l={},a=[];return o.forEach(({$:r,i})=>{if(ae(r)){let d=s(t,r,i);d.length&&(l[i]||(l[i]={idx:i,item:r,matches:[]},a.push(l[i])),d.forEach(({matches:m})=>{l[i].matches.push(...m)}))}}),a}_searchObjectList(e){const t=qe(e,this.options),{keys:s,records:o}=this._myIndex,l=[];return o.forEach(({$:a,i:r})=>{if(!ae(a))return;let i=[];s.forEach((d,m)=>{i.push(...this._findMatches({key:d,value:a[m],searcher:t}))}),i.length&&l.push({idx:r,item:a,matches:i})}),l}_findMatches({key:e,value:t,searcher:s}){if(!ae(t))return[];let o=[];if(ye(t))t.forEach(({v:l,i:a,n:r})=>{if(!ae(l))return;const{isMatch:i,score:d,indices:m}=s.searchIn(l);i&&o.push({score:d,key:e,value:l,idx:a,norm:r,indices:m})});else{const{v:l,n:a}=t,{isMatch:r,score:i,indices:d}=s.searchIn(l);r&&o.push({score:i,key:e,value:l,norm:a,indices:d})}return o}}Ee.version="7.0.0";Ee.createIndex=ct;Ee.parseIndex=dn;Ee.config=P;Ee.parseQuery=mt;Cn(En);const Fn={class:"BuilderTemplateInput"},Tn=["id"],Vn=["value"],On=["value","onClick"],Rn={class:"prop"},Pn={class:"type"},Ln=q({__name:"BuilderTemplateInput",props:{inputId:{type:String,required:!1,default:void 0},value:{type:String,required:!1,default:void 0},multiline:{type:Boolean,required:!1},variant:{type:String,required:!1,default:void 0},type:{type:String,required:!1,default:"template"},options:{type:Object,required:!1,default:void 0},placeholder:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0}},emits:["input","update:value"],setup(n,{expose:e,emit:t}){const s=t,o=n,l=L(W.core),a=Y("input"),r=Y("dropdown"),i=st([]),{floatingStyles:d,update:m}=gt(a,r,{placement:"bottom-start",middleware:[Et(),Ct({apply({rects:M,elements:V}){Object.assign(V.floating.style,{minWidth:`${M.reference.width}px`})}})],strategy:"fixed"});g();function g(){let M;function V(){M&&M(),M=void 0}$e(r,()=>{V(),r.value&&(M=_t(a,r.value,m))}),bt(()=>V())}e({focus:()=>{var M;return(M=a.value)==null?void 0:M.focus()}});function S(M,V){return V.reduce((B,C)=>B==null?void 0:B[C],M)}function u(M){var U,ee;let V=((U=a.value)==null?void 0:U.value)??"";const{selectionStart:B,selectionEnd:C}=((ee=a.value)==null?void 0:ee.getSelection())??{},f=V.slice(0,B),k=E(f);if(k===null)return;const K=k.at(-1).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"$",R=f.replace(new RegExp(K),`${M}${o.type==="template"?"}":""}`),T=V.slice(C).replace(/^(\})+/,"");V=R.concat(T),s("input",{target:{value:V}}),s("update:value",V),i.value=[],a.value.focus(),he(()=>{a.value.setSelectionEnd(R.length),a.value.setSelectionStart(R.length)})}function c(M){return M===null?"null":M===void 0?"undefined":typeof M}function E(M){if((o.type??"template")==="state")return M.split(".");const V=M.match(/@\{([^}{@]*)$/);return V?((V==null?void 0:V[1])??"").split("."):null}function y(M){return M.replace(/\\/g,"\\\\").replace(/\./g,"\\.")}function v(M){s("input",M),s("update:value",M.target.value),_()}function _(){var U,ee;const{selectionStart:M,selectionEnd:V}=((U=a.value)==null?void 0:U.getSelection())??{},B=(ee=a.value)==null?void 0:ee.value;if(!(M===V)){i.value=[];return}const f=B.slice(0,M),k=E(f);if(k===null){i.value=[];return}const b=k.at(-1),K=k.slice(0,-1),R=Object.entries(S(l.userState.value,K)??{}).map(([se,ue])=>({text:y(se),type:c(ue)})),T=new Ee(R,{findAllMatches:!0,includeMatches:!0,keys:["text"]});if(b===""){i.value=R;return}i.value=T.search(b).map(se=>{const{item:ue}=se;return ue})}let A;function N(){A=setTimeout(()=>{i.value=[],A=null},300)}function j(){A&&(clearTimeout(A),A=null)}return(M,V)=>{const B=kt("capture-tabs");return p(),$("div",Fn,[o.multiline?w("",!0):(p(),$(Q,{key:0},[O(de,{ref_key:"input",ref:a,"model-value":o.value,autocorrect:"off",autocomplete:"off",spellcheck:"false",placeholder:o.placeholder,list:o.options?`list-${o.inputId}`:void 0,invalid:n.error!==void 0,onInput:v,onBlur:N},null,8,["model-value","placeholder","list","invalid"]),o.options?(p(),$("datalist",{key:0,id:`list-${o.inputId}`},[(p(!0),$(Q,null,me(n.options,(C,f)=>(p(),$("option",{key:f,value:f},[C.toLowerCase()!==String(f).toLowerCase()?(p(),$(Q,{key:0},[ie(G(C),1)],64)):w("",!0)],8,Vn))),128))],8,Tn)):w("",!0)],64)),o.multiline?Be((p(),F(It,{key:1,ref_key:"input",ref:a,variant:o.variant,"model-value":o.value,autocorrect:"off",autocomplete:"off",spellcheck:"false",rows:"3",placeholder:o.placeholder,invalid:n.error!==void 0,onInput:v},null,8,["variant","model-value","placeholder","invalid"])),[[B]]):w("",!0),i.value.length?(p(),$("div",{key:2,ref_key:"dropdown",ref:r,class:"fieldStateAutocomplete",tabindex:"-1",style:St(h(d))},[(p(!0),$(Q,null,me(i.value,(C,f)=>(p(),$("button",{key:f,class:"fieldStateAutocompleteOption",value:f,onFocusout:N,onFocusin:j,onClick:()=>u(C.text)},[I("span",Rn,G(C.text),1),I("span",Pn,G(C.type),1)],40,On))),128))],4)):w("",!0)])}}}),re=z(Ln,[["__scopeId","data-v-7c269909"]]),Wn=["disabled","data-writer-tooltip"],jn=q({__name:"WdsTab",props:{disabled:{type:[Boolean,String],default:void 0},selected:{type:Boolean}},emits:{click:()=>!0},setup(n){const e=n,t=x(()=>typeof e.disabled=="string"?e.disabled:void 0);return(s,o)=>(p(),$("button",{class:Ye(["WdsTab",{"WdsTab--disabled":n.disabled,"WdsTab--selected":n.selected}]),type:"button",disabled:!!n.disabled,"data-writer-tooltip":t.value,onClick:o[0]||(o[0]=l=>s.$emit("click"))},[Re(s.$slots,"default",{},void 0,!0)],10,Wn))}}),Dn=z(jn,[["__scopeId","data-v-84bc5b3a"]]),Nn={class:"WdsTabs"},Kn=q({__name:"WdsTabs",props:xt({tabs:{type:Array,required:!0}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=wt(n,"modelValue");return(t,s)=>(p(),$("div",Nn,[(p(!0),$(Q,null,me(n.tabs,o=>(p(),F(Dn,{key:o.value,disabled:o.disabled,selected:o.value===e.value,onClick:l=>e.value=o.value},{default:D(()=>[ie(G(o.label),1)]),_:2},1032,["disabled","selected","onClick"]))),128))]))}}),ke=z(Kn,[["__scopeId","data-v-2fa8e710"]]),Fe=Object.freeze([{label:"Default",value:"default"},{label:"CSS",value:"css"},{label:"Pick",value:"pick"}]),Un=["data-automation-key"],qn={key:0,class:"main"},zn={key:0,class:"pickerContainer"},Jn=q({__name:"BuilderFieldsAlign",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},direction:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=ne({loader:()=>oe(()=>import("./index-ChWW_c_j.js").then(f=>f.aZ),__vite__mapDeps([0,1]),import.meta.url),loadingComponent:be}),t=L(W.core),s=L(W.builderManager),{setContentValue:o}=te(t,s),l=Y("rootEl"),a=Y("pickerEl"),r=Y("freehandInputEl"),i=[{key:"start",label:"Left",match:f=>f=="start",default:"start",icon:"format_align_left"},{key:"center",label:"Center",match:f=>f=="center",default:"center",icon:"format_align_center"},{key:"end",label:"Right",match:f=>f=="end",default:"end",icon:"format_align_right"}],d=[{key:"start",label:"Top",match:f=>f=="start",default:"start",icon:"vertical_align_top"},{key:"center",label:"Center",match:f=>f=="center",default:"center",icon:"vertical_align_center"},{key:"end",label:"Bottom",match:f=>f=="end",default:"end",icon:"vertical_align_bottom"}],m={pick:a,css:r,default:null},g=n,{componentId:S,fieldKey:u,direction:c}=le(g),E=x(()=>t.getComponentById(S.value)),y=x(()=>c.value=="vertical"?d:c.value=="horizontal"?i:d),v=x(()=>y.value.map(f=>({value:f.key,label:f.label,icon:f.icon}))),_=x(()=>{const f=E.value.content[u.value];for(const k in y.value)if(f&&y.value[k].match(f))return y.value[k].key;return null}),A=x(()=>{const f=E.value.content[u.value];return f||""}),j=X((()=>{if(!A.value)return"default";for(const f in y.value)if(y.value[f].match(A.value))return"pick";return"css"})()),M=()=>{var k;const f=(k=m[j.value])==null?void 0:k.value;f&&(f.focus(),typeof f.selectionStart=="number"&&(f.selectionStart=f.selectionEnd=f.value.length))},V=async f=>{j.value!=f&&(j.value=f,await he(),M(),f==="default"&&o(E.value.id,u.value,void 0))},B=f=>{for(const k in y.value)if(y.value[k].key==f){const b=y.value[k].default;E.value.content[u.value]=b,o(E.value.id,u.value,b)}},C=f=>{o(E.value.id,u.value,f.target.value)};return Se(()=>{l.value.addEventListener("focus",M)}),Ae(()=>{l.value.removeEventListener("focus",M)}),(f,k)=>(p(),$("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsAlign",tabindex:"-1","data-automation-key":g.fieldKey},[O(ke,{tabs:h(Fe),"model-value":j.value,"onUpdate:modelValue":V},null,8,["tabs","model-value"]),j.value=="pick"||j.value=="css"?(p(),$("div",qn,[j.value=="pick"?(p(),$("div",zn,[O(h(e),{ref_key:"pickerEl",ref:a,"model-value":_.value,options:v.value,"onUpdate:modelValue":B},null,8,["model-value","options"])])):w("",!0),j.value=="css"?(p(),F(re,{key:1,ref_key:"freehandInputEl",ref:r,value:E.value.content[h(u)],error:n.error,onInput:C},null,8,["value","error"])):w("",!0)])):w("",!0)],8,Un))}}),lt=z(Jn,[["__scopeId","data-v-effe7708"]]),Yn=["data-automation-key"],Gn={key:0,class:"main"},Hn={key:0,class:"pickerContainer"},Xn=["value"],Zn=q({__name:"BuilderFieldsColor",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=L(W.core),t=L(W.builderManager),{setContentValue:s}=te(e,t),o=Y("rootEl"),l=Y("pickerEl"),a=Y("freehandInputEl"),r={pick:l,css:a,default:null},i=n,{componentId:d,fieldKey:m}=le(i),g=x(()=>e.getComponentById(d.value)),u=X((()=>{const v=g.value.content[m.value];return v?/#[A-Fa-f0-9]{6}/.test(v)?"pick":"css":"default"})()),c=()=>{var _;const v=(_=r[u.value])==null?void 0:_.value;v&&(v.focus(),typeof v.selectionStart=="number"&&(v.selectionStart=v.selectionEnd=v.value.length))},E=async v=>{u.value!=v&&(u.value=v,await he(),c(),v==="default"&&s(g.value.id,m.value,void 0))},y=v=>s(g.value.id,m.value,v.target.value);return Se(()=>{o.value.addEventListener("focus",c)}),Ae(()=>{o.value.removeEventListener("focus",c)}),(v,_)=>(p(),$("div",{ref_key:"rootEl",ref:o,class:"BuilderFieldsColor",tabindex:"-1","data-automation-key":h(m)},[O(ke,{tabs:h(Fe),"model-value":u.value,"onUpdate:modelValue":E},null,8,["tabs","model-value"]),u.value=="pick"||u.value=="css"?(p(),$("div",Gn,[u.value=="pick"?(p(),$("div",Hn,[I("input",{ref_key:"pickerEl",ref:l,type:"color",value:g.value.content[h(m)],onInput:y},null,40,Xn)])):w("",!0),u.value=="css"?(p(),F(re,{key:1,ref_key:"freehandInputEl",ref:a,value:g.value.content[h(m)],error:n.error,onInput:y},null,8,["value","error"])):w("",!0)])):w("",!0)],8,Yn))}}),Qn=z(Zn,[["__scopeId","data-v-335d2cc7"]]),eo={class:"WdsFieldWrapper colorTransformer"},to={class:"temporaryMissingBar"},no={key:0,class:"WdsFieldWrapper__title"},oo={key:0,class:"WdsFieldWrapper__title__label"},lo={key:0,class:"WdsFieldWrapper__title__label__unit"},so={class:"WdsFieldWrapper__slot"},ao={key:1,class:"WdsFieldWrapper__error"},io={key:2,class:"WdsFieldWrapper__hint"},ro=q({__name:"WdsFieldWrapper",props:{label:{type:String,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},hint:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},isExpansible:{type:Boolean,required:!1,default:!1},helpButton:{type:[String,Boolean],required:!1,default:void 0}},emits:{helpClick:()=>!0,expand:()=>!0,shrink:()=>!0},setup(n,{emit:e}){const t=e,s=X(!1);function o(){t("expand"),s.value=!0}const l={desc:"OK",fn:()=>{s.value=!1,t("shrink")}};return(a,r)=>(p(),$("div",eo,[s.value?(p(),$(Q,{key:0},[O(Me,{actions:[l],description:n.hint,title:n.label},{default:D(()=>[Re(a.$slots,"default",{},void 0,!0)]),_:3},8,["actions","description","title"]),I("div",to,[r[1]||(r[1]=ie(" Field ")),I("strong",null,G(n.label),1),r[2]||(r[2]=ie(" is open in a new window. "))])],64)):(p(),$(Q,{key:1},[!s.value&&(n.label||n.helpButton)?(p(),$("div",no,[n.label?(p(),$("label",oo,[ie(G(n.label),1),n.unit?(p(),$("span",lo," : "+G(n.unit),1)):w("",!0)])):w("",!0),n.isExpansible?(p(),F(H,{key:1,class:"WdsFieldWrapper__title__help",variant:"neutral",size:"smallIcon","data-writer-tooltip":"Expand",onClick:o},{default:D(()=>r[3]||(r[3]=[I("i",{class:"material-symbols-outlined"},"open_in_new",-1)])),_:1})):w("",!0),n.helpButton?(p(),F(H,{key:2,class:"WdsFieldWrapper__title__help",variant:"neutral",size:"smallIcon","data-writer-tooltip":typeof n.helpButton=="string"?n.helpButton:void 0,onClick:r[0]||(r[0]=i=>a.$emit("helpClick"))},{default:D(()=>r[4]||(r[4]=[I("i",{class:"material-symbols-outlined"},"help",-1)])),_:1},8,["data-writer-tooltip"])):w("",!0)])):w("",!0),I("div",so,[Re(a.$slots,"default",{},void 0,!0)]),n.error?(p(),$("p",ao,G(n.error),1)):w("",!0),n.hint?(p(),$("p",io,G(n.hint),1)):w("",!0)],64))]))}}),fe=z(ro,[["__scopeId","data-v-6ccdf720"]]);function uo(n){const e=co(),t=X("assisted");function s(y){if(t.value!==y){switch(y){case"assisted":g(E.value);break;case"freehand":o.value=JSON.stringify(E.value,void 0,2);break}t.value=y}}const o=X(),l=st({});g(n);function a(){l.value={...l.value,[e()]:{value:"",key:""}}}function r(y,v){const _=l.value[y];_&&(l.value={...l.value,[y]:{..._,key:v}})}function i(y,v){const _=l.value[y];_&&(l.value={...l.value,[y]:{..._,value:v}})}function d(y){if(!l.value[y])return;const v={...l.value};delete v[y],l.value=v}function m(y){const v=l.value[y];if(v&&u.value.has(v.key))return"This key is already in use. Please remove duplicate keys."}function g(y){l.value=Object.entries(y).reduce((v,[_,A])=>(v[e()]={key:_,value:String(A)},v),{}),Object.keys(l.value).length===0&&a()}const S=x(()=>Object.values(l.value).some(y=>y.key==="")),u=x(()=>{const y=new Set,v=new Set;for(const{key:_}of Object.values(l.value))y.has(_)?v.add(_):y.add(_);return v}),c=x(()=>{switch(t.value){case"assisted":return u.value.size===0;case"freehand":try{return JSON.parse(o.value),!0}catch{return!1}default:return!1}}),E=x(()=>{switch(t.value){case"assisted":return Object.values(l.value).reduce((y,v)=>(y[v.key]=v.value,y),{});case"freehand":try{return JSON.parse(o.value)}catch{return{}}default:return{}}});return{mode:x({get:()=>t.value,set:s}),assistedEntries:Bt(l),addEntryDisabled:S,addAssistedEntry:a,updateAssistedEntryKey:r,updateAssistedEntryValue:i,removeAssistedEntry:d,getAssistedEntryError:m,freehandValue:o,isValid:c,currentValue:E}}function co(){let n=0;return()=>String(++n)}const po={key:1,class:"BuilderFieldsKeyValueModal__assistedEntries"},vo={key:0,class:"BuilderFieldsKeyValueModal__assistedEntries__form"},fo=q({__name:"BuilderFieldsKeyValueModal",props:{data:{type:Object,required:!0},initialMode:{type:String,required:!1,default:"assisted"}},emits:{submit:n=>typeof n=="object"&&n!==void 0,close:()=>!0},setup(n,{emit:e}){const t=ne({loader:()=>oe(()=>import("./BuilderEmbeddedCodeEditor-CbK-r9w6.js").then(v=>v.a),__vite__mapDeps([2,0,1,3]),import.meta.url),loadingComponent:be}),s=n,{mode:o,assistedEntries:l,freehandValue:a,isValid:r,currentValue:i,addAssistedEntry:d,updateAssistedEntryValue:m,updateAssistedEntryKey:g,removeAssistedEntry:S,getAssistedEntryError:u}=uo(s.data);o.value=s.initialMode;const c=e,E=x(()=>[{desc:"Save",fn:()=>c("submit",i.value),disabled:JSON.stringify(s.data)===JSON.stringify(i.value)||!r.value}]),y=x(()=>[{label:"List",value:"assisted",disabled:o.value==="freehand"&&!r.value?"The JSON is not valid":void 0},{label:"JSON",value:"freehand"}]);return(v,_)=>(p(),F(Me,{title:"Category key values","display-close-button":"",actions:E.value,onClose:_[2]||(_[2]=A=>v.$emit("close"))},{titleActions:D(()=>[O(ke,{modelValue:h(o),"onUpdate:modelValue":_[0]||(_[0]=A=>He(o)?o.value=A:null),class:"BuilderFieldsKeyValueModal__tabs",tabs:y.value},null,8,["modelValue","tabs"])]),default:D(()=>[h(o)==="freehand"?(p(),F(h(t),{key:0,modelValue:h(a),"onUpdate:modelValue":_[1]||(_[1]=A=>He(a)?a.value=A:null),class:"BuilderFieldsKeyValueModal__freehand",variant:"minimal",language:"json"},null,8,["modelValue"])):w("",!0),h(o)==="assisted"?(p(),$("div",po,[h(o)==="assisted"?(p(),$("div",vo,[_[4]||(_[4]=I("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelKey"}," Key ",-1)),_[5]||(_[5]=I("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelValue"}," Value ",-1)),(p(!0),$(Q,null,me(h(l),(A,N)=>(p(),$(Q,{key:N},[O(fe,{error:h(u)(N)},{default:D(()=>[O(re,{placeholder:"Type a key...",value:A.key,error:h(u)(N),"onUpdate:value":j=>h(g)(N,j)},null,8,["value","error","onUpdate:value"])]),_:2},1032,["error"]),O(fe,null,{default:D(()=>[O(re,{placeholder:"Type a value...",value:A.value,"onUpdate:value":j=>h(m)(N,j)},null,8,["value","onUpdate:value"])]),_:2},1024),I("div",null,[O(H,{variant:"neutral",size:"smallIcon",class:"BuilderFieldsKeyValueModal__assistedEntries__form__deleteBtn",onClick:j=>h(S)(N)},{default:D(()=>_[3]||(_[3]=[I("span",{class:"material-symbols-outlined"},"delete",-1)])),_:2},1032,["onClick"])])],64))),128))])):w("",!0),O(H,{variant:"special",size:"small",onClick:h(d)},{default:D(()=>_[6]||(_[6]=[I("span",{class:"material-symbols-outlined"},"add",-1),ie("Add a pair")])),_:1},8,["onClick"])])):w("",!0)]),_:1},8,["actions"]))}}),mo=z(fo,[["__scopeId","data-v-7d3c37f9"]]),yo=["data-automation-key"],ho={class:"BuilderFieldsKeyValue__toolbar"},go={key:1,class:"BuilderFieldsKeyValue__listEmpty"},_o={key:2,class:"BuilderFieldsKeyValue__list"},bo=["data-writer-tooltip"],ko=["data-writer-tooltip"],Io=q({__name:"BuilderFieldsKeyValue",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},instancePath:{type:Array,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=n,t=L(W.core),s=L(W.builderManager),{setContentValue:o}=te(t,s),{getEvaluatedFields:l}=at(t),a=Xe(e,"componentId"),r=Xe(e,"fieldKey"),i=X(),d=x(()=>l(e.instancePath)[r.value].value),m=x(()=>t.getComponentById(a.value)),g=x(()=>{var c;const u=(c=m.value.content)==null?void 0:c[r.value];if(u===void 0)return d.value;try{return JSON.parse(u)}catch{return{}}});function S(u){i.value=void 0,o(m.value.id,r.value,JSON.stringify(u,null,2))}return(u,c)=>(p(),$("div",{class:"BuilderFieldsKeyValue",tabindex:"-1","data-automation-key":e.fieldKey},[I("div",ho,[O(H,{variant:"neutral",size:"smallIcon","data-automation-key":"openAssistedMode",onClick:c[0]||(c[0]=E=>i.value="assisted")},{default:D(()=>c[3]||(c[3]=[I("i",{class:"material-symbols-outlined"},"edit",-1)])),_:1})]),i.value?(p(),F(mo,{key:0,data:g.value,"initial-mode":i.value,onSubmit:S,onClose:c[1]||(c[1]=E=>i.value=void 0)},null,8,["data","initial-mode"])):w("",!0),Object.keys(d.value).length===0?(p(),$("div",go,[c[5]||(c[5]=I("p",null,"There are no key value categories defined",-1)),O(H,{variant:"special",size:"small",onClick:c[2]||(c[2]=E=>i.value="assisted")},{default:D(()=>c[4]||(c[4]=[I("i",{class:"material-symbols-outlined"},"keyboard_backspace",-1),ie(" Edit ")])),_:1})])):(p(),$("ul",_o,[(p(!0),$(Q,null,me(d.value,(E,y)=>(p(),$("li",{key:y,class:"BuilderFieldsKeyValue__list__item"},[I("p",{class:"BuilderFieldsKeyValue__list__item__key","data-writer-tooltip":y,"data-writer-tooltip-strategy":"overflow"},G(y),9,bo),I("p",{class:"BuilderFieldsKeyValue__list__item__value","data-writer-tooltip":E,"data-writer-tooltip-strategy":"overflow"},G(E||"<empty value>"),9,ko)]))),128))]))],8,yo))}}),So=z(Io,[["__scopeId","data-v-b69d9ec7"]]),Eo=q({__name:"BuilderFieldsObject",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=L(W.core),t=L(W.builderManager),{setContentValue:s}=te(e,t),o=n,{componentId:l,fieldKey:a}=le(o),r=x(()=>e.getComponentById(l.value)),i=m=>{s(r.value.id,a.value,m)},d=x(()=>{const{type:m}=r.value;return e.getComponentDefinition(m).fields[a.value]});return(m,g)=>{var S;return p(),F(re,{class:"BuilderFieldsObject","data-automation-key":o.fieldKey,multiline:"",variant:"code",value:r.value.content[h(a)],placeholder:(S=d.value)==null?void 0:S.default,error:n.error,onInput:g[0]||(g[0]=u=>i(u.target.value))},null,8,["data-automation-key","value","placeholder","error"])}}}),Co=z(Eo,[["__scopeId","data-v-7749ae31"]]),xo=["data-automation-key"],wo={key:0,class:"main"},Bo={key:0,class:"pickerContainer"},$o={class:"BuilderFieldsPadding__options"},Mo=q({__name:"BuilderFieldsPadding",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=ne({loader:()=>oe(()=>import("./index-ChWW_c_j.js").then(k=>k.aZ),__vite__mapDeps([0,1]),import.meta.url),loadingComponent:be}),t=L(W.core),s=L(W.builderManager),{setContentValue:o}=te(t,s),l=Y("rootEl"),a=Y("pickerEl"),r=Y("freehandInputEl"),i=Y("fixedEl"),d=[{key:"all_sides",label:"All sides",match:k=>k.split(" ").length==1&&k.endsWith("px"),default:()=>A.value?A.value[0]:"0px"},{key:"XY sides",label:"XY sides",match:k=>k.split(" ").length==2&&k.endsWith("px"),default:()=>A.value?A.value[2]+" "+A.value[0]:"0px 0px"},{key:"Per side",label:"Per side",match:k=>k.split(" ").length==4&&k.endsWith("px"),default:()=>A.value?[A.value[3],A.value[1],A.value[2],A.value[0]].join(" "):"0px 0px 0px 0px"}],m={pick:a,css:r,default:null},g=n,{componentId:S,fieldKey:u}=le(g),c=x(()=>t.getComponentById(S.value)),E=x(()=>d.map(k=>({value:k.key,label:k.label,icon:"padding"}))),y=x(()=>{const k=c.value.content[u.value];for(const b in d)if(k&&d[b].match(k))return d[b].key;return null}),v=x(()=>{const k=c.value.content[u.value];return k||""}),_=x(()=>{const k=A.value;return k?[k[0].substring(0,k[0].length-2),k[1].substring(0,k[1].length-2),k[2].substring(0,k[2].length-2),k[3].substring(0,k[3].length-2)]:["0","0","0","0"]}),A=x(()=>{const k=c.value.content[u.value];if(k){const b=k.split(" ");if(b.length==1&&b[0].endsWith("px"))return[b[0],b[0],b[0],b[0]];if(b.length==2&&b[0].endsWith("px")&&b[0].endsWith("px"))return[b[1],b[1],b[0],b[0]];if(b.length==4&&b[0].endsWith("px")&&b[1].endsWith("px")&&b[2].endsWith("px")&&b[3].endsWith("px"))return[b[3],b[1],b[0],b[2]]}else return null;return null}),j=X((()=>{if(!v.value)return"default";for(const k in d)if(d[k].match(v.value))return"pick";return"css"})()),M=()=>{var b;const k=(b=m[j.value])==null?void 0:b.value;k&&(k.focus(),typeof k.selectionStart=="number"&&(k.selectionStart=k.selectionEnd=k.value.length))},V=async k=>{j.value!=k&&(j.value=k,await he(),M(),k==="default"&&o(c.value.id,u.value,void 0))},B=k=>{for(const b in d)if(d[b].key==k){const K=d[b].default();c.value.content[u.value]=K,o(c.value.id,u.value,K)}he(()=>{var b;(b=i.value)==null||b.focus()})},C=k=>{o(c.value.id,u.value,k.target.value)},f=(k,b,K)=>{const R=Number(k),T=c.value.content[u.value];if(b=="all_sides")o(c.value.id,u.value,R+"px");else if(b=="XY sides"){const U=T.split(" ");K=="x"?U[1]=R+"px":K=="y"&&(U[0]=R+"px"),o(c.value.id,u.value,U.join(" "))}else if(b=="Per side"){const U=T.split(" ");K=="top"?U[0]=R+"px":K=="right"?U[1]=R+"px":K=="bottom"?U[2]=R+"px":K=="left"&&(U[3]=R+"px"),o(c.value.id,u.value,U.join(" "))}};return Se(()=>{l.value.addEventListener("focus",M)}),Ae(()=>{l.value.removeEventListener("focus",M)}),(k,b)=>(p(),$("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsPadding",tabindex:"-1","data-automation-key":g.fieldKey},[O(ke,{tabs:h(Fe),"model-value":j.value,"onUpdate:modelValue":V},null,8,["tabs","model-value"]),j.value=="pick"||j.value=="css"?(p(),$("div",wo,[j.value=="pick"?(p(),$("div",Bo,[O(h(e),{ref_key:"pickerEl",ref:a,"model-value":y.value,options:E.value,"onUpdate:modelValue":B},null,8,["model-value","options"]),I("div",$o,[y.value=="all_sides"?(p(),$(Q,{key:0},[b[7]||(b[7]=I("i",null,"All",-1)),O(de,{ref_key:"fixedEl",ref:i,type:"number","model-value":_.value[0],"onUpdate:modelValue":b[0]||(b[0]=K=>f(K,y.value))},null,8,["model-value"]),b[8]||(b[8]=I("div",null,"px",-1))],64)):w("",!0),y.value=="XY sides"?(p(),$(Q,{key:1},[b[9]||(b[9]=I("i",null,"X",-1)),O(de,{type:"number","model-value":_.value[0],"onUpdate:modelValue":b[1]||(b[1]=K=>f(K,y.value,"x"))},null,8,["model-value"]),b[10]||(b[10]=I("div",null,"px",-1)),b[11]||(b[11]=I("i",null,"Y",-1)),O(de,{type:"number","model-value":_.value[2],"onUpdate:modelValue":b[2]||(b[2]=K=>f(K,y.value,"y"))},null,8,["model-value"]),b[12]||(b[12]=I("div",null,"px",-1))],64)):w("",!0),y.value=="Per side"?(p(),$(Q,{key:2},[b[13]||(b[13]=I("i",null,"Left",-1)),O(de,{type:"number","model-value":_.value[0],"onUpdate:modelValue":b[3]||(b[3]=K=>f(K,y.value,"left"))},null,8,["model-value"]),b[14]||(b[14]=I("div",null,"px",-1)),b[15]||(b[15]=I("i",null,"Right",-1)),O(de,{type:"number","model-value":_.value[1],"onUpdate:modelValue":b[4]||(b[4]=K=>f(K,y.value,"right"))},null,8,["model-value"]),b[16]||(b[16]=I("div",null,"px",-1)),b[17]||(b[17]=I("i",null,"Top",-1)),O(de,{type:"number","model-value":_.value[2],"onUpdate:modelValue":b[5]||(b[5]=K=>f(K,y.value,"top"))},null,8,["model-value"]),b[18]||(b[18]=I("div",null,"px",-1)),b[19]||(b[19]=I("i",null,"Bottom",-1)),O(de,{type:"number","model-value":_.value[3],"onUpdate:modelValue":b[6]||(b[6]=K=>f(K,y.value,"bottom"))},null,8,["model-value"]),b[20]||(b[20]=I("div",null,"px",-1))],64)):w("",!0)])])):w("",!0),j.value=="css"?(p(),F(re,{key:1,ref_key:"freehandInputEl",ref:r,value:c.value.content[h(u)],error:n.error,onInput:C},null,8,["value","error"])):w("",!0)])):w("",!0)],8,xo))}}),Ao=z(Mo,[["__scopeId","data-v-4d3bd6b8"]]),Fo=["data-automation-key"],To={key:0,class:"main"},Vo={key:0,class:"pickerContainer"},Oo={class:"param"},Ro={class:"header"},Po=["value"],Lo={class:"param"},Wo={class:"header"},jo=["value"],Do={class:"param"},No={class:"header"},Ko=["value"],Uo={class:"param"},qo={class:"header"},zo=["value"],Jo={class:"param"},Yo=["value"],Go=q({__name:"BuilderFieldsShadow",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=L(W.core),t=L(W.builderManager),{setContentValue:s}=te(e,t),o=Y("rootEl"),l=Y("freehandInputEl"),a=Y("paramOffsetXEl"),r=Y("paramOffsetYEl"),i=Y("paramBlurRadiusEl"),d=Y("paramSpreadRadiusEl"),m=Y("paramColorEl"),g={pick:a,css:l,default:null},S=n,{componentId:u,fieldKey:c}=le(S),E=x(()=>e.getComponentById(u.value)),y=/^(?<offsetX>[0-9]+)px (?<offsetY>[0-9]+)px (?<blurRadius>[0-9]+)px (?<spreadRadius>[0-9-]+)px (?<color>#[A-Fa-f0-9]{6})$/,_=X((()=>{const B=E.value.content[c.value];return B?y.test(B)?"pick":"css":"default"})()),A=()=>{var C;const B=(C=g[_.value])==null?void 0:C.value;B&&(B.focus(),typeof B.selectionStart=="number"&&(B.selectionStart=B.selectionEnd=B.value.length))},N=async B=>{_.value!=B&&(_.value=B,await he(),A(),B==="default"&&s(E.value.id,c.value,void 0))},j=()=>{const B=a.value.value,C=r.value.value,f=i.value.value,k=d.value.value,b=m.value.value,K=`${B}px ${C}px ${f}px ${k}px ${b}`;s(E.value.id,c.value,K)},M=B=>{s(E.value.id,c.value,B.target.value)},V=x(()=>{var f;const B=E.value.content[c.value];return(f=B==null?void 0:B.match(y))==null?void 0:f.groups});return Se(()=>{o.value.addEventListener("focus",A)}),Ae(()=>{o.value.removeEventListener("focus",A)}),(B,C)=>{var f,k,b,K,R,T,U,ee,se,ue,Ce,xe,we;return p(),$("div",{ref_key:"rootEl",ref:o,class:"BuilderFieldsShadow",tabindex:"-1","data-automation-key":S.fieldKey},[O(ke,{tabs:h(Fe),"model-value":_.value,"onUpdate:modelValue":N},null,8,["tabs","model-value"]),_.value=="pick"||_.value=="css"?(p(),$("div",To,[_.value=="pick"?(p(),$("div",Vo,[I("div",Oo,[I("div",Ro,[C[0]||(C[0]=I("div",{class:"name"},"Offset X",-1)),Be(I("div",{class:"value"},G((f=V.value)==null?void 0:f.offsetX)+"px ",513),[[Te,(k=V.value)==null?void 0:k.offsetX]])]),I("input",{ref_key:"paramOffsetXEl",ref:a,type:"range",min:"0",max:"32",value:(b=V.value)==null?void 0:b.offsetX,onInput:j},null,40,Po)]),I("div",Lo,[I("div",Wo,[C[1]||(C[1]=I("div",{class:"name"},"Offset Y",-1)),Be(I("div",{class:"value"},G((K=V.value)==null?void 0:K.offsetY)+"px ",513),[[Te,(R=V.value)==null?void 0:R.offsetY]])]),I("input",{ref_key:"paramOffsetYEl",ref:r,type:"range",min:"0",max:"32",value:(T=V.value)==null?void 0:T.offsetY,onInput:j},null,40,jo)]),I("div",Do,[I("div",No,[C[2]||(C[2]=I("div",{class:"name"},"Blur radius",-1)),Be(I("div",{class:"value"},G((U=V.value)==null?void 0:U.blurRadius)+"px ",513),[[Te,(ee=V.value)==null?void 0:ee.blurRadius]])]),I("input",{ref_key:"paramBlurRadiusEl",ref:i,type:"range",min:"0",max:"32",value:(se=V.value)==null?void 0:se.blurRadius,onInput:j},null,40,Ko)]),I("div",Uo,[I("div",qo,[C[3]||(C[3]=I("div",{class:"name"},"Spread radius",-1)),Be(I("div",{class:"value"},G((ue=V.value)==null?void 0:ue.spreadRadius)+"px ",513),[[Te,(Ce=V.value)==null?void 0:Ce.spreadRadius]])]),I("input",{ref_key:"paramSpreadRadiusEl",ref:d,type:"range",min:"-16",max:"32",value:(xe=V.value)==null?void 0:xe.spreadRadius,onInput:j},null,40,zo)]),I("div",Jo,[C[4]||(C[4]=I("div",{class:"header"},[I("div",{class:"name"},"Color")],-1)),I("input",{ref_key:"paramColorEl",ref:m,type:"color",value:(we=V.value)==null?void 0:we.color,onInput:j},null,40,Yo)])])):w("",!0),_.value=="css"?(p(),F(re,{key:1,ref_key:"freehandInputEl",ref:l,value:E.value.content[h(c)],error:n.error,onInput:M},null,8,["value","error"])):w("",!0)])):w("",!0)],8,Fo)}}}),Ho=z(Go,[["__scopeId","data-v-3d00b12a"]]),Xo=["data-automation-key"],Zo=q({__name:"BuilderFieldsText",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=L(W.core),t=L(W.builderManager),{setContentValue:s}=te(e,t),o=n,{componentId:l,fieldKey:a}=le(o),r=x(()=>e.getComponentById(l.value)),i=x(()=>{const{type:u}=r.value;return e.getComponentDefinition(u).fields[a.value]}),d=x(()=>`${o.componentId}-${o.fieldKey}`),m={uiComponents:()=>{const u=e.getComponents(void 0,{sortedByPosition:!0}).filter(E=>e.isChildOf("root",E.id)),c={};return u.forEach(E=>{c[E.id]=E.id}),c},uiComponentsWithEvents:()=>e.getComponents(void 0,{sortedByPosition:!0}).filter(u=>e.isChildOf("root",u.id)).filter(u=>!!e.getComponentDefinition(u.type).events).reduce((u,c)=>(u[c.id]=c.id,u),{}),eventTypes:(u,c)=>{var A;const E=(A=u.getComponentById(c).content)==null?void 0:A.refComponentId,y=e.getComponentById(E);if(!y)return{};const v=u.getComponentDefinition(y.type);return Object.fromEntries(Object.keys(v.events??{}).map(N=>[N,N]))}},g=x(()=>{const u=i.value;return u.options?typeof u.options=="function"?u.options(e,l.value):typeof u.options=="string"?m==null?void 0:m[u.options](e,l.value):u.options:{}}),S=u=>{s(r.value.id,a.value,u.target.value)};return(u,c)=>{var E,y;return p(),$("div",{class:"BuilderFieldsText","data-automation-key":o.fieldKey},[!i.value.control||i.value.control==h(De).Text?(p(),F(re,{key:0,class:"content","input-id":d.value,value:r.value.content[h(a)],placeholder:(E=i.value)==null?void 0:E.default,options:g.value,error:n.error,onInput:S},null,8,["input-id","value","placeholder","options","error"])):i.value.control==h(De).Textarea?(p(),F(re,{key:1,multiline:"",variant:"text",class:"content","input-id":d.value,value:r.value.content[h(a)],placeholder:(y=i.value)==null?void 0:y.default,error:n.error,onInput:S},null,8,["input-id","value","placeholder","error"])):w("",!0)],8,Xo)}}}),We=z(Zo,[["__scopeId","data-v-b2fda2e3"]]),Qo=["data-automation-key"],el={key:0,class:"main"},tl={key:0,class:"pickerContainer"},nl={key:0,class:"fixedContainer"},ol=q({__name:"BuilderFieldsWidth",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=ne({loader:()=>oe(()=>import("./index-ChWW_c_j.js").then(f=>f.aZ),__vite__mapDeps([0,1]),import.meta.url),loadingComponent:be}),t=L(W.core),s=L(W.builderManager),{setContentValue:o}=te(t,s),l=Y("rootEl"),a=Y("pickerEl"),r=Y("freehandInputEl"),i=Y("fixedEl"),d=[{key:"fixed",label:"Fixed",match:f=>f.endsWith("px"),default:"160px"},{key:"fit-content",label:"Fit Content",match:f=>f=="fit-content",default:"fit-content"},{key:"full",label:"Full",match:f=>f=="100%",default:"100%"}],m={pick:a,css:r,default:null},g=n,{componentId:S,fieldKey:u}=le(g),c=x(()=>t.getComponentById(S.value)),E=x(()=>d.map(f=>({value:f.key,label:f.label,icon:"width"}))),y=x(()=>{const f=c.value.content[u.value];for(const k in d)if(f&&d[k].match(f))return d[k].key;return null}),v=x(()=>{const f=c.value.content[u.value];return f||""}),_=x(()=>{const f=c.value.content[u.value];if(f){if(f.endsWith("px"))return f.substring(0,f.length-2)}else return null;return null}),N=X((()=>{if(!v.value)return"default";for(const f in d)if(d[f].match(v.value))return"pick";return"css"})()),j=()=>{var k;const f=(k=m[N.value])==null?void 0:k.value;f&&(f.focus(),typeof f.selectionStart=="number"&&(f.selectionStart=f.selectionEnd=f.value.length))},M=async f=>{N.value!=f&&(N.value=f,await he(),j(),f==="default"&&o(c.value.id,u.value,void 0))},V=f=>{for(const k in d)if(d[k].key==f){const b=d[k].default;c.value.content[u.value]=b,o(c.value.id,u.value,b)}f=="fixed"&&he(()=>{i.value.focus()})},B=f=>{o(c.value.id,u.value,f.target.value)},C=f=>{o(c.value.id,u.value,`${f}px`)};return Se(()=>{l.value.addEventListener("focus",j)}),Ae(()=>{l.value.removeEventListener("focus",j)}),(f,k)=>(p(),$("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsWidth",tabindex:"-1","data-automation-key":g.fieldKey},[O(ke,{tabs:h(Fe),"model-value":N.value,"onUpdate:modelValue":M},null,8,["tabs","model-value"]),N.value=="pick"||N.value=="css"?(p(),$("div",el,[N.value=="pick"?(p(),$("div",tl,[O(h(e),{ref_key:"pickerEl",ref:a,"model-value":y.value,options:E.value,"onUpdate:modelValue":V},null,8,["model-value","options"]),y.value=="fixed"?(p(),$("div",nl,[O(de,{ref_key:"fixedEl",ref:i,type:"number","model-value":_.value,invalid:n.error!==void 0,"onUpdate:modelValue":C},null,8,["model-value","invalid"]),k[0]||(k[0]=I("div",null,"px",-1))])):w("",!0)])):w("",!0),N.value=="css"?(p(),F(re,{key:1,ref_key:"freehandInputEl",ref:r,value:c.value.content[h(u)],onInput:B},null,8,["value"])):w("",!0)])):w("",!0)],8,Qo))}}),ll=z(ol,[["__scopeId","data-v-78cafd3f"]]),sl=["data-automation-key"],al={class:"tools"},il=["onClick"],rl={class:"toolName"},ul={class:"addToolForm"},dl=q({__name:"BuilderFieldsTools",props:{componentId:{},fieldKey:{}},setup(n){const e=ne({loader:()=>oe(()=>import("./BuilderGraphSelect-DV5Xy0HK.js"),__vite__mapDeps([4,0,1,5,6,7,8,9]),import.meta.url),loadingComponent:be}),t=ne(()=>oe(()=>import("./BuilderEmbeddedCodeEditor-CbK-r9w6.js").then(B=>B.a),__vite__mapDeps([2,0,1,3]),import.meta.url)),s=L(W.core),o=L(W.builderManager),{setContentValue:l}=te(s,o),r={isShown:!1,type:"function",name:"new_tool",code:`
{
	"description": "Gets info for an employee, given an employee id",
    "parameters": {
      "id": {"type": "string", "description": "Id of the employee"}
    }
}
`.trim(),graphIds:""},i=X(r),d=x(()=>{switch(i.value.type){case"function":return!i.value.code;case"graph":return!i.value.graphIds;default:return!0}}),m=x({get:()=>i.value.graphIds.split(","),set(B){i.value={...i.value,graphIds:B.join(",")}}}),g=n,{componentId:S,fieldKey:u}=le(g),c=x(()=>s.getComponentById(S.value)),E=x(()=>{let B={};try{B=JSON.parse(c.value.content[u.value])}catch{B={}}return B});function y(){i.value={...r,isShown:!0}}function v(){const{type:B,code:C,graphIds:f}=i.value;if(B=="function")return{...JSON.parse(C),type:B};if(B=="graph"){const k=f.split(",").map(b=>b.trim());return{type:B,graph_ids:k}}throw"Unexpected tool type."}function _(B){let C=[];const{originalName:f,name:k}=B;return k||C.push("The name cannot be empty."),Object.keys(E.value).includes(k)&&!(f||f==k)&&C.push("An existing tool with the specified name already exists."),C}function A(){const B=_(i.value);if(B.length>0){B.forEach(alert);return}let C;try{C=v()}catch{alert("Incorrect tool definition");return}const f=JSON.stringify({...E.value,...i.value.originalName?{[i.value.originalName]:void 0}:{},[i.value.name]:C});l(c.value.id,u.value,f),i.value.isShown=!1}function N(B,C){var k;const{type:f}=C;if(f=="function")return{isShown:!0,type:"function",originalName:B,name:B,graphIds:"",code:JSON.stringify(C,void 0,2)};if(f=="graph")return{isShown:!0,type:"graph",originalName:B,name:B,graphIds:(k=C.graph_ids)==null?void 0:k.join(","),code:""};throw"Unexpected tool type;"}function j(B){var f;const C=(f=E.value)==null?void 0:f[B];C&&(i.value=N(B,C))}function M(B){const C=JSON.stringify({...E.value,[B]:void 0});l(c.value.id,u.value,C)}const V=x(()=>[{desc:"cancel",fn:()=>i.value.isShown=!1},{desc:"Save",disabled:d.value,fn:A}]);return(B,C)=>(p(),$("div",{class:"BuilderFieldsTools colorTransformer","data-automation-key":g.fieldKey},[I("div",al,[(p(!0),$(Q,null,me(E.value,(f,k)=>(p(),$("div",{key:k,class:"tool",onClick:b=>j(k)},[I("div",rl,G(k),1),O(H,{variant:"primary",size:"small",class:"delete",onClick:$t(b=>M(k),["stop"])},{default:D(()=>C[4]||(C[4]=[I("i",{class:"material-symbols-outlined"},"delete",-1)])),_:2},1032,["onClick"])],8,il))),128))]),O(H,{size:"small",onClick:y},{default:D(()=>C[5]||(C[5]=[I("i",{class:"material-symbols-outlined"},"add",-1),ie(" Add tool")])),_:1}),i.value.isShown?(p(),F(Me,{key:0,actions:V.value,title:"Add tool","allow-overflow":""},{default:D(()=>[I("div",ul,[O(fe,{label:"Tool type"},{default:D(()=>[O(Mt,{modelValue:i.value.type,"onUpdate:modelValue":C[0]||(C[0]=f=>i.value.type=f)},{default:D(()=>C[6]||(C[6]=[I("option",{value:"function"},"Function",-1),I("option",{value:"graph"},"Knowledge graph",-1)])),_:1},8,["modelValue"])]),_:1}),O(fe,{label:"Tool name"},{default:D(()=>[O(de,{modelValue:i.value.name,"onUpdate:modelValue":C[1]||(C[1]=f=>i.value.name=f)},null,8,["modelValue"])]),_:1}),i.value.type=="function"?(p(),F(fe,{key:0,"frame-slot":!0,label:"Function tool definition"},{default:D(()=>[O(h(t),{modelValue:i.value.code,"onUpdate:modelValue":C[2]||(C[2]=f=>i.value.code=f),class:"addToolForm__codeEditor",variant:"minimal",language:"json"},null,8,["modelValue"])]),_:1})):w("",!0),i.value.type=="graph"?(p(),F(fe,{key:1,label:"Graph id(s)",hint:"Specify the id of the knowledge graph you want to use. If multiple, separate the ids using commas."},{default:D(()=>[O(h(e),{modelValue:m.value,"onUpdate:modelValue":C[3]||(C[3]=f=>m.value=f),"enable-multi-selection":""},null,8,["modelValue"])]),_:1})):w("",!0)])]),_:1},8,["actions"])):w("",!0)],8,sl))}}),cl=z(dl,[["__scopeId","data-v-1584a53c"]]),pl=q({__name:"BuilderFieldsCode",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0},isExpanded:{type:Boolean,required:!0}},setup(n){const e=ne({loader:()=>oe(()=>import("./BuilderEmbeddedCodeEditor-CbK-r9w6.js").then(m=>m.a),__vite__mapDeps([2,0,1,3]),import.meta.url),loadingComponent:be}),t=L(W.core),s=L(W.builderManager),{setContentValue:o}=te(t,s),l=n,{componentId:a,fieldKey:r}=le(l),i=x(()=>t.getComponentById(a.value)),d=X(i.value.content[r.value]);return $e(d,m=>{o(i.value.id,r.value,m)}),(m,g)=>(p(),F(h(e),{modelValue:d.value,"onUpdate:modelValue":g[0]||(g[0]=S=>d.value=S),language:"python",variant:n.isExpanded?"full":"minimal",class:"BuilderFieldsCode"},null,8,["modelValue","variant"]))}}),vl=z(pl,[["__scopeId","data-v-65363ed2"]]),fl=["data-automation-key"],ml=q({__name:"BuilderFieldsBlueprintKey",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(n){const e=ne(()=>oe(()=>import("./index-ChWW_c_j.js").then(u=>u.aZ),__vite__mapDeps([0,1]),import.meta.url)),t=L(W.core),s=L(W.builderManager),{setContentValue:o}=te(t,s),l=n,{componentId:a,fieldKey:r}=le(l),i=x(()=>t.getComponentById(a.value)),d=x({get:()=>{var u;return((u=i.value)==null?void 0:u.content[l.fieldKey])??""},set:u=>o(i.value.id,r.value,u)}),m=x(()=>{const u=new Set;for(const y of t.getComponents("blueprints_root"))y.content.key&&u.add(y.content.key);const c=[...u].sort((y,v)=>y.localeCompare(v)).map(y=>({value:y,label:y,icon:"linked_services"})),E=[{value:"",label:"(No blueprint)",icon:"block"},...c];if(!E.some(y=>y.value===d.value)){const y=d.value;E.push({value:y,label:y})}return E}),g=x(()=>{const u=t.getComponents("blueprints_root").find(c=>c.content.key===d.value);return u==null?void 0:u.id});function S(){g.value&&(s.setSelection(g.value,null,"click"),t.setActivePageId(g.value))}return(u,c)=>(p(),$("div",{class:"BuilderFieldsBlueprintKey","data-automation-key":l.fieldKey},[O(h(e),{modelValue:d.value,"onUpdate:modelValue":c[0]||(c[0]=E=>d.value=E),options:m.value},null,8,["modelValue","options"]),g.value?(p(),F(H,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the blueprint",onClick:S},{default:D(()=>c[1]||(c[1]=[I("i",{class:"material-symbols-outlined"},"jump_to_element",-1)])),_:1})):w("",!0)],8,fl))}}),yl=z(ml,[["__scopeId","data-v-86fc9518"]]),hl=["data-automation-key"],gl=q({__name:"BuilderFieldsHandler",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(n){const e=ne(()=>oe(()=>import("./index-ChWW_c_j.js").then(g=>g.aZ),__vite__mapDeps([0,1]),import.meta.url)),t=L(W.core),s=L(W.builderManager),{setContentValue:o}=te(t,s),l=n,{componentId:a,fieldKey:r}=le(l),i=x(()=>t.getComponentById(a.value)),d=x({get:()=>{var g;return((g=i.value)==null?void 0:g.content[l.fieldKey])??""},set:g=>o(i.value.id,r.value,g)}),m=x(()=>{const g=t.userFunctions.value.map(u=>u.name).sort((u,c)=>u.localeCompare(c)).map(u=>({value:u,label:u,icon:"function"})),S=[{value:"",label:"(No handler)",icon:"block"},...g];if(!S.some(u=>u.value===d.value)){const u=d.value;S.push({value:u,label:u})}return S});return(g,S)=>(p(),$("div",{class:"BuilderFieldsHandler","data-automation-key":l.fieldKey},[O(h(e),{modelValue:d.value,"onUpdate:modelValue":S[0]||(S[0]=u=>d.value=u),options:m.value},null,8,["modelValue","options"])],8,hl))}}),_l=["data-automation-key"],bl=["href","data-writer-tooltip"],kl=q({__name:"BuilderFieldsWriterResourceId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0},resourceType:{type:String,required:!0}},setup(n){const e=ne(()=>oe(()=>import("./BuilderApplicationSelect-CwzU4F1-.js"),__vite__mapDeps([10,0,1,5,6,7,8,11]),import.meta.url)),t=ne(()=>oe(()=>import("./BuilderGraphSelect-DV5Xy0HK.js"),__vite__mapDeps([4,0,1,5,6,7,8,9]),import.meta.url)),s=ne(()=>oe(()=>import("./BuilderModelSelect-ow0XEf2t.js"),__vite__mapDeps([12,0,1,5,6,7,8,13]),import.meta.url)),o=L(W.core),l=L(W.builderManager),{setContentValue:a}=te(o,l),r=n,{componentId:i,fieldKey:d}=le(r),m=x(()=>o.getComponentById(i.value)),g=Y("selectorEl"),S=x(()=>{switch(r.resourceType){case"model":return s;case"graph":return t;case"application":return e;default:throw new Error(`Unexpected resourceType: ${r.resourceType}`)}}),u=x(()=>{switch(r.resourceType){case"graph":return"Edit knowledge graph";case"application":return"Edit agent";case"model":return"About models";default:return}}),c=x(()=>{var _,A;if(!y.value)return;const v=(A=(_=g.value)==null?void 0:_.selectedData)==null?void 0:A.organization_id;if(v)switch(r.resourceType){case"graph":{const N=new URLSearchParams({graphId:y.value});return`https://app.writer.com/aistudio/organization/${v}/knowledge-graph?${N}`}case"application":return`https://app.writer.com/aistudio/organization/${v}/app/${y.value}`;case"model":return"https://dev.writer.com/home/models#model-overview";default:return}}),E=x(()=>{var _;const v=o.getComponentDefinition(m.value.type);return(_=v==null?void 0:v.fields)==null?void 0:_[r.fieldKey]}),y=x({get:()=>m.value.content[r.fieldKey]||E.value.default||"",set(v){a(m.value.id,d.value,String(v))}});return(v,_)=>(p(),$("div",{class:"BuilderFieldsWriterResourceId","data-automation-key":r.fieldKey},[(p(),F(At(S.value),{ref_key:"selectorEl",ref:g,modelValue:y.value,"onUpdate:modelValue":_[0]||(_[0]=A=>y.value=A)},null,8,["modelValue"])),c.value?(p(),$("a",{key:0,class:"BuilderFieldsWriterResourceId__link",href:c.value,target:"_blank","data-writer-tooltip":u.value},_[1]||(_[1]=[I("i",{class:"material-symbols-outlined"}," open_in_new ",-1)]),8,bl)):w("",!0)],8,_l))}}),je=z(kl,[["__scopeId","data-v-0954cb68"]]),Il=["data-automation-key"],Sl=q({__name:"BuilderFieldsComponentId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=ne(()=>oe(()=>import("./index-ChWW_c_j.js").then(E=>E.aZ),__vite__mapDeps([0,1]),import.meta.url)),t=L(W.core),s=L(W.builderManager),{setContentValue:o}=te(t,s),l=n,{componentId:a,fieldKey:r}=le(l),i=x(()=>t.getComponentById(a.value));function*d(){yield t.getComponentById("root"),yield*t.getComponentsNested("root")}const m=x(()=>{const E=[];for(const y of d()){const v=t.getComponentDefinition(y==null?void 0:y.type);if(!(v!=null&&v.events)||Object.keys(v.events).length===0)continue;const{name:_,previewText:A,possibleImageUrls:N}=Wt(t,y),j=N.value,M=y.id;E.push({value:M,label:A.value||_.value,detail:A.value?_.value:void 0,icon:j})}return E}),g=x({get:()=>i.value.content[l.fieldKey]??"",set(E){o(i.value.id,r.value,String(E))}}),S=x(()=>{let E=g.value;for(;E;){const y=t.getComponentById(E);if(y.type==="page")return y.id;E=y.parentId}}),u=x(()=>t.getComponentById(g.value));function c(){!g.value||!u.value||(S.value&&(s.mode.value="ui",t.setActivePageId(S.value)),s.setSelection(g.value,null,"click"))}return(E,y)=>(p(),$("div",{class:"BuilderFieldsComponentId","data-automation-key":l.fieldKey},[O(h(e),{modelValue:g.value,"onUpdate:modelValue":y[0]||(y[0]=v=>g.value=v),options:m.value,"enable-search":""},null,8,["modelValue","options"]),g.value?(p(),F(H,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the element",disabled:!u.value,onClick:c},{default:D(()=>y[1]||(y[1]=[I("i",{class:"material-symbols-outlined"},"jump_to_element",-1)])),_:1},8,["disabled"])):w("",!0)],8,Il))}}),El=z(Sl,[["__scopeId","data-v-f786fecb"]]),Cl=["data-automation-key"],xl=q({__name:"BuilderFieldsComponentEventType",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=ne(()=>oe(()=>import("./index-ChWW_c_j.js").then(S=>S.aZ),__vite__mapDeps([0,1]),import.meta.url)),t=L(W.core),s=L(W.builderManager),{setContentValue:o}=te(t,s),l=n,{componentId:a,fieldKey:r}=le(l),i=x(()=>t.getComponentById(a.value)),d=x(()=>{var S;return t.getComponentDefinition((S=i.value)==null?void 0:S.type)}),m=x(()=>{var y,v;const S=(v=Object.entries(((y=d.value)==null?void 0:y.fields)??{}).find(([,_])=>_.type===J.ComponentId))==null?void 0:v.at(0);if(S===void 0)return[];const u=i.value.content[String(S)],c=t.getComponentById(u),E=t.getComponentDefinition(c==null?void 0:c.type);return E!=null&&E.events?Object.keys(E.events).map(_=>({value:_,label:_})):[]}),g=x({get:()=>i.value.content[l.fieldKey]??"",set(S){o(i.value.id,r.value,String(S))}});return(S,u)=>(p(),$("div",{class:"BuilderFieldsComponentEventType","data-automation-key":l.fieldKey},[m.value.length?(p(),F(h(e),{key:0,modelValue:g.value,"onUpdate:modelValue":u[0]||(u[0]=c=>g.value=c),options:m.value,"hide-icons":""},null,8,["modelValue","options"])):(p(),F(de,{key:1,modelValue:g.value,"onUpdate:modelValue":u[1]||(u[1]=c=>g.value=c)},null,8,["modelValue"]))],8,Cl))}});function wl(n,e){const{getEvaluatedFields:t}=at(n),s=x(()=>{var r;const l=(r=e.value.at(-1))==null?void 0:r.componentId;if(l===void 0)return{};const a=n.getComponentById(l);return a?n.getComponentDefinition(a.type).fields??{}:{}}),o=x(()=>t(e.value));return x(()=>Object.entries(s.value).reduce((l,[a,r])=>{const i=o.value[a].value;return l[a]=Bl(r,i),l},{}))}function Bl(n,e){let t=n.validator;if(t===void 0&&typeof n.options=="object"&&n.options!==null&&Object.keys(n.options).length>0&&(t=Ft(Object.keys(n.options))),t===void 0)return;const s=Tt(t);if(!(s(e)||s.errors===void 0))return Ml(s.errors)}function $l(n){var t;if(n.keyword==="format"&&Object.values(Vt).includes(n.params.format))return Ot[n.params.format].errorMessage;let e="";return n.instancePath&&(e+=`${n.instancePath} `),e+=n.message,Array.isArray((t=n.params)==null?void 0:t.allowedValues)&&(e+=`: ${n.params.allowedValues.join(", ")}`),e}function Ml(n){return n.map($l).join(`
`)}const Al={key:0,class:"BuilderSettingsProperties"},Fl={key:0,class:"BuilderSettingsProperties__category__title"},Tl=q({__name:"BuilderSettingsProperties",setup(n){const e=L(W.core),t=L(W.builderManager),s=X(new Set),o=x(()=>{var c,E;return Lt((E=(c=t.firstSelectedItem)==null?void 0:c.value)==null?void 0:E.instancePath)}),l=x(()=>e.getComponentById(t.firstSelectedId.value)),a=x(()=>{const{type:c}=l.value;return e.getComponentDefinition(c)}),r=x(()=>{var c;return(c=a.value)==null?void 0:c.fields});function i(c){return c.type===J.Code||c.type===J.Object||c.control===De.Textarea}const d=wl(e,o),m=x(()=>[ve.General,ve.Style,ve.Tools].filter(c=>{var E;return(E=g.value[c])==null?void 0:E.length})),g=x(()=>{const c=Object.entries(r.value);return{[ve.General]:c.filter(([y,v])=>!v.category||v.category==ve.General),[ve.Style]:c.filter(([y,v])=>v.category==ve.Style),[ve.Tools]:c.filter(([y,v])=>v.category==ve.Tools)}});function S(c){s.value.add(c)}function u(c){s.value.delete(c)}return(c,E)=>h(t).isSingleSelectionActive&&r.value?(p(),$("div",Al,[(p(!0),$(Q,null,me(m.value,y=>(p(),$("div",{key:y,class:"BuilderSettingsProperties__category"},[g.value[y].length>0&&y!=="General"?(p(),$("h4",Fl,G(y),1)):w("",!0),(p(!0),$(Q,null,me(g.value[y],([v,_])=>(p(),$("div",{key:v,class:"BuilderSettingsProperties__category__field"},[O(fe,{label:y==="Tools"?void 0:_.name??v,hint:_.desc,unit:_.type,error:h(d)[v],"is-expansible":i(_),onExpand:A=>S(v),onShrink:A=>u(v)},{default:D(()=>[_.type==h(J).Color?(p(),F(Qn,{key:0,"field-key":v,"component-id":l.value.id,error:h(d)[v]},null,8,["field-key","component-id","error"])):w("",!0),_.type==h(J).Shadow?(p(),F(Ho,{key:1,"field-key":v,"component-id":l.value.id,error:h(d)[v]},null,8,["field-key","component-id","error"])):w("",!0),_.type==h(J).KeyValue?(p(),F(So,{key:2,"field-key":v,"component-id":l.value.id,"instance-path":o.value,error:h(d)[v]},null,8,["field-key","component-id","instance-path","error"])):w("",!0),_.type==h(J).Text||_.type==h(J).Boolean?(p(),F(We,{key:3,"field-key":v,"component-id":l.value.id,error:h(d)[v]},null,8,["field-key","component-id","error"])):w("",!0),_.type==h(J).BlueprintKey?(p(),F(yl,{key:4,"field-key":v,"component-id":l.value.id},null,8,["field-key","component-id"])):w("",!0),_.type==h(J).Handler?(p(),F(gl,{key:5,"field-key":v,"component-id":l.value.id},null,8,["field-key","component-id"])):w("",!0),_.type==h(J).Number?(p(),F(We,{key:6,"field-key":v,"component-id":l.value.id,error:h(d)[v]},null,8,["field-key","component-id","error"])):w("",!0),_.type==h(J).IdKey?(p(),F(We,{key:7,"field-key":v,"component-id":l.value.id,error:h(d)[v]},null,8,["field-key","component-id","error"])):w("",!0),_.type==h(J).Object?(p(),F(Co,{key:8,"field-key":v,"component-id":l.value.id,error:h(d)[v]},null,8,["field-key","component-id","error"])):w("",!0),_.type==h(J).Width?(p(),F(ll,{key:9,"field-key":v,"component-id":l.value.id,error:h(d)[v]},null,8,["field-key","component-id","error"])):w("",!0),_.type==h(J).HAlign?(p(),F(lt,{key:10,direction:"horizontal","field-key":v,"component-id":l.value.id,error:h(d)[v]},null,8,["field-key","component-id","error"])):w("",!0),_.type==h(J).VAlign?(p(),F(lt,{key:11,direction:"vertical","field-key":v,"component-id":l.value.id,error:h(d)[v]},null,8,["field-key","component-id","error"])):w("",!0),_.type==h(J).Padding?(p(),F(Ao,{key:12,"field-key":v,"component-id":l.value.id,error:h(d)[v]},null,8,["field-key","component-id","error"])):w("",!0),_.type==h(J).Tools?(p(),F(cl,{key:13,"field-key":v,"component-id":l.value.id},null,8,["field-key","component-id"])):w("",!0),_.type==h(J).Code?(p(),F(vl,{key:14,"field-key":v,"component-id":l.value.id,"is-expanded":s.value.has(v)},null,8,["field-key","component-id","is-expanded"])):w("",!0),_.type==h(J).WriterGraphId?(p(),F(je,{key:15,"field-key":v,"component-id":l.value.id,error:h(d)[v],"resource-type":"graph"},null,8,["field-key","component-id","error"])):w("",!0),_.type==h(J).WriterAppId?(p(),F(je,{key:16,"field-key":v,"component-id":l.value.id,error:h(d)[v],"resource-type":"application"},null,8,["field-key","component-id","error"])):w("",!0),_.type==h(J).WriterModelId?(p(),F(je,{key:17,"field-key":v,"component-id":l.value.id,error:h(d)[v],"resource-type":"model"},null,8,["field-key","component-id","error"])):w("",!0),_.type==h(J).ComponentId?(p(),F(El,{key:18,"field-key":v,"component-id":l.value.id,error:h(d)[v]},null,8,["field-key","component-id","error"])):w("",!0),_.type==h(J).ComponentEventType?(p(),F(xl,{key:19,"field-key":v,"component-id":l.value.id,error:h(d)[v]},null,8,["field-key","component-id","error"])):w("",!0)]),_:2},1032,["label","hint","unit","error","is-expansible","onExpand","onShrink"])]))),128))]))),128))])):w("",!0)}}),Vl=z(Tl,[["__scopeId","data-v-656736de"]]),Ol={class:"BuilderSectionTitle"},Rl={class:"material-symbols-outlined"},Pl=q({__name:"BuilderSectionTitle",props:{icon:{type:String,required:!0},label:{type:String,required:!0}},setup(n){return(e,t)=>(p(),$("div",Ol,[I("i",Rl,G(n.icon),1),I("h3",null,G(n.label),1)]))}}),yt=z(Pl,[["__scopeId","data-v-731e03f5"]]),Ll={key:0,class:"BuilderSettingsBinding"},Wl={class:"main"},jl='Links this component to a state element, in a two-way fashion. Reference the state element directly, i.e. use "my_var" instead of "@{my_var}".',Dl=q({__name:"BuilderSettingsBinding",setup(n){const e=L(W.core),t=L(W.builderManager),{setBinding:s}=te(e,t),o=x(()=>e.getComponentById(t.firstSelectedId.value));return(l,a)=>h(t).isSingleSelectionActive?(p(),$("div",Ll,[O(yt,{icon:"link",label:"Binding"}),I("div",Wl,[O(fe,{label:"State element",hint:jl},{default:D(()=>{var r;return[O(re,{type:"state",value:(r=o.value.binding)==null?void 0:r.stateRef,placeholder:"my_var",onInput:a[0]||(a[0]=i=>h(s)(o.value.id,i.target.value))},null,8,["value"])]}),_:1})])])):w("",!0)}}),Nl=z(Dl,[["__scopeId","data-v-51a930b8"]]),Kl={key:0,class:"BuilderSettingsVisibility"},Ul={class:"main"},ql={class:"flexRow"},zl=["checked"],Jl='Reference a state or context element that will evaluate to true or false. Reference the element directly, i.e. use "my_var" instead of "@{my_var}".',Yl=q({__name:"BuilderSettingsVisibility",setup(n){const e=[{label:"Yes",value:"yes"},{label:"No",value:"no"},{label:"Custom",value:"custom"}],t=x({get(){const r=a.value.visible;return(r==null?void 0:r.expression)==="custom"?"custom":r===void 0||r.expression===!0?"yes":"no"},set(r){var i,d;r==="custom"?l(a.value.id,"custom",(i=a.value.visible)==null?void 0:i.binding,(d=a.value.visible)==null?void 0:d.reversed):l(a.value.id,r==="yes")}}),s=L(W.core),o=L(W.builderManager),{setVisibleValue:l}=te(s,o),a=x(()=>s.getComponentById(o.firstSelectedId.value));return(r,i)=>h(o).isSingleSelectionActive?(p(),$("div",Kl,[O(yt,{icon:"visibility",label:"Visibility"}),I("div",Ul,[O(ke,{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=d=>t.value=d),tabs:e},null,8,["modelValue"]),typeof a.value.visible<"u"&&a.value.visible.expression==="custom"?(p(),F(fe,{key:0,hint:Jl},{default:D(()=>[O(re,{value:a.value.visible.binding,type:"state",placeholder:"my_visibility_state_value",onInput:i[1]||(i[1]=d=>h(l)(a.value.id,"custom",d.target.value,a.value.visible.reversed))},null,8,["value"]),I("div",ql,[I("input",{type:"checkbox",checked:a.value.visible.reversed,onInput:i[2]||(i[2]=d=>h(l)(a.value.id,"custom",a.value.visible.binding,d.target.checked))},null,40,zl),i[3]||(i[3]=I("span",null,"Reverse",-1))])]),_:1})):w("",!0)])])):w("",!0)}}),Gl=z(Yl,[["__scopeId","data-v-23772341"]]),Hl=["data-writer-tooltip"],Xl=q({__name:"BuilderCopyText",setup(n){const e=X("Copy to clipboard");function t(s){const o=s.target.textContent;navigator.clipboard.writeText(o),e.value="Copied!",setTimeout(()=>{e.value="Copy to clipboard"},1e3)}return(s,o)=>(p(),$("span",{class:"BuilderCopyText","data-writer-tooltip":e.value,onClick:t},[Re(s.$slots,"default",{},void 0,!0)],8,Hl))}}),Zl=z(Xl,[["__scopeId","data-v-46ba30f4"]]),Ql={key:0,class:"BuilderSettingsAPICode"},es={class:"modalContents"},ts={class:"codeContainer"},ns={class:"codeContainer"},os={key:1},ls=q({__name:"BuilderSettingsAPICode",setup(n){const e=L(W.core),t=L(W.builderManager),s=x(()=>e.getComponentById(t.firstSelectedId.value)),o=x(()=>{var S;return((S=s.value)==null?void 0:S.type)==="blueprints_blueprint"}),l=x(()=>{var S;if(o.value)return(S=s.value.content)==null?void 0:S.key}),a=X(!1),r=X(""),i=X(""),d=X(!1);function m(){g(),a.value=!0}async function g(){const S=await e.hashMessage(`create_job_${l.value}`);if(d.value=!!S,!d.value)return;const u=window.location.origin+window.location.pathname;r.value=`
curl --location --request POST '${u}api/job/blueprint/${l.value}' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer ${S}' \\
--data '{
    "my_var": 1
}'`.trim(),i.value=`
curl --location '${u}api/job/JOB_ID' \\
--header 'Authorization: Bearer JOB_TOKEN'`.trim()}return(S,u)=>o.value?(p(),$("div",Ql,[a.value?(p(),F(Me,{key:0,title:"API Code","display-close-button":"",hint:d.value?"Note: For API calls to work, the --enable-jobs-api flag must be active.":void 0,onClose:u[2]||(u[2]=c=>a.value=!1)},{default:D(()=>[I("div",es,[d.value?(p(),$(Q,{key:0},[u[3]||(u[3]=I("p",null," The following call will create the job and provide you with a job ID and a job token. ",-1)),I("div",ts,[O(Ze,{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=c=>r.value=c),class:"editor",variant:"minimal",language:"shell"},null,8,["modelValue"])]),u[4]||(u[4]=I("p",null," Using the job ID and token obtained in the previous call, check the status of the job. You can use the code below, after replacing JOB_ID and JOB_TOKEN for the right values. ",-1)),I("div",ns,[O(Ze,{modelValue:i.value,"onUpdate:modelValue":u[1]||(u[1]=c=>i.value=c),class:"editor",variant:"minimal",language:"shell"},null,8,["modelValue"])])],64)):(p(),$("p",os," API code cannot be generated. Please make sure the environment variable WRITER_SECRET_KEY has been set up. "))])]),_:1},8,["hint"])):w("",!0),l.value?(p(),F(H,{key:1,variant:"tertiary",size:"small",onClick:m},{default:D(()=>u[5]||(u[5]=[I("i",{class:"material-symbols-outlined"}," code ",-1),ie(" Call via API")])),_:1})):(p(),F(H,{key:2,disabled:!0,variant:"tertiary",size:"small","data-writer-tooltip":`You need to specify a blueprint key before this blueprint can be
				used in the UI or called via API.`},{default:D(()=>u[6]||(u[6]=[I("i",{class:"material-symbols-outlined"}," code ",-1),ie(" Call via API")])),_:1}))])):w("",!0)}}),ss=z(ls,[["__scopeId","data-v-260b939f"]]),as={class:"BuilderSettingsMain"},is={key:0,class:"BuilderSettingsMain__description"},rs={key:1,class:"warning cmc-warning"},us=["inert"],ds={class:"sections debug"},cs=q({__name:"BuilderSettingsMain",setup(n){const e=ne({loader:()=>oe(()=>import("./BuilderSettingsHandlers-j1aMAV4J.js"),__vite__mapDeps([14,0,1,6,7,8,15,16]),import.meta.url),loadingComponent:be}),t=L(W.core),s=L(W.builderManager),o=x(()=>t.getComponentById(s.firstSelectedId.value)),l=x(()=>o.value.isCodeManaged),a=x(()=>s.isSingleSelectionActive.value?!r.value.toolkit||r.value.toolkit=="core":!1),r=x(()=>{const{type:d}=o.value;return t.getComponentDefinition(d)});$e(o,d=>{d||s.setSelection(null)});const i=x(()=>{var d;return Object.values(((d=r.value)==null?void 0:d.events)??{}).some(m=>m.bindable)});return(d,m)=>(p(),$("div",as,[r.value.description?(p(),$("p",is,G(r.value.description),1)):w("",!0),l.value?(p(),$("p",rs,m[0]||(m[0]=[I("i",{class:"material-symbols-outlined"},"warning",-1),I("span",null," This component is instantiated in code. All settings in this panel are read-only and cannot be edited. ",-1)]))):w("",!0),I("div",{class:"sections",inert:l.value},[O(Vl),a.value?(p(),$(Q,{key:0},[i.value?(p(),F(Nl,{key:0})):w("",!0),O(h(e)),O(Gl)],64)):w("",!0),O(ss,null,{default:D(()=>m[1]||(m[1]=[ie("Execute via API")])),_:1})],8,us),I("div",ds,[I("p",null,[m[2]||(m[2]=ie(" Component id: ")),O(Zl,null,{default:D(()=>[ie(G(h(s).firstSelectedId.value),1)]),_:1})])])]))}}),ps=z(cs,[["__scopeId","data-v-4d40aa9a"]]),vs={key:0,class:"collapser"},fs={key:1,class:"titleBar"},ms=["data-writer-tooltip"],ys=q({__name:"BuilderSettings",setup(n){Rt(d=>({"56a3fa32":h(t).getMode()=="blueprints"?"82px":"20px"}));const e=L(W.core),t=L(W.builderManager),s=X(!1),o=x(()=>e.getComponentById(t.firstSelectedId.value)),l=x(()=>t.selectionStatus.value===Oe.Multiple?!0:t.isSettingsBarCollapsed.value),a=x(()=>t.selection.value.length);function r(){t.isSettingsBarCollapsed.value=!t.isSettingsBarCollapsed.value}const i=x(()=>{const{type:d}=o.value;return e.getComponentDefinition(d)});return $e(o,d=>{d||t.setSelection(null)}),(d,m)=>h(t).selectionStatus.value!==h(Oe).None?(p(),$("div",{key:0,class:Ye(["BuilderSettings",{"BuilderSettings--collapsed":l.value,"BuilderSettings--miniDocActive":s.value}])},[h(t).isSingleSelectionActive.value?(p(),$("div",vs,[l.value?(p(),F(H,{key:0,class:"collapserButton",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Expand settings","data-automation-action":"expand-settings",onClick:r},{default:D(()=>m[0]||(m[0]=[I("i",{class:"material-symbols-outlined"},"settings",-1)])),_:1})):(p(),F(H,{key:1,class:"collapserButton",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Collapse settings","data-automation-action":"collapse-settings",onClick:r},{default:D(()=>m[1]||(m[1]=[I("i",{class:"material-symbols-outlined"},"double_arrow",-1)])),_:1}))])):w("",!0),h(t).isSingleSelectionActive?(p(),$("div",fs,[I("div",null,G(i.value.name),1)])):w("",!0),h(t).selectionStatus.value===h(Oe).Multiple?(p(),$("div",{key:2,class:"BuilderSettings__selectionCount","data-writer-tooltip-placement":"left","data-writer-tooltip":`${a.value} components selected`},[I("p",null,G(a.value),1)],8,ms)):w("",!0),O(Ut,{class:"actions"}),O(ps,{inert:l.value,class:"main"},null,8,["inert"])],2)):w("",!0)}}),Ss=z(ys,[["__scopeId","data-v-6524c627"]]);export{Ss as default};
