
import numpy as np
from numpy import nan

add_legend_handle = [
    'ATLAS Data',
    'Theory [TYPE=BSM]',
    'SM as BG [TYPE=BSM]'
]

xpoints = {
    'ATLAS Data' : [220.0, 270.0, 340.0, 425.0, 520.0, 620.0, 730.0, 850.0, 975.0, 1110.0, 1890.0],
    'Theory [TYPE=BSM]' : [220.0, 270.0, 340.0, 425.0, 520.0, 620.0, 730.0, 850.0, 975.0, 1110.0, 1890.0],
    'SM as BG [TYPE=BSM]' : [220.0, 270.0, 340.0, 425.0, 520.0, 620.0, 730.0, 850.0, 975.0, 1110.0, 1890.0],
}
xedges = {
    'ATLAS Data' : [200.0, 240.0, 300.0, 380.0, 470.0, 570.0, 670.0, 790.0, 910.0, 1040.0, 1180.0, 2600.0],
    'Theory [TYPE=BSM]' : [200.0, 240.0, 300.0, 380.0, 470.0, 570.0, 670.0, 790.0, 910.0, 1040.0, 1180.0, 2600.0],
    'SM as BG [TYPE=BSM]' : [200.0, 240.0, 300.0, 380.0, 470.0, 570.0, 670.0, 790.0, 910.0, 1040.0, 1180.0, 2600.0],
}
ref_xerrs = [
  [abs(xpoints['ATLAS Data'][i]   - xedges['ATLAS Data'][i]) for i in range(len(xpoints['ATLAS Data']))],
  [abs(xedges['ATLAS Data'][i+1] - xpoints['ATLAS Data'][i]) for i in range(len(xpoints['ATLAS Data']))]
]

yvals = {
    'ATLAS Data' : [12.599, 11.146, 10.015, 8.9103, 7.9893, 7.7512, 7.7258, 6.4989, 6.9653, 9.0824, 7.0785],
    'Theory [TYPE=BSM]' : [12.616, 11.375, 10.078, 8.9427, 8.1589, 7.7361, 7.4245, 7.1395, 6.9657, 6.7255, 6.4266],
    'SM as BG [TYPE=BSM]' : [12.61635, 11.37573, 10.07838, 8.942855, 8.158596, 7.733841, 7.421749, 7.141782, 6.962929, 6.720881, 6.436758],
}
xerrs = {
    'ATLAS Data' : [
        [20.0, 30.0, 40.0, 45.0, 50.0, 50.0, 60.0, 60.0, 65.0, 70.0, 710.0],
        [20.0, 30.0, 40.0, 45.0, 50.0, 50.0, 60.0, 60.0, 65.0, 70.0, 710.0],
    ],
    'Theory [TYPE=BSM]' : [
        [20.0, 30.0, 40.0, 45.0, 50.0, 50.0, 60.0, 60.0, 65.0, 70.0, 710.0],
        [20.0, 30.0, 40.0, 45.0, 50.0, 50.0, 60.0, 60.0, 65.0, 70.0, 710.0],
    ],
    'SM as BG [TYPE=BSM]' : [
        [20.0, 30.0, 40.0, 45.0, 50.0, 50.0, 60.0, 60.0, 65.0, 70.0, 710.0],
        [20.0, 30.0, 40.0, 45.0, 50.0, 50.0, 60.0, 60.0, 65.0, 70.0, 710.0],
    ],
}
yerrs = {
    'ATLAS Data' : [
        [0.29081265439554077, 0.2460195790860361, 0.18684556696933277, 0.16503842387114662, 0.19127429290568007, 0.2741601020379358, 0.3948703325867928, 0.48324321263714864, 0.885874947812352, 1.946128945268073, 2.2980823513932798],
        [0.29081265439554077, 0.2460195790860361, 0.18684556696933277, 0.16503842387114662, 0.19127429290568007, 0.2741601020379358, 0.3948703325867928, 0.48324321263714864, 0.885874947812352, 1.946128945268073, 2.2980823513932798],
    ],
    'Theory [TYPE=BSM]' : [
        [0.2716615, 0.1859472, 0.1583896, 0.1723449, 0.1835077, 0.1934432, 0.2003716, 0.2248558, 0.2642577, 0.2794794, 0.2852885],
        [0.2716615, 0.1859472, 0.1583896, 0.1723449, 0.1835077, 0.1934432, 0.2003716, 0.2248558, 0.2642577, 0.2794794, 0.2852885],
    ],
    'SM as BG [TYPE=BSM]' : [
        [0.27166158414026503, 0.1859473084114121, 0.1583896514328773, 0.17234460983194955, 0.1835064777464477, 0.19343439900249038, 0.2003544965841103, 0.22479003377560206, 0.26410792982221015, 0.27907032054054237, 0.28480879755137284],
        [0.27166158414026503, 0.1859473084114121, 0.1583896514328773, 0.17234460983194955, 0.1835064777464477, 0.19343439900249038, 0.2003544965841103, 0.22479003377560206, 0.26410792982221015, 0.27907032054054237, 0.28480879755137284],
    ],
}
variation_yvals = {
}


# lists for ratio plot
ratio0_yvals = {
    'ATLAS Data' : [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
    'Theory [TYPE=BSM]' : [0.058456878485340535, 0.9308202251655551, 0.3371768515671507, 0.1963179194276425, 0.8866847573899077, -0.05507730660936961, -0.7630352931965925, 1.3256264821685253, 0.0004515309988026491, -1.2110708315246521, -0.2836712964636654],
    'SM as BG [TYPE=BSM]' : [0.05966040245415971, 0.9337874686780947, 0.3392106167035866, 0.19725709465946897, 0.8850954167870397, -0.06331701757828323, -0.7700021371779525, 1.3303487419754387, -0.0026764499954031362, -1.2134442611019836, -0.2792510893314702],
}
ratio0_yerrs = {
    'ATLAS Data' : [
        [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0],
        [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0],
    ],
    'Theory [TYPE=BSM]' : [
        [0.9341460761556378, 0.7558227710607209, 0.8477032801425612, 1.044271363949512, 0.9593955215429295, 0.7055847972117879, 0.507436450561801, 0.4653056558682321, 0.29830135805575986, 0.1436078532614922, 0.12414198291329094],
        [0.9341460761556378, 0.7558227710607209, 0.8477032801425612, 1.044271363949512, 0.9593955215429295, 0.7055847972117879, 0.507436450561801, 0.4653056558682321, 0.29830135805575986, 0.1436078532614922, 0.12414198291329094],
    ],
    'SM as BG [TYPE=BSM]' : [
        [0.9341463654837112, 0.7558232117224459, 0.8477035554120159, 1.044269605764699, 0.9593891314863583, 0.7055526955403769, 0.5073931365559661, 0.46516956244223434, 0.29813229336083913, 0.14339765164024182, 0.1239332425918937],
        [0.9341463654837112, 0.7558232117224459, 0.8477035554120159, 1.044269605764699, 0.9593891314863583, 0.7055526955403769, 0.5073931365559661, 0.46516956244223434, 0.29813229336083913, 0.14339765164024182, 0.1239332425918937],
    ],
}
ratio0_variation_vals = {
}
ratio_band_edges = {
    'ratio0_ATLAS Data_1sigma-band_dn' : [-1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0],
    'ratio0_ATLAS Data_1sigma-band_up' : [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0],
    'ratio0_Theory [TYPE=BSM]_1sigma-band_dn' : [-0.8756891976702973, -0.8756891976702973, 0.17499745410483405, -0.5105264285754105, -0.8479534445218696, -0.07271076415302179, -0.7606621038211575, -1.2704717437583934, 0.8603208263002933, -0.29784982705695723, -1.3546786847861445, -0.4078132793769564],
    'ratio0_Theory [TYPE=BSM]_1sigma-band_up' : [0.9926029546409784, 0.9926029546409784, 1.686642996226276, 1.184880131709712, 1.2405892833771546, 1.8460802789328372, 0.6505074906024183, -0.2555988426347915, 1.7909321380367575, 0.2987528890545625, -1.06746297826316, -0.15952931355037447],
    'ratio0_SM as BG [TYPE=BSM]_1sigma-band_dn' : [-0.8744859630295515, -0.8744859630295515, 0.17796425695564877, -0.5084929387084293, -0.8470125111052299, -0.07429371469931854, -0.7688697131186601, -1.2773952737339187, 0.8651791795332046, -0.30080874335624225, -1.3568419127422255, -0.4031843319233639],
    'ratio0_SM as BG [TYPE=BSM]_1sigma-band_up' : [0.9938067679378709, 0.9938067679378709, 1.6896106804005406, 1.1869141721156025, 1.241526700424168, 1.844484548273398, 0.6422356779620937, -0.2626090006219865, 1.795518304417673, 0.29545584336543596, -1.0700466094617418, -0.1553178467395765],
}