
import numpy as np
from numpy import nan

add_legend_handle = [
    'ATLAS Data',
    'Theory [TYPE=BSM]',
    'SM as BG [TYPE=BSM]'
]

xpoints = {
    'ATLAS Data' : [235.0, 325.0, 445.0, 585.0, 750.0, 940.0, 1155.0, 1395.0, 1665.0, 2010.0, 2450.0, 2950.0, 3490.0, 5985.0],
    'Theory [TYPE=BSM]' : [235.0, 325.0, 445.0, 585.0, 750.0, 940.0, 1155.0, 1395.0, 1665.0, 2010.0, 2450.0, 2950.0, 3490.0, 5985.0],
    'SM as BG [TYPE=BSM]' : [235.0, 325.0, 445.0, 585.0, 750.0, 940.0, 1155.0, 1395.0, 1665.0, 2010.0, 2450.0, 2950.0, 3490.0, 5985.0],
}
xedges = {
    'ATLAS Data' : [200.0, 270.0, 380.0, 510.0, 660.0, 840.0, 1040.0, 1270.0, 1520.0, 1810.0, 2210.0, 2690.0, 3210.0, 3770.0, 8200.0],
    'Theory [TYPE=BSM]' : [200.0, 270.0, 380.0, 510.0, 660.0, 840.0, 1040.0, 1270.0, 1520.0, 1810.0, 2210.0, 2690.0, 3210.0, 3770.0, 8200.0],
    'SM as BG [TYPE=BSM]' : [200.0, 270.0, 380.0, 510.0, 660.0, 840.0, 1040.0, 1270.0, 1520.0, 1810.0, 2210.0, 2690.0, 3210.0, 3770.0, 8200.0],
}
ref_xerrs = [
  [abs(xpoints['ATLAS Data'][i]   - xedges['ATLAS Data'][i]) for i in range(len(xpoints['ATLAS Data']))],
  [abs(xedges['ATLAS Data'][i+1] - xpoints['ATLAS Data'][i]) for i in range(len(xpoints['ATLAS Data']))]
]

yvals = {
    'ATLAS Data' : [11.033, 9.8187, 6.455, 3.7728, 2.0961, 1.1135, 0.57652, 0.30379, 0.1543, 0.074925, 0.034051, 0.014723, 0.0061038, 0.00063306],
    'Theory [TYPE=BSM]' : [9.2372, 8.3736, 5.7839, 3.5194, 2.0194, 1.128, 0.62107, 0.34048, 0.18335, 0.08927, 0.038544, 0.01566, 0.0059526, 0.00046931],
    'SM as BG [TYPE=BSM]' : [9.2372, 8.373622930749999, 5.78391940294, 3.51941681588, 2.01942802647, 1.128, 0.62107, 0.34048, 0.18335, 0.089276305956, 0.038544, 0.01566, 0.0059526, 0.0004698793865],
}
xerrs = {
    'ATLAS Data' : [
        [35.0, 55.0, 65.0, 75.0, 90.0, 100.0, 115.0, 125.0, 145.0, 200.0, 240.0, 260.0, 280.0, 2215.0],
        [35.0, 55.0, 65.0, 75.0, 90.0, 100.0, 115.0, 125.0, 145.0, 200.0, 240.0, 260.0, 280.0, 2215.0],
    ],
    'Theory [TYPE=BSM]' : [
        [35.0, 55.0, 65.0, 75.0, 90.0, 100.0, 115.0, 125.0, 145.0, 200.0, 240.0, 260.0, 280.0, 2215.0],
        [35.0, 55.0, 65.0, 75.0, 90.0, 100.0, 115.0, 125.0, 145.0, 200.0, 240.0, 260.0, 280.0, 2215.0],
    ],
    'SM as BG [TYPE=BSM]' : [
        [35.0, 55.0, 65.0, 75.0, 90.0, 100.0, 115.0, 125.0, 145.0, 200.0, 240.0, 260.0, 280.0, 2215.0],
        [35.0, 55.0, 65.0, 75.0, 90.0, 100.0, 115.0, 125.0, 145.0, 200.0, 240.0, 260.0, 280.0, 2215.0],
    ],
}
yerrs = {
    'ATLAS Data' : [
        [0.718236886346573, 0.5642547607793198, 0.38904341305668716, 0.17754829133275266, 0.09282737797675318, 0.04961281161098985, 0.02543729035057441, 0.016607726839854384, 0.009653535009487764, 0.005987679358121475, 0.00249830804388239, 0.0010329572186242922, 0.0004777642070758928, 7.61647318817723e-05],
        [0.718236886346573, 0.5642547607793198, 0.38904341305668716, 0.17754829133275266, 0.09282737797675318, 0.04961281161098985, 0.02543729035057441, 0.016607726839854384, 0.009653535009487764, 0.005987679358121475, 0.00249830804388239, 0.0010329572186242922, 0.0004777642070758928, 7.61647318817723e-05],
    ],
    'Theory [TYPE=BSM]' : [
        [1.930585, 1.786408, 1.274575, 0.7983424, 0.461845, 0.2584804, 0.1401754, 0.0746216, 0.03872971, 0.01818112, 0.007473638, 0.002907161, 0.001068138, 8.981893e-05],
        [1.930585, 1.786408, 1.274575, 0.7983424, 0.461845, 0.2584804, 0.1401754, 0.0746216, 0.03872971, 0.01818112, 0.007473638, 0.002907161, 0.001068138, 8.981893e-05],
    ],
    'SM as BG [TYPE=BSM]' : [
        [1.930585, 1.7864080001471723, 1.274575000147686, 0.7983424001771006, 0.4618450004251877, 0.2584804, 0.1401754, 0.0746216, 0.03872971, 0.01818112109358169, 0.007473638, 0.002907161, 0.001068138, 8.982073472941135e-05],
        [1.930585, 1.7864080001471723, 1.274575000147686, 0.7983424001771006, 0.4618450004251877, 0.2584804, 0.1401754, 0.0746216, 0.03872971, 0.01818112109358169, 0.007473638, 0.002907161, 0.001068138, 8.982073472941135e-05],
    ],
}
variation_yvals = {
}


# lists for ratio plot
ratio0_yvals = {
    'ATLAS Data' : [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
    'Theory [TYPE=BSM]' : [-2.500289297497131, -2.561077194996285, -1.7250002891122453, -1.427217339563633, -0.8262648549569912, 0.292263218494717, 1.7513657856641156, 2.209212636611604, 3.0092603353537193, 2.395752868854433, 1.7984171371508884, 0.9071043631873843, -0.3164741053445691, -2.149945203695892],
    'SM as BG [TYPE=BSM]' : [-2.500289297497131, -2.5610365559949098, -1.7249504156550721, -1.427122627979118, -0.8259629346549128, 0.292263218494717, 1.7513657856641156, 2.209212636611604, 3.0092603353537193, 2.396806024112563, 1.7984171371508884, 0.9071043631873843, -0.3164741053445691, -2.142469479880783],
}
ratio0_yerrs = {
    'ATLAS Data' : [
        [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0],
        [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0],
    ],
    'Theory [TYPE=BSM]' : [
        [2.687950224639993, 3.1659599956812143, 3.2761767895920726, 4.496480332236959, 4.975310194753752, 5.209952663572556, 5.510626252565248, 4.493185655060683, 4.011971776342589, 3.0364217775522286, 2.991479781006472, 2.8144060059639258, 2.235701176815714, 1.1792719252189139],
        [2.687950224639993, 3.1659599956812143, 3.2761767895920726, 4.496480332236959, 4.975310194753752, 5.209952663572556, 5.510626252565248, 4.493185655060683, 4.011971776342589, 3.0364217775522286, 2.991479781006472, 2.8144060059639258, 2.235701176815714, 1.1792719252189139],
    ],
    'SM as BG [TYPE=BSM]' : [
        [2.687950224639993, 3.1659599959420404, 3.2761767899716863, 4.496480333234437, 4.975310199334165, 5.209952663572556, 5.510626252565248, 4.493185655060683, 4.011971776342589, 3.0364219601908813, 2.991479781006472, 2.8144060059639258, 2.235701176815714, 1.1792956202988645],
        [2.687950224639993, 3.1659599959420404, 3.2761767899716863, 4.496480333234437, 4.975310199334165, 5.209952663572556, 5.510626252565248, 4.493185655060683, 4.011971776342589, 3.0364219601908813, 2.991479781006472, 2.8144060059639258, 2.235701176815714, 1.1792956202988645],
    ],
}
ratio0_variation_vals = {
}
ratio_band_edges = {
    'ratio0_ATLAS Data_1sigma-band_dn' : [-1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0],
    'ratio0_ATLAS Data_1sigma-band_up' : [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0],
    'ratio0_Theory [TYPE=BSM]_1sigma-band_dn' : [-5.188239522137124, -5.188239522137124, -5.727037190677499, -5.001177078704318, -5.923697671800593, -5.801575049710744, -4.917689445077839, -3.7592604669011322, -2.2839730184490787, -1.00271144098887, -0.6406689086977955, -1.1930626438555838, -1.9073016427765417, -2.5521752821602828, -3.329217128914806],
    'ratio0_Theory [TYPE=BSM]_1sigma-band_up' : [0.1876609271428618, 0.1876609271428618, 0.6048828006849296, 1.5511765004798275, 3.069262992673326, 4.149045339796761, 5.502215882067273, 7.261992038229363, 6.702398291672286, 7.021232111696309, 5.432174646406661, 4.7898969181573605, 3.7215103691513103, 1.9192270714711446, -0.9706732784769783],
    'ratio0_SM as BG [TYPE=BSM]_1sigma-band_dn' : [-5.188239522137124, -5.188239522137124, -5.72699655193695, -5.001127205626759, -5.923602961213556, -5.801273133989078, -4.917689445077839, -3.7592604669011322, -2.2839730184490787, -1.00271144098887, -0.6396159360783186, -1.1930626438555838, -1.9073016427765417, -2.5521752821602828, -3.3217651001796473],
    'ratio0_SM as BG [TYPE=BSM]_1sigma-band_up' : [0.1876609271428618, 0.1876609271428618, 0.6049234399471307, 1.551226374316614, 3.0693577052553187, 4.1493472646792515, 5.502215882067273, 7.261992038229363, 6.702398291672286, 7.021232111696309, 5.4332279843034454, 4.7898969181573605, 3.7215103691513103, 1.9192270714711446, -0.9631738595819184],
}