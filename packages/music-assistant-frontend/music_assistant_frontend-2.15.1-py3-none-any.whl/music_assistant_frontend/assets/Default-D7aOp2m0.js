import{B as be}from"./Button-CLpNZ-mm.js";import{_ as Ya,s as _e,c as V,a as Ae,o as Qe,w as ae,b as Ue,C as Xa,u as De,d as mt,e as Ga,g as fe,p as he,f as vt,h as it,i as yt,j as Oe,t as oe,k as pt,l as ft,m as ht,n as ja,q as ot,r as st,v as fa,x as z,y as Ka,z as gt,A as ge,B as u,D as le,E as Za,V as Je,F as Ja,T as el,G as K,H as Ye,I as Fe,J as _t,K as bt,L as tl,M as al,N as Se,O as wt,P as Pt,Q as G,R as S,S as d,U as p,W as E,X as Ve,Y as et,Z as k,$ as ue,a0 as e,a1 as Be,a2 as t,a3 as Me,a4 as L,a5 as Y,a6 as Kt,a7 as tt,a8 as te,a9 as $,aa as nt,ab as Q,ac as ll,ad as il,ae as ol,af as sl,ag as nl,ah as ha,ai as ga,aj as _a,ak as rl,al as ba,am as ie,an as se,ao as X,ap as kt,aq as Re,ar as re,as as He,at as Zt,au as Jt,av as Ee,aw as ve,ax as rt,ay as Ne,az as wa,aA as ul,aB as dl,aC as Pa,aD as cl,aE as ml,aF as ka,aG as vl,aH as Ca,aI as yl,aJ as pl,aK as Ia,aL as fl,aM as hl,aN as gl,aO as _l,aP as bl,aQ as wl,aR as ea,aS as Pl,aT as kl,aU as at,aV as Cl,aW as Xe,aX as Ge,aY as lt,aZ as ut,a_ as qe,a$ as Ie,b0 as $a,b1 as Va,b2 as Qa,b3 as ta,b4 as aa,b5 as Il,b6 as $l,b7 as Vl,b8 as Ke,b9 as Ql,ba as la,bb as ia,bc as oa,bd as Sl,be as sa,bf as $e,bg as Sa,bh as Tl,bi as xl,bj as Ll,bk as Ml}from"./index-DR5qckBc.js";import{D as Bl}from"./constants-BXWEQHoz.js";import{u as Ct,m as It,a as El,c as Al,b as Fl}from"./layout-B6wbM5TD.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as We}from"./MediaItemThumb-DzpXwvgz.js";import{T as zl,V as dt}from"./Toolbar-BuamUnpd.js";import{V as Ta}from"./VDialog-B6zJQoH-.js";import{V as ql,a as Dl}from"./VInfiniteScroll-DJkqA8zi.js";import{V as Rl,a as Ce,b as xa,m as Nl}from"./VBtn-FLpVs096.js";import{V as Wl}from"./VSlider-D7tzlsDl.js";import{L as Ol}from"./ListItem-CkYeU5zM.js";import{P as $t,g as Hl,V as Ul,a as je}from"./PlayerCard-acdPktX0.js";import{M as ye,a as ct}from"./marquee_text_sync-DtmKa-Fv.js";import{V as Yl}from"./VToolbar-BM_t5S8z.js";import{V as Xl}from"./VVirtualScroll-DeBUvsmK.js";import{V as Gl,a as na,b as ra,c as ua}from"./VExpansionPanels-X7fXlZXV.js";import"./VCheckboxBtn-BZncCdzt.js";import"./VCheckbox-B0Ewp2Ua.js";const jl=pe(Ya,[["__scopeId","data-v-f0157380"]]),Kl=""+new URL("icon-BQHr-CTb.png",import.meta.url).href;function Zl(a){let{rootEl:l,isSticky:s,layoutItemStyles:i}=a;const n=_e(!1),o=_e(0),r=V(()=>{const v=typeof n.value=="boolean"?"top":n.value;return[s.value?{top:"auto",bottom:"auto",height:void 0}:void 0,n.value?{[v]:Ae(o.value)}:{top:i.value.top}]});Qe(()=>{ae(s,v=>{v?window.addEventListener("scroll",y,{passive:!0}):window.removeEventListener("scroll",y)},{immediate:!0})}),Ue(()=>{window.removeEventListener("scroll",y)});let c=0;function y(){const v=c>window.scrollY?"up":"down",I=l.value.getBoundingClientRect(),_=parseFloat(i.value.top??0),m=window.scrollY-Math.max(0,o.value-_),g=I.height+Math.max(o.value,_)-window.scrollY-window.innerHeight,b=parseFloat(getComputedStyle(l.value).getPropertyValue("--v-body-scroll-y"))||0;I.height<window.innerHeight-_?(n.value="top",o.value=_):v==="up"&&n.value==="bottom"||v==="down"&&n.value==="top"?(o.value=window.scrollY+I.top-b,n.value=!0):v==="down"&&g<=0?(o.value=0,n.value="bottom"):v==="up"&&m<=0&&(b?n.value!=="top"&&(o.value=-m+b+_,n.value="top"):(o.value=I.top+m,n.value="top")),c=window.scrollY}return{isStuck:n,stickyStyles:r}}const Jl=100,ei=20;function da(a){return(a<0?-1:1)*Math.sqrt(Math.abs(a))*1.41421356237}function ca(a){if(a.length<2)return 0;if(a.length===2)return a[1].t===a[0].t?0:(a[1].d-a[0].d)/(a[1].t-a[0].t);let l=0;for(let s=a.length-1;s>0;s--){if(a[s].t===a[s-1].t)continue;const i=da(l),n=(a[s].d-a[s-1].d)/(a[s].t-a[s-1].t);l+=(n-i)*Math.abs(n),s===a.length-1&&(l*=.5)}return da(l)*1e3}function ti(){const a={};function l(n){Array.from(n.changedTouches).forEach(o=>{(a[o.identifier]??(a[o.identifier]=new Xa(ei))).push([n.timeStamp,o])})}function s(n){Array.from(n.changedTouches).forEach(o=>{delete a[o.identifier]})}function i(n){var v;const o=(v=a[n])==null?void 0:v.values().reverse();if(!o)throw new Error(`No samples for touch id ${n}`);const r=o[0],c=[],y=[];for(const I of o){if(r[0]-I[0]>Jl)break;c.push({t:I[0],d:I[1].clientX}),y.push({t:I[0],d:I[1].clientY})}return{x:ca(c),y:ca(y),get direction(){const{x:I,y:_}=this,[m,g]=[Math.abs(I),Math.abs(_)];return m>g&&I>=0?"right":m>g&&I<=0?"left":g>m&&_>=0?"down":g>m&&_<=0?"up":ai()}}}return{addMovement:l,endTouch:s,getVelocity:i}}function ai(){throw new Error}function li(a){let{el:l,isActive:s,isTemporary:i,width:n,touchless:o,position:r}=a;Qe(()=>{window.addEventListener("touchstart",W,{passive:!0}),window.addEventListener("touchmove",O,{passive:!1}),window.addEventListener("touchend",D,{passive:!0})}),Ue(()=>{window.removeEventListener("touchstart",W),window.removeEventListener("touchmove",O),window.removeEventListener("touchend",D)});const c=V(()=>["left","right"].includes(r.value)),{addMovement:y,endTouch:v,getVelocity:I}=ti();let _=!1;const m=_e(!1),g=_e(0),b=_e(0);let x;function R(h,C){return(r.value==="left"?h:r.value==="right"?document.documentElement.clientWidth-h:r.value==="top"?h:r.value==="bottom"?document.documentElement.clientHeight-h:Le())-(C?n.value:0)}function q(h){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const T=r.value==="left"?(h-b.value)/n.value:r.value==="right"?(document.documentElement.clientWidth-h-b.value)/n.value:r.value==="top"?(h-b.value)/n.value:r.value==="bottom"?(document.documentElement.clientHeight-h-b.value)/n.value:Le();return C?Math.max(0,Math.min(1,T)):T}function W(h){if(o.value)return;const C=h.changedTouches[0].clientX,T=h.changedTouches[0].clientY,M=25,B=r.value==="left"?C<M:r.value==="right"?C>document.documentElement.clientWidth-M:r.value==="top"?T<M:r.value==="bottom"?T>document.documentElement.clientHeight-M:Le(),w=s.value&&(r.value==="left"?C<n.value:r.value==="right"?C>document.documentElement.clientWidth-n.value:r.value==="top"?T<n.value:r.value==="bottom"?T>document.documentElement.clientHeight-n.value:Le());(B||w||s.value&&i.value)&&(x=[C,T],b.value=R(c.value?C:T,s.value),g.value=q(c.value?C:T),_=b.value>-20&&b.value<80,v(h),y(h))}function O(h){const C=h.changedTouches[0].clientX,T=h.changedTouches[0].clientY;if(_){if(!h.cancelable){_=!1;return}const B=Math.abs(C-x[0]),w=Math.abs(T-x[1]);(c.value?B>w&&B>3:w>B&&w>3)?(m.value=!0,_=!1):(c.value?w:B)>3&&(_=!1)}if(!m.value)return;h.preventDefault(),y(h);const M=q(c.value?C:T,!1);g.value=Math.max(0,Math.min(1,M)),M>1?b.value=R(c.value?C:T,!0):M<0&&(b.value=R(c.value?C:T,!1))}function D(h){if(_=!1,!m.value)return;y(h),m.value=!1;const C=I(h.changedTouches[0].identifier),T=Math.abs(C.x),M=Math.abs(C.y);(c.value?T>M&&T>400:M>T&&M>3)?s.value=C.direction===({left:"right",right:"left",top:"down",bottom:"up"}[r.value]||Le()):s.value=g.value>.5}const P=V(()=>m.value?{transform:r.value==="left"?`translateX(calc(-100% + ${g.value*n.value}px))`:r.value==="right"?`translateX(calc(100% - ${g.value*n.value}px))`:r.value==="top"?`translateY(calc(-100% + ${g.value*n.value}px))`:r.value==="bottom"?`translateY(calc(100% - ${g.value*n.value}px))`:Le(),transition:"none"}:void 0);return De(m,()=>{var T,M;const h=((T=l.value)==null?void 0:T.style.transform)??null,C=((M=l.value)==null?void 0:M.style.transition)??null;mt(()=>{var B,w,f,F;(w=l.value)==null||w.style.setProperty("transform",((B=P.value)==null?void 0:B.transform)||"none"),(F=l.value)==null||F.style.setProperty("transition",((f=P.value)==null?void 0:f.transition)||null)}),Ga(()=>{var B,w;(B=l.value)==null||B.style.setProperty("transform",h),(w=l.value)==null||w.style.setProperty("transition",C)})}),{isDragging:m,dragProgress:g,dragStyles:P}}function Le(){throw new Error}const ii=["start","end","left","right","top","bottom"],oi=he({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:a=>ii.includes(a)},sticky:Boolean,...wt(),...Se(),...al(),...tl({mobile:null}),...bt(),...It(),..._t(),...Fe({tag:"nav"}),...Ye()},"VNavigationDrawer"),La=fe()({name:"VNavigationDrawer",props:oi(),emits:{"update:modelValue":a=>!0,"update:rail":a=>!0},setup(a,l){let{attrs:s,emit:i,slots:n}=l;const{isRtl:o}=vt(),{themeClasses:r}=it(a),{borderClasses:c}=yt(a),{backgroundColorClasses:y,backgroundColorStyles:v}=Oe(oe(a,"color")),{elevationClasses:I}=pt(a),{displayClasses:_,mobile:m}=ft(a),{roundedClasses:g}=ht(a),b=ja(),x=ot(a,"modelValue",null,U=>!!U),{ssrBootStyles:R}=st(),{scopeId:q}=fa(),W=z(),O=_e(!1),{runOpenDelay:D,runCloseDelay:P}=Za(a,U=>{O.value=U}),h=V(()=>a.rail&&a.expandOnHover&&O.value?Number(a.width):Number(a.rail?a.railWidth:a.width)),C=V(()=>Ka(a.location,o.value)),T=V(()=>a.persistent),M=V(()=>!a.permanent&&(m.value||a.temporary)),B=V(()=>a.sticky&&!M.value&&C.value!=="bottom");De(()=>a.expandOnHover&&a.rail!=null,()=>{ae(O,U=>i("update:rail",!U))}),De(()=>!a.disableResizeWatcher,()=>{ae(M,U=>!a.permanent&&Pt(()=>x.value=!U))}),De(()=>!a.disableRouteWatcher&&!!b,()=>{ae(b.currentRoute,()=>M.value&&(x.value=!1))}),ae(()=>a.permanent,U=>{U&&(x.value=!0)}),a.modelValue==null&&!M.value&&(x.value=a.permanent||!m.value);const{isDragging:w,dragProgress:f}=li({el:W,isActive:x,isTemporary:M,width:h,touchless:oe(a,"touchless"),position:C}),F=V(()=>{const U=M.value?0:a.rail&&a.expandOnHover?Number(a.railWidth):h.value;return w.value?U*f.value:U}),{layoutItemStyles:N,layoutItemScrimStyles:j}=Ct({id:a.name,order:V(()=>parseInt(a.order,10)),position:C,layoutSize:F,elementSize:h,active:V(()=>x.value||w.value),disableTransitions:V(()=>w.value),absolute:V(()=>a.absolute||B.value&&typeof H.value!="string")}),{isStuck:H,stickyStyles:Z}=Zl({rootEl:W,isSticky:B,layoutItemStyles:N}),J=Oe(V(()=>typeof a.scrim=="string"?a.scrim:null)),ne=V(()=>({...w.value?{opacity:f.value*.2,transition:"none"}:void 0,...j.value}));return gt({VList:{bgColor:"transparent"}}),ge(()=>{const U=n.image||a.image;return u(K,null,[u(a.tag,le({ref:W,onMouseenter:D,onMouseleave:P,class:["v-navigation-drawer",`v-navigation-drawer--${C.value}`,{"v-navigation-drawer--expand-on-hover":a.expandOnHover,"v-navigation-drawer--floating":a.floating,"v-navigation-drawer--is-hovering":O.value,"v-navigation-drawer--rail":a.rail,"v-navigation-drawer--temporary":M.value,"v-navigation-drawer--persistent":T.value,"v-navigation-drawer--active":x.value,"v-navigation-drawer--sticky":B.value},r.value,y.value,c.value,_.value,I.value,g.value,a.class],style:[v.value,N.value,R.value,Z.value,a.style]},q,s),{default:()=>{var de,we,ze;return[U&&u("div",{key:"image",class:"v-navigation-drawer__img"},[n.image?u(Ja,{key:"image-defaults",disabled:!a.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:a.image}}},n.image):u(Je,{key:"image-img",alt:"",cover:!0,height:"inherit",src:a.image},null)]),n.prepend&&u("div",{class:"v-navigation-drawer__prepend"},[(de=n.prepend)==null?void 0:de.call(n)]),u("div",{class:"v-navigation-drawer__content"},[(we=n.default)==null?void 0:we.call(n)]),n.append&&u("div",{class:"v-navigation-drawer__append"},[(ze=n.append)==null?void 0:ze.call(n)])]}}),u(el,{name:"fade-transition"},{default:()=>[M.value&&(w.value||x.value)&&!!a.scrim&&u("div",le({class:["v-navigation-drawer__scrim",J.backgroundColorClasses.value],style:[ne.value,J.backgroundColorStyles.value],onClick:()=>{T.value||(x.value=!1)}},q),null)]})])}),{isStuck:H}}}),Ma=function(){const a=localStorage.getItem("frontend.settings.menu_items"),l=a?a.split(","):Bl,s=[];for(const i of l)i==="home"&&s.push({label:"home",icon:"mdi-home-outline",path:"/home",isLibraryNode:!1}),i==="search"&&s.push({label:"search",icon:"mdi-magnify",path:"/search",isLibraryNode:!1}),i==="artists"&&s.push({label:"artists",icon:"mdi-account-outline",path:"/artists",isLibraryNode:!0,hidden:t.libraryArtistsCount===0}),i==="albums"&&s.push({label:"albums",icon:"mdi-album",path:"/albums",isLibraryNode:!0,hidden:t.libraryAlbumsCount===0}),i==="tracks"&&s.push({label:"tracks",icon:"mdi-music-note",path:"/tracks",isLibraryNode:!0,hidden:t.libraryTracksCount===0}),i==="playlists"&&s.push({label:"playlists",icon:"mdi-playlist-play",path:"/playlists",isLibraryNode:!0,hidden:t.libraryPlaylistsCount===0}),i==="podcasts"&&s.push({label:"podcasts",icon:"mdi-podcast",path:"/podcasts",isLibraryNode:!0,hidden:t.libraryPodcastsCount===0}),i==="audiobooks"&&s.push({label:"audiobooks",icon:"mdi-book-play-outline",path:"/audiobooks",isLibraryNode:!0,hidden:t.libraryAudiobooksCount===0}),i==="radios"&&s.push({label:"radios",icon:"mdi-access-point",path:"/radios",isLibraryNode:!0,hidden:t.libraryRadiosCount===0}),i==="browse"&&s.push({label:"browse",icon:"mdi-folder-outline",path:"/browse",isLibraryNode:!0}),i==="settings"&&s.push({label:"settings.settings",icon:"mdi-cog-outline",path:"/settings",isLibraryNode:!0});return s},si=G({__name:"DrawerNavigation",setup(a){const l=z(localStorage.getItem("show_navigation_menu")==="true"),s=Ma();return ae(()=>l.value,i=>{localStorage.setItem("show_navigation_menu",i.toString())}),(i,n)=>(d(),S(La,{app:"",rail:!l.value,width:280,permanent:""},{default:p(()=>[u(Ve,{style:{height:"55px"},active:!1},{prepend:p(()=>n[1]||(n[1]=[E("img",{class:"logo_icon",size:"40",src:Kl},null,-1)])),title:p(()=>n[2]||(n[2]=[E("div",{class:"logo_text"},"Music Assistant",-1)])),_:1}),u(et),u(Be,{lines:"one",density:"compact",nav:""},{default:p(()=>[(d(!0),k(K,null,ue(e(s).filter(o=>!o.hidden),o=>(d(),S(Ve,{key:o.path,nav:"",density:"compact",height:15,title:i.$t(o.label),"prepend-icon":o.icon,to:o.path},null,8,["title","prepend-icon","to"]))),128))]),_:1}),u(be,{nav:"",height:15,width:40,style:{position:"relative",float:"right",right:"10px",top:"20px"},ripple:!1,icon:l.value?"mdi-chevron-left":"mdi-chevron-right",title:i.$t("tooltip.show_menu"),onClick:n[0]||(n[0]=o=>l.value=!l.value)},null,8,["icon","title"])]),_:1},8,["rail"]))}}),ni=pe(si,[["__scopeId","data-v-3b429b32"]]),ri={class:"media-thumb"},ui={style:{"margin-left":"-10px","padding-right":"5px"}},di=G({__name:"AddToPlaylistDialog",setup(a){const l=z(!1),s=z([]),i=z([]),n=z(),o=z([]);Qe(()=>{Me.on("playlistdialog",async I=>{l.value=!0,o.value=I.items,n.value=I.parentItem,await r()}),Ue(()=>{Me.off("playlistdialog")})});const r=async function(){s.value=[],i.value=[];const I=await L.getLibraryPlaylists();let _=o.value.length?o.value[0]:void 0;if(_){"provider_mappings"in _||(_=await L.getItem(_.media_type,_.item_id,_.provider));for(const m of I){if(!m.provider_mappings.filter(b=>b.available).length||!m.is_editable||n.value&&n.value.media_type===Y.PLAYLIST&&m.item_id===n.value.item_id)continue;const g=L.providers[m.provider_mappings[0].provider_instance];g&&(g.domain=="builtin"||g.is_streaming_provider||_!=null&&_.provider_mappings.filter(b=>b.provider_instance==g.instance_id).length)&&s.value.push(m)}for(const m of Object.values(L.providers))m.supported_features.includes(Kt.PLAYLIST_CREATE)&&m.supported_features.includes(Kt.PLAYLIST_TRACKS_EDIT)&&(m.domain=="builtin"||m.is_streaming_provider||_!=null&&_.provider_mappings.filter(g=>g.provider_instance==m.instance_id).length)&&i.value.push(m.instance_id)}},c=async function(I){L.addPlaylistTracks(I.item_id,o.value.map(_=>_.uri)),v(),t.activeAlert={type:ll.INFO,message:te("background_task_added"),persistent:!1}},y=async function(I){const _=prompt(te("new_playlist_name"));if(!_)return;const m=await L.createPlaylist(_,I);c(m)},v=function(){l.value=!1};return(I,_)=>(d(),S(Ta,{modelValue:l.value,"onUpdate:modelValue":[_[0]||(_[0]=m=>l.value=m),_[1]||(_[1]=m=>{e(t).dialogActive=m})],fullscreen:"",transition:"dialog-bottom-transition"},{default:p(()=>[u(tt,null,{default:p(()=>[u(zl,{icon:"mdi-playlist-plus",title:e(te)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:v}]},null,8,["title","menu-items"]),u(et),_[4]||(_[4]=E("br",null,null,-1)),u(Be,null,{default:p(()=>[(d(!0),k(K,null,ue(s.value,m=>(d(),k("div",{key:m.item_id},[u(Ve,{onClick:g=>c(m)},{prepend:p(()=>[E("div",ri,[u(We,{item:m,size:50},null,8,["item"])])]),title:p(()=>[E("div",null,Q(m.name),1)]),subtitle:p(()=>[E("div",null,Q(m.owner),1)]),append:p(()=>[m.provider_mappings?(d(),S(nt,{key:0,domain:m.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):$("",!0)]),_:2},1032,["onClick"])]))),128)),_[2]||(_[2]=E("div",{style:{height:"30px"}},null,-1)),u(et),_[3]||(_[3]=E("div",{style:{height:"30px"}},null,-1)),(d(!0),k(K,null,ue(i.value,m=>(d(),k("div",{key:m},[u(Ve,{onClick:g=>y(m)},{prepend:p(()=>[E("div",ui,[u(nt,{domain:e(L).providers[m].domain,size:50},null,8,["domain"])])]),title:p(()=>[E("div",null,Q(e(te)("new_playlist")),1)]),subtitle:p(()=>[E("div",null,Q(e(te)("create_playlist_on",[e(L).providers[m].name])),1)]),append:p(()=>[u(nt,{domain:e(L).providers[m].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ci=pe(di,[["__scopeId","data-v-bd014719"]]),mi=he({scrollable:Boolean,...Se(),...ol(),...Fe({tag:"main"})},"VMain"),vi=fe()({name:"VMain",props:mi(),setup(a,l){let{slots:s}=l;const{dimensionStyles:i}=il(a),{mainStyles:n}=El(),{ssrBootStyles:o}=st();return ge(()=>u(a.tag,{class:["v-main",{"v-main--scrollable":a.scrollable},a.class],style:[n.value,o.value,i.value,a.style]},{default:()=>{var r,c;return[a.scrollable?u("div",{class:"v-main__scroller"},[(r=s.default)==null?void 0:r.call(s)]):(c=s.default)==null?void 0:c.call(s)]}})),{}}}),ma=G({__name:"View",setup(a){return(l,s)=>{const i=nl("router-view");return d(),S(vi,{id:"cont",class:"overflow-y-auto",style:{height:"0px"}},{default:p(()=>{var n,o,r;return[e(t).navigationMenuStyle=="vertical"&&!e(t).frameless?(d(),S(ni,{key:0})):$("",!0),u(i,null,{default:p(({Component:c})=>[(d(),S(sl(c)))]),_:1}),u(ci),u(jl),u(ql,{"model-value":e(t).activeAlert!==void 0,color:((n=e(t).activeAlert)==null?void 0:n.type)||"grey",text:(o=e(t).activeAlert)==null?void 0:o.message,"close-on-content-click":"",position:"sticky",timeout:(r=e(t).activeAlert)!=null&&r.persistent?-1:5e3,"z-index":"999999",style:{"z-index":"999999"},"onUpdate:modelValue":s[0]||(s[0]=()=>e(t).activeAlert=void 0)},null,8,["model-value","color","text","timeout"])]}),_:1})}}}),yi=he({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:a=>!a||["horizontal","shift"].includes(a)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...wt(),...Se(),...ba(),...bt(),..._t(),...It({name:"bottom-navigation"}),...Fe({tag:"header"}),...rl({selectedClass:"v-btn--selected"}),...Ye()},"VBottomNavigation"),pi=fe()({name:"VBottomNavigation",props:yi(),emits:{"update:active":a=>!0,"update:modelValue":a=>!0},setup(a,l){let{slots:s}=l;const{themeClasses:i}=ha(),{borderClasses:n}=yt(a),{backgroundColorClasses:o,backgroundColorStyles:r}=Oe(oe(a,"bgColor")),{densityClasses:c}=ga(a),{elevationClasses:y}=pt(a),{roundedClasses:v}=ht(a),{ssrBootStyles:I}=st(),_=V(()=>Number(a.height)-(a.density==="comfortable"?8:0)-(a.density==="compact"?16:0)),m=ot(a,"active",a.active),{layoutItemStyles:g}=Ct({id:a.name,order:V(()=>parseInt(a.order,10)),position:V(()=>"bottom"),layoutSize:V(()=>m.value?_.value:0),elementSize:_,active:m,absolute:oe(a,"absolute")});return _a(a,Rl),gt({VBtn:{baseColor:oe(a,"baseColor"),color:oe(a,"color"),density:oe(a,"density"),stacked:V(()=>a.mode!=="horizontal"),variant:"text"}},{scoped:!0}),ge(()=>u(a.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":m.value,"v-bottom-navigation--grow":a.grow,"v-bottom-navigation--shift":a.mode==="shift"},i.value,o.value,n.value,c.value,y.value,v.value,a.class],style:[r.value,g.value,{height:Ae(_.value)},I.value,a.style]},{default:()=>[s.default&&u("div",{class:"v-bottom-navigation__content"},[s.default()])]})),{}}}),fi={class:"menuButton"},hi={class:"menuButton"},gi={class:"menuButton"},_i=G({__name:"BottomNavigation",props:{height:{}},setup(a){const l=Ma(),s=z(!1);return(i,n)=>(d(),S(pi,{height:i.height,grow:"",elevation:"15",style:{"border-top":"1px solid #20202035"},role:"navigation"},{default:p(()=>[e(ie)("tablet")?(d(!0),k(K,{key:0},ue(e(l),o=>(d(),S(Ce,{key:o.label,to:o.path,"aria-label":i.$t(o.label),tabindex:"0"},{default:p(()=>[u(se,{size:"xx-large"},{default:p(()=>[X(Q(o.icon),1)]),_:2},1024),E("span",fi,Q(i.$t(o.label)),1)]),_:2},1032,["to","aria-label"]))),128)):(d(),k(K,{key:1},[(d(!0),k(K,null,ue(e(l).filter(o=>!o.isLibraryNode),o=>(d(),S(Ce,{key:o.label,to:o.path,"aria-label":i.$t(o.label),tabindex:"0"},{default:p(()=>[u(se,{size:"xx-large"},{default:p(()=>[X(Q(o.icon),1)]),_:2},1024),E("span",hi,Q(i.$t(o.label)),1)]),_:2},1032,["to","aria-label"]))),128)),u(kt,null,{activator:p(({props:o})=>[u(Ce,le(o,{"aria-haspopup":"true","aria-expanded":s.value.toString(),"aria-label":"Open library menu"}),{default:p(()=>[u(se,{size:"xx-large"},{default:p(()=>n[0]||(n[0]=[X("mdi-bookshelf")])),_:1}),E("span",gi,Q(i.$t("library")),1)]),_:2},1040,["aria-expanded"])]),default:p(()=>[u(Be,null,{default:p(()=>[(d(!0),k(K,null,ue(e(l).filter(o=>o.isLibraryNode),o=>(d(),S(Ve,{key:o.label,title:i.$t(o.label),"prepend-icon":o.icon,to:o.path},null,8,["title","prepend-icon","to"]))),128))]),_:1})]),_:1})],64))]),_:1},8,["height"]))}}),bi=pe(_i,[["__scopeId","data-v-5c8e33d1"]]),wi={style:{width:"auto"}},Pi={key:0,style:{width:"100%"}},ki=["onClick"],Ci={key:0,class:"time-text-row"},Ii={class:"text-caption time-text-right"},$i=G({__name:"PlayerTimeline",props:{showLabels:{type:Boolean,default:!1},color:{default:void 0}},setup(a){const l=z(!1),s=z(!0),i=z(!1),n=z(0),o=z(0),r=V(()=>t.curQueueItem?l.value?`-${Re(t.curQueueItem.duration-y.value)}`:`${Re(y.value)}`:"0:00"),c=V(()=>{var b;if(!t.curQueueItem||!t.curQueueItem.duration||((b=t.curQueueItem.media_item)==null?void 0:b.media_type)==Y.RADIO)return"";const g=t.curQueueItem.duration;return Re(g)}),y=V(()=>i.value?(o.value=n.value,n.value):t.activePlayerQueue?t.activePlayerQueue.elapsed_time:0),v=V(()=>{var b,x,R;const g={};return(R=(x=(b=t.curQueueItem)==null?void 0:b.media_item)==null?void 0:x.metadata)!=null&&R.chapters&&t.curQueueItem.media_item.metadata.chapters.forEach(q=>{g[q.start]=q.name}),g});ae(y,g=>{i.value||(n.value=g)});const I=function(){i.value=!0},_=()=>{i.value=!1,!i.value&&t.activePlayer&&L.playerCommandSeek(t.activePlayer.player_id,Math.round(o.value))},m=function(g){var b,x,R;if((R=(x=(b=t.curQueueItem)==null?void 0:b.media_item)==null?void 0:x.metadata)!=null&&R.chapters){for(const q of t.curQueueItem.media_item.metadata.chapters)if(q.start==g){L.playMedia(t.curQueueItem.media_item.uri,void 0,void 0,q.position.toString());return}}};return(g,b)=>{var x,R;return d(),k("div",wi,[e(t).activePlayerQueue?(d(),k("div",Pi,[u(Wl,{modelValue:n.value,"onUpdate:modelValue":b[0]||(b[0]=q=>n.value=q),disabled:!e(t).curQueueItem||!e(t).curQueueItem.media_item||!e(t).curQueueItem.duration||e(t).curQueueItem.media_item.media_type==e(Y).RADIO||((x=e(t).activePlayer)==null?void 0:x.powered)==!1,style:{width:"100%"},min:0,max:(R=e(t).curQueueItem)==null?void 0:R.duration,"hide-details":"","track-size":2,"thumb-size":s.value?0:10,"show-ticks":v.value?"always":!1,ticks:v.value,"tick-size":"4",color:g.color,onTouchstart:b[1]||(b[1]=q=>s.value=!1),onTouchend:b[2]||(b[2]=q=>s.value=!0),onMouseenter:b[3]||(b[3]=q=>s.value=!1),onMouseleave:b[4]||(b[4]=q=>s.value=!0),onStart:I,onEnd:_},{"tick-label":p(({tick:q})=>[g.showLabels&&!s.value&&Object.values(v.value).length<6?(d(),k("a",{key:0,class:"text-caption",onClick:W=>m(q.value)},Q(q.label),9,ki)):$("",!0)]),_:1},8,["modelValue","disabled","max","thumb-size","show-ticks","ticks","color"]),g.showLabels?(d(),k("div",Ci,[E("div",{class:"text-caption time-text-left",onClick:b[5]||(b[5]=q=>l.value?l.value=!1:l.value=!0)},Q(r.value),1),E("div",Ii,Q(c.value),1)])):$("",!0)])):$("",!0)])}}}),Ba=pe($i,[["__scopeId","data-v-5386447e"]]),Vi=G({__name:"ResponsiveIcon",props:{width:{default:void 0},height:{default:void 0},staticWidth:{default:void 0},staticHeight:{default:void 0},maxWidth:{default:void 0},maxHeight:{default:void 0},minWidth:{default:"24px"},minHeight:{default:"24px"},icon:{default:void 0},type:{default:"icon"},color:{default:void 0},disabled:{type:Boolean},badge:{type:Boolean,default:void 0}},emits:["click"],setup(a,{emit:l}){const s=()=>{if(i.value){const o=i.value.offsetWidth,r=i.value.offsetHeight,c=Math.min(o,r);n.value.$el.style.fontSize=`${c}px`}},i=z(),n=z();return Qe(()=>{s(),window.addEventListener("resize",s)}),Ue(()=>{window.removeEventListener("resize",s)}),(o,r)=>(d(),k("div",{ref_key:"responsiveIconHolder",ref:i,class:He([o.type=="btn"&&!o.disabled?"responsive-icon-holder-btn":"responsive-icon-holder"]),style:re({width:o.staticWidth?o.staticWidth:o.width,height:o.staticWidth?o.staticWidth:o.height,maxHeight:o.staticHeight?o.staticHeight:o.maxHeight,maxWidth:o.staticWidth?o.staticWidth:o.maxWidth,minHeight:o.staticHeight?o.staticHeight:o.minHeight,minWidth:o.staticWidth?o.staticWidth:o.minWidth}),onClick:r[0]||(r[0]=c=>o.disabled?c.preventDefault():o.$emit("click",c))},[u(dt,{"model-value":o.badge==!0,color:"error",dot:""},{default:p(()=>[o.type==="icon"?(d(),S(se,{key:0,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",color:o.color?o.color:"",icon:o.icon?o.icon:"mdi-check",width:o.staticWidth?o.staticWidth:null,height:o.staticHeight?o.staticHeight:null,disabled:o.disabled},Zt({_:2},[ue(o.$slots,(c,y)=>({name:y,fn:p(()=>[Jt(o.$slots,y,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):o.type==="btn"?(d(),S(se,{key:1,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",style:{cursor:"pointer"},color:o.color?o.color:"",icon:o.icon?o.icon:"mdi-check",width:o.staticWidth?o.staticWidth:null,height:o.staticHeight?o.staticHeight:null,disabled:o.disabled},Zt({_:2},[ue(o.$slots,(c,y)=>({name:y,fn:p(()=>[Jt(o.$slots,y,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):$("",!0)]),_:3},8,["model-value"])],6))}}),Te=pe(Vi,[["__scopeId","data-v-2c9253ab"]]),Ea=G({__name:"RepeatBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){return(l,s)=>{var i,n;return l.isVisible&&l.playerQueue?(d(),S(Te,le({key:0},l.icon,{disabled:!l.playerQueue.active||l.playerQueue.items==0,color:e(Ee)((i=l.icon)==null?void 0:i.color,[[l.playerQueue.repeat_mode==e(ve).OFF,null],[l.playerQueue.repeat_mode==e(ve).ALL,"primary"],[l.playerQueue.repeat_mode==e(ve).ONE,"primary"]]),icon:e(Ee)((n=l.icon)==null?void 0:n.icon,[[l.playerQueue.repeat_mode==e(ve).OFF,"mdi-repeat-off"],[l.playerQueue.repeat_mode==e(ve).ALL,"mdi-repeat"],[l.playerQueue.repeat_mode==e(ve).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),type:"btn",onClick:s[0]||(s[0]=o=>e(L).queueCommandRepeat(l.playerQueue.queue_id||"",e(Ee)(null,[[l.playerQueue.repeat_mode==e(ve).OFF,e(ve).ONE],[l.playerQueue.repeat_mode==e(ve).ALL,e(ve).OFF],[l.playerQueue.repeat_mode==e(ve).ONE,e(ve).ALL]])))}),null,16,["disabled","color","icon"])):$("",!0)}}}),Aa=G({__name:"ShuffleBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){return(l,s)=>{var i,n;return l.isVisible&&l.playerQueue?(d(),S(Te,le({key:0},l.icon,{disabled:!l.playerQueue.active||l.playerQueue.items==0,color:e(Ee)((i=l.icon)==null?void 0:i.color,[[l.playerQueue.shuffle_enabled,"primary",""]]),icon:e(Ee)((n=l.icon)==null?void 0:n.icon,[[l.playerQueue.shuffle_enabled,"mdi-shuffle"],[l.playerQueue.shuffle_enabled==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),type:"btn",onClick:s[0]||(s[0]=o=>e(L).queueCommandShuffle(l.playerQueue.queue_id,!l.playerQueue.shuffle_enabled))}),null,16,["disabled","color","icon"])):$("",!0)}}}),Fa=G({__name:"PlayBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0},iconStyle:{default:"circle"}},setup(a){const l=a,s=V(()=>l.playerQueue?l.playerQueue.items>0:!1),i=V(()=>{var o;return!(!l.player||(o=l.playerQueue)!=null&&o.active||!l.player.current_media)}),n=V(()=>{var o;return((o=l.player)==null?void 0:o.state)==rt.PLAYING?"mdi-pause":"mdi-play"});return(o,r)=>o.isVisible&&o.player?(d(),S(Te,le({key:0},o.icon,{disabled:!s.value&&!i.value,icon:o.iconStyle?`${n.value}-${o.iconStyle}`:n.value,type:"btn",onClick:r[0]||(r[0]=c=>e(L).playerCommandPlayPause(o.player.player_id))}),null,16,["disabled","icon"])):$("",!0)}}),za=G({__name:"PreviousBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const l=a,s=V(()=>{var n,o;return!((n=l.playerQueue)!=null&&n.active)||!((o=l.playerQueue)!=null&&o.items)||!l.playerQueue.current_index?!1:l.playerQueue.current_index>0}),i=V(()=>{var n;return!l.player||(n=l.playerQueue)!=null&&n.active||!l.player.current_media?!1:l.player.supported_features.includes(Ne.NEXT_PREVIOUS)});return(n,o)=>n.isVisible&&n.player?(d(),S(Te,le({key:0},n.icon,{disabled:!s.value&&!i.value,icon:"mdi-skip-previous-outline",type:"btn",onClick:o[0]||(o[0]=r=>e(L).playerCommandPrevious(n.player.player_id))}),null,16,["disabled"])):$("",!0)}}),qa=G({__name:"NextBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const l=a,s=V(()=>{var n;return(n=l.playerQueue)!=null&&n.active?(l.playerQueue.current_index||0)<l.playerQueue.items-1:!1}),i=V(()=>{var n;return!l.player||(n=l.playerQueue)!=null&&n.active||!l.player.current_media?!1:l.player.supported_features.includes(Ne.NEXT_PREVIOUS)});return(n,o)=>n.isVisible&&n.player?(d(),S(Te,le({key:0},n.icon,{disabled:!s.value&&!i.value,icon:"mdi-skip-next-outline",type:"btn",onClick:o[0]||(o[0]=r=>e(L).playerCommandNext(n.player.player_id))}),null,16,["disabled"])):$("",!0)}}),Qi={key:0,class:"player-controls"},Si={key:0,class:"player-controls-elements"},Ti={key:1,class:"player-controls-elements"},xi={key:2},Li={key:3,class:"player-controls-elements"},Mi={key:4,class:"player-controls-elements"},va=G({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(a){return(l,s)=>{var i,n,o,r,c;return l.visibleComponents?(d(),k("div",Qi,[l.visibleComponents&&((i=l.visibleComponents.shuffle)!=null&&i.isVisible)?(d(),k("div",Si,[u(Aa,{"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:l.visibleComponents.shuffle.icon},null,8,["player-queue","icon"])])):$("",!0),l.visibleComponents&&((n=l.visibleComponents.previous)!=null&&n.isVisible)?(d(),k("div",Ti,[u(za,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:l.visibleComponents.previous.icon},null,8,["player","player-queue","icon"])])):$("",!0),l.visibleComponents&&((o=l.visibleComponents.play)!=null&&o.isVisible)?(d(),k("div",xi,[u(Fa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","icon-style":l.visibleComponents.play.withCircle?"circle":"",icon:l.visibleComponents.play.icon},null,8,["player","player-queue","icon-style","icon"])])):$("",!0),l.visibleComponents&&((r=l.visibleComponents.next)!=null&&r.isVisible)?(d(),k("div",Li,[u(qa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,icon:l.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["player","player-queue","icon"])])):$("",!0),l.visibleComponents&&((c=l.visibleComponents.repeat)!=null&&c.isVisible)?(d(),k("div",Mi,[u(Ea,{"player-queue":e(t).activePlayerQueue,icon:l.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["player-queue","icon"])])):$("",!0)])):$("",!0)}}}),Bi={class:"lyrics-container"},Ei={key:0,class:"lyrics-loading"},Ai={key:1,class:"lyrics-empty"},Fi={key:2,class:"lyrics-intro"},zi={class:"song-title"},qi={class:"artist-name"},Di={class:"lyrics-coming-soon"},Ri=G({__name:"LyricsViewer",props:{mediaItem:{default:void 0},position:{default:void 0},duration:{default:void 0},streamDetails:{default:void 0},textColor:{default:"#FFFFFF"},debugMode:{type:Boolean,default:!1}},setup(a){wa(P=>({"762ad436":P.textColor}));const l=a,s=(P,h=!0)=>{if(h&&!l.debugMode)return;(h?console.debug:console.log)(`[lyricSynch] ${P}`)},i=z([]),n=z(!1),o=z(-1),r=z(null),c=z(!1),y=z(0),v=z(0),I=V(()=>{if(!m.value||!i.value.length)return!1;const P=i.value[0].time,h=l.position||0;return o.value===-1&&h<P}),_=V(()=>{var P;if(!l.mediaItem)return"";if("media_type"in l.mediaItem&&l.mediaItem.media_type==="track"){const h=l.mediaItem;if((P=h.artists)!=null&&P.length)return h.artists.map(C=>C.name).join(", ")}return"media_type"in l.mediaItem&&l.mediaItem.media_type==="artist"?l.mediaItem.name:""});V(()=>{var C,T,M,B;const P=(T=(C=l.mediaItem)==null?void 0:C.metadata)==null?void 0:T.lyrics,h=(B=(M=l.mediaItem)==null?void 0:M.metadata)==null?void 0:B.lrc_lyrics;return!!P&&P.trim().length>0||!!h&&h.trim().length>0});const m=V(()=>{var P,h,C,T,M,B;return(h=(P=l.mediaItem)==null?void 0:P.metadata)!=null&&h.lrc_lyrics?!0:!((T=(C=l.mediaItem)==null?void 0:C.metadata)!=null&&T.lrc_lyrics)&&((B=(M=l.mediaItem)==null?void 0:M.metadata)!=null&&B.lyrics)?!1:i.value.some(w=>w.time>0)}),g=P=>{const h=P.match(/\[(\d+):(\d+)([.:]\d+)?\](.*)/);if(h){const C=parseInt(h[1]);let T=parseInt(h[2]),M=0;if(h[3]){const f=h[3].replace(/[.:]/,".");M=Math.round(parseFloat(f)*1e3)}return{time:(C*60*1e3+T*1e3+M)/1e3,text:h[4].trim()||" "}}return{time:0,text:P.trim()||" "}},b=()=>{var P,h;if(!l.mediaItem){i.value=[];return}n.value=!0;try{const C=((P=l.mediaItem.metadata)==null?void 0:P.lrc_lyrics)||"",T=((h=l.mediaItem.metadata)==null?void 0:h.lyrics)||"";if(C){const M=C.split(`
`).filter(B=>B.trim());i.value=M.map(B=>g(B)).filter(B=>B.text).sort((B,w)=>B.time-w.time),s(`Loaded ${i.value.length} synchronized lyrics lines`,!1),s(`Processed synced lyrics: ${i.value.length} lines`)}else if(T){const M=T.split(`
`).filter(B=>B.trim());i.value=M.map(B=>({time:0,text:B.trim()||" "})).filter(B=>B.text),s(`Loaded ${i.value.length} plain text lyrics lines`,!1),s(`Processed plain lyrics: ${i.value.length} lines`)}else i.value=[]}catch(C){s(`Error processing lyrics: ${C}`,!1),i.value=[]}finally{n.value=!1}},x=P=>{const h=P;s(`Calculating look-ahead at ${P.toFixed(3)}s`);let C=-1,T=-1;for(let J=0;J<i.value.length;J++)if(i.value[J].time<=h)C=J;else{T=J;break}if(s(`Current lyric index: ${C}, Next lyric index: ${T}`),T===0){const ne=i.value[0].time-h;if(s(`Pre-lyrics intro: ${ne.toFixed(2)}s until first lyric`),ne>5){s("Long intro - using fixed look-ahead: 0.3s"),y.value=.3;return}else if(ne>2){const U=Math.min(1,ne*.15);s(`Medium intro - calculated look-ahead: ${U.toFixed(2)}s`),y.value=U;return}s("Short intro - using standard calculation")}if(T===-1||C===-1){s("Cannot determine appropriate look-ahead, using default: 0.3s"),y.value=.3;return}const M=i.value[C].time,B=i.value[T].time,w=B-M,f=y.value;s(`Gap analysis:
    - Current lyric time: ${M.toFixed(3)}s
    - Next lyric time: ${B.toFixed(3)}s
    - Gap between lyrics: ${w.toFixed(3)}s
    - Previous look-ahead: ${f.toFixed(3)}s`);let F;w<.5?(F=.3,s(`Very rapid lyrics detected (${w.toFixed(2)}s gap) - using 30% look-ahead`)):w<.8?(F=.1,s(`Fast lyrics detected (${w.toFixed(2)}s gap) - using 10% look-ahead`)):w<1.5?(F=.2,s(`Medium lyrics detected (${w.toFixed(2)}s gap) - using 20% look-ahead`)):w<3?(F=.3,s(`Slower lyrics detected (${w.toFixed(2)}s gap) - using 30% look-ahead`)):w>10?(F=.02,s(`Very slow lyrics detected (${w.toFixed(2)}s gap) - using 2% look-ahead`)):(F=.4,s(`Slow lyrics detected (${w.toFixed(2)}s gap) - using 40% look-ahead`));const N=Math.min(1.5,w*F);s(`Target look-ahead: ${N.toFixed(3)}s`);const j=Math.abs(N-f),H=Math.min(.8,.3+j*.5),Z=f*(1-H)+N*H;s(`Smoothed look-ahead: ${Z.toFixed(3)}s (adaptation rate: ${(H*100).toFixed(0)}%)`),Math.abs(Z-f)>.3&&s(`Look-ahead adjusted: ${f.toFixed(2)}s → ${Z.toFixed(2)}s`,!1),y.value=Z},R=P=>P===void 0||!i.value.length||!m.value||c.value,q=P=>{const h=Math.round((P+y.value)*1e3);let C=-1;for(let T=0;T<i.value.length&&Math.round(i.value[T].time*1e3)<=h;T++)C=T;return C},W=(P,h)=>{P<0||P===o.value||(s(`Lyric activated: "${i.value[P].text}"`),s(`Activating lyric at ${h.toFixed(2)}s (adjusted: ${(h+y.value).toFixed(2)}s):
    - Index: ${P}
    - Lyric time: ${i.value[P].time.toFixed(2)}s`),s(`Transition details:
    - Raw position: ${h.toFixed(3)}s
    - Dynamic look-ahead: ${y.value.toFixed(3)}s
    - Adjusted position: ${(h+y.value).toFixed(3)}s`),P>0&&O(P,h),v.value=h,o.value=P,Pt(()=>D()))},O=(P,h)=>{const C=h-v.value,T=i.value[P].time-i.value[P-1].time;s(`Timing analysis:
    - Expected gap: ${T.toFixed(3)}s
    - Actual gap: ${C.toFixed(3)}s
    - Difference: ${(C-T).toFixed(3)}s`)},D=()=>{const P=document.querySelector(".lyrics-line.active"),h=r.value;P&&h&&P.scrollIntoView({behavior:"smooth",block:"center"})};return ae(()=>{var P;return(P=l.mediaItem)==null?void 0:P.item_id},()=>{b()},{immediate:!0}),ae(()=>l.position,P=>{if(R(P))return;const h=P??0;x(h);const C=q(h);C!==o.value&&W(C,h)}),Qe(()=>{const P=r.value;P&&P.addEventListener("scroll",()=>{c.value=!0,setTimeout(()=>{c.value=!1},8e3)},{passive:!0})}),(P,h)=>{var C;return d(),k("div",Bi,[n.value?(d(),k("div",Ei,[u(xa,{indeterminate:"",color:P.textColor},null,8,["color"]),E("div",null,Q(e(te)("loading_lyrics")),1)])):i.value.length?I.value&&m.value?(d(),k("div",Fi,[E("div",zi,Q((C=l.mediaItem)==null?void 0:C.name),1),E("div",qi,Q(_.value),1),E("div",Di,Q(e(te)("lyrics_will_appear_soon")),1)])):(d(),k("div",{key:3,ref_key:"lyricsContainer",ref:r,class:He(["lyrics-scroll-container",{"static-lyrics":!m.value}])},[(d(!0),k(K,null,ue(i.value,(T,M)=>(d(),k("div",{key:M,class:He(["lyrics-line",{active:o.value===M||!m.value}])},Q(T.text),3))),128))],2)):(d(),k("div",Ai,Q(e(te)("no_lyrics_available")),1))])}}}),Ni=pe(Ri,[["__scopeId","data-v-73a4fec0"]]),Da=G({__name:"QueueBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const l=function(){t.showFullscreenPlayer&&t.showQueueItems?t.showQueueItems=!1:t.showFullscreenPlayer&&!t.showQueueItems?t.showQueueItems=!0:(t.showQueueItems=!0,t.showFullscreenPlayer=!0)};return(s,i)=>{var n;return s.isVisible?(d(),S(Te,le({key:0},s.icon,{disabled:!e(t).activePlayerId||e(t).showFullscreenPlayer&&!e(t).curQueueItem&&!e(t).showQueueItems,icon:"mdi-playlist-play",color:e(Ee)((n=s.icon)==null?void 0:n.color,[[e(t).showFullscreenPlayer&&e(t).showQueueItems,"primary",""]]),type:"btn",onClick:l}),null,16,["disabled","color"])):$("",!0)}}}),Ra=G({__name:"SpeakerBtn",props:{color:{}},setup(a){return(l,s)=>(d(),S(be,{variant:"icon",ripple:!1,icon:"",onClick:s[0]||(s[0]=i=>e(t).showPlayersMenu=!0)},{default:p(()=>{var i;return[u(se,{color:l.color?l.color:"",size:24,icon:(i=e(t).activePlayer)!=null&&i.group_childs.length?"mdi-speaker-multiple":"mdi-speaker"},null,8,["color","icon"])]}),_:1}))}}),Vt=Symbol.for("vuetify:v-tabs"),Wi=he({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Pa(Nl({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Ze=fe()({name:"VTab",props:Wi(),setup(a,l){let{slots:s,attrs:i}=l;const{textColorClasses:n,textColorStyles:o}=ul(a,"sliderColor"),r=z(),c=z(),y=V(()=>a.direction==="horizontal"),v=V(()=>{var _,m;return((m=(_=r.value)==null?void 0:_.group)==null?void 0:m.isSelected.value)??!1});function I(_){var g,b;let{value:m}=_;if(m){const x=(b=(g=r.value)==null?void 0:g.$el.parentElement)==null?void 0:b.querySelector(".v-tab--selected .v-tab__slider"),R=c.value;if(!x||!R)return;const q=getComputedStyle(x).color,W=x.getBoundingClientRect(),O=R.getBoundingClientRect(),D=y.value?"x":"y",P=y.value?"X":"Y",h=y.value?"right":"bottom",C=y.value?"width":"height",T=W[D],M=O[D],B=T>M?W[h]-O[h]:W[D]-O[D],w=Math.sign(B)>0?y.value?"right":"bottom":Math.sign(B)<0?y.value?"left":"top":"center",F=(Math.abs(B)+(Math.sign(B)<0?W[C]:O[C]))/Math.max(W[C],O[C])||0,N=W[C]/O[C]||0,j=1.5;cl(R,{backgroundColor:[q,"currentcolor"],transform:[`translate${P}(${B}px) scale${P}(${N})`,`translate${P}(${B/j}px) scale${P}(${(F-1)/j+1})`,"none"],transformOrigin:Array(3).fill(w)},{duration:225,easing:ml})}}return ge(()=>{const _=Ce.filterProps(a);return u(Ce,le({symbol:Vt,ref:r,class:["v-tab",a.class],style:a.style,tabindex:v.value?0:-1,role:"tab","aria-selected":String(v.value),active:!1},_,i,{block:a.fixed,maxWidth:a.fixed?300:void 0,"onGroup:selected":I}),{...s,default:()=>{var m;return u(K,null,[((m=s.default)==null?void 0:m.call(s))??a.text,!a.hideSlider&&u("div",{ref:c,class:["v-tab__slider",n.value],style:o.value},null)])}})}),dl({},r)}}),Oi=a=>{const{touchstartX:l,touchendX:s,touchstartY:i,touchendY:n}=a,o=.5,r=16;a.offsetX=s-l,a.offsetY=n-i,Math.abs(a.offsetY)<o*Math.abs(a.offsetX)&&(a.left&&s<l-r&&a.left(a),a.right&&s>l+r&&a.right(a)),Math.abs(a.offsetX)<o*Math.abs(a.offsetY)&&(a.up&&n<i-r&&a.up(a),a.down&&n>i+r&&a.down(a))};function Hi(a,l){var i;const s=a.changedTouches[0];l.touchstartX=s.clientX,l.touchstartY=s.clientY,(i=l.start)==null||i.call(l,{originalEvent:a,...l})}function Ui(a,l){var i;const s=a.changedTouches[0];l.touchendX=s.clientX,l.touchendY=s.clientY,(i=l.end)==null||i.call(l,{originalEvent:a,...l}),Oi(l)}function Yi(a,l){var i;const s=a.changedTouches[0];l.touchmoveX=s.clientX,l.touchmoveY=s.clientY,(i=l.move)==null||i.call(l,{originalEvent:a,...l})}function Xi(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const l={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:a.left,right:a.right,up:a.up,down:a.down,start:a.start,move:a.move,end:a.end};return{touchstart:s=>Hi(s,l),touchend:s=>Ui(s,l),touchmove:s=>Yi(s,l)}}function Gi(a,l){var c;const s=l.value,i=s!=null&&s.parent?a.parentElement:a,n=(s==null?void 0:s.options)??{passive:!0},o=(c=l.instance)==null?void 0:c.$.uid;if(!i||!o)return;const r=Xi(l.value);i._touchHandlers=i._touchHandlers??Object.create(null),i._touchHandlers[o]=r,ka(r).forEach(y=>{i.addEventListener(y,r[y],n)})}function ji(a,l){var o,r;const s=(o=l.value)!=null&&o.parent?a.parentElement:a,i=(r=l.instance)==null?void 0:r.$.uid;if(!(s!=null&&s._touchHandlers)||!i)return;const n=s._touchHandlers[i];ka(n).forEach(c=>{s.removeEventListener(c,n[c])}),delete s._touchHandlers[i]}const Na={mounted:Gi,unmounted:ji},Wa=Symbol.for("vuetify:v-window"),Oa=Symbol.for("vuetify:v-window-group"),Ha=he({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:a=>typeof a=="boolean"||a==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Se(),...Fe(),...Ye()},"VWindow"),ya=fe()({name:"VWindow",directives:{Touch:Na},props:Ha(),emits:{"update:modelValue":a=>!0},setup(a,l){let{slots:s}=l;const{themeClasses:i}=it(a),{isRtl:n}=vt(),{t:o}=vl(),r=_a(a,Oa),c=z(),y=V(()=>n.value?!a.reverse:a.reverse),v=_e(!1),I=V(()=>{const D=a.direction==="vertical"?"y":"x",h=(y.value?!v.value:v.value)?"-reverse":"";return`v-window-${D}${h}-transition`}),_=_e(0),m=z(void 0),g=V(()=>r.items.value.findIndex(D=>r.selected.value.includes(D.id)));ae(g,(D,P)=>{const h=r.items.value.length,C=h-1;h<=2?v.value=D<P:D===C&&P===0?v.value=!0:D===0&&P===C?v.value=!1:v.value=D<P}),pl(Wa,{transition:I,isReversed:v,transitionCount:_,transitionHeight:m,rootRef:c});const b=V(()=>a.continuous||g.value!==0),x=V(()=>a.continuous||g.value!==r.items.value.length-1);function R(){b.value&&r.prev()}function q(){x.value&&r.next()}const W=V(()=>{const D=[],P={icon:n.value?a.nextIcon:a.prevIcon,class:`v-window__${y.value?"right":"left"}`,onClick:r.prev,"aria-label":o("$vuetify.carousel.prev")};D.push(b.value?s.prev?s.prev({props:P}):u(Ce,P,null):u("div",null,null));const h={icon:n.value?a.prevIcon:a.nextIcon,class:`v-window__${y.value?"left":"right"}`,onClick:r.next,"aria-label":o("$vuetify.carousel.next")};return D.push(x.value?s.next?s.next({props:h}):u(Ce,h,null):u("div",null,null)),D}),O=V(()=>a.touch===!1?a.touch:{...{left:()=>{y.value?R():q()},right:()=>{y.value?q():R()},start:P=>{let{originalEvent:h}=P;h.stopPropagation()}},...a.touch===!0?{}:a.touch});return ge(()=>Ca(u(a.tag,{ref:c,class:["v-window",{"v-window--show-arrows-on-hover":a.showArrows==="hover"},i.value,a.class],style:a.style},{default:()=>{var D,P;return[u("div",{class:"v-window__container",style:{height:m.value}},[(D=s.default)==null?void 0:D.call(s,{group:r}),a.showArrows!==!1&&u("div",{class:"v-window__controls"},[W.value])]),(P=s.additional)==null?void 0:P.call(s,{group:r})]}}),[[yl("touch"),O.value]])),{group:r}}}),Ki=he({...Pa(Ha(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Zi=fe()({name:"VTabsWindow",props:Ki(),emits:{"update:modelValue":a=>!0},setup(a,l){let{slots:s}=l;const i=Ia(Vt,null),n=ot(a,"modelValue"),o=V({get(){var r;return n.value!=null||!i?n.value:(r=i.items.value.find(c=>i.selected.value.includes(c.id)))==null?void 0:r.value},set(r){n.value=r}});return ge(()=>{const r=ya.filterProps(a);return u(ya,le({_as:"VTabsWindow"},r,{modelValue:o.value,"onUpdate:modelValue":c=>o.value=c,class:["v-tabs-window",a.class],style:a.style,mandatory:!1,touch:!1}),s)}),{}}}),Ua=he({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Se(),...bl(),..._l()},"VWindowItem"),pa=fe()({name:"VWindowItem",directives:{Touch:Na},props:Ua(),emits:{"group:selected":a=>!0},setup(a,l){let{slots:s}=l;const i=Ia(Wa),n=fl(a,Oa),{isBooted:o}=st();if(!i||!n)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const r=_e(!1),c=V(()=>o.value&&(i.isReversed.value?a.reverseTransition!==!1:a.transition!==!1));function y(){!r.value||!i||(r.value=!1,i.transitionCount.value>0&&(i.transitionCount.value-=1,i.transitionCount.value===0&&(i.transitionHeight.value=void 0)))}function v(){var b;r.value||!i||(r.value=!0,i.transitionCount.value===0&&(i.transitionHeight.value=Ae((b=i.rootRef.value)==null?void 0:b.clientHeight)),i.transitionCount.value+=1)}function I(){y()}function _(b){r.value&&Pt(()=>{!c.value||!r.value||!i||(i.transitionHeight.value=Ae(b.clientHeight))})}const m=V(()=>{const b=i.isReversed.value?a.reverseTransition:a.transition;return c.value?{name:typeof b!="string"?i.transition.value:b,onBeforeEnter:v,onAfterEnter:y,onEnterCancelled:I,onBeforeLeave:v,onAfterLeave:y,onLeaveCancelled:I,onEnter:_}:!1}),{hasContent:g}=hl(a,n.isSelected);return ge(()=>u(gl,{transition:m.value,disabled:!o.value},{default:()=>{var b;return[Ca(u("div",{class:["v-window-item",n.selectedClass.value,a.class],style:a.style},[g.value&&((b=s.default)==null?void 0:b.call(s))]),[[wl,n.isSelected.value]])]}})),{groupItem:n}}}),Ji=he({...Ua()},"VTabsWindowItem"),eo=fe()({name:"VTabsWindowItem",props:Ji(),setup(a,l){let{slots:s}=l;return ge(()=>{const i=pa.filterProps(a);return u(pa,le({_as:"VTabsWindowItem"},i,{class:["v-tabs-window-item",a.class],style:a.style}),s)}),{}}});function to(a){return a?a.map(l=>kl(l)?l:{text:l,value:l}):[]}const ao=he({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Pl({mandatory:"force",selectedClass:"v-tab-item--selected"}),...ba(),...Fe()},"VTabs"),lo=fe()({name:"VTabs",props:ao(),emits:{"update:modelValue":a=>!0},setup(a,l){let{attrs:s,slots:i}=l;const n=ot(a,"modelValue"),o=V(()=>to(a.items)),{densityClasses:r}=ga(a),{backgroundColorClasses:c,backgroundColorStyles:y}=Oe(oe(a,"bgColor")),{scopeId:v}=fa();return gt({VTab:{color:oe(a,"color"),direction:oe(a,"direction"),stacked:oe(a,"stacked"),fixed:oe(a,"fixedTabs"),sliderColor:oe(a,"sliderColor"),hideSlider:oe(a,"hideSlider")}}),ge(()=>{const I=ea.filterProps(a),_=!!(i.window||a.items.length>0);return u(K,null,[u(ea,le(I,{modelValue:n.value,"onUpdate:modelValue":m=>n.value=m,class:["v-tabs",`v-tabs--${a.direction}`,`v-tabs--align-tabs-${a.alignTabs}`,{"v-tabs--fixed-tabs":a.fixedTabs,"v-tabs--grow":a.grow,"v-tabs--stacked":a.stacked},r.value,c.value,a.class],style:[{"--v-tabs-height":Ae(a.height)},y.value,a.style],role:"tablist",symbol:Vt},v,s),{default:()=>{var m;return[((m=i.default)==null?void 0:m.call(i))??o.value.map(g=>{var b;return((b=i.tab)==null?void 0:b.call(i,{item:g}))??u(Ze,le(g,{key:g.text,value:g.value}),{default:i[`tab.${g.value}`]?()=>{var x;return(x=i[`tab.${g.value}`])==null?void 0:x.call(i,{item:g})}:void 0})})]}}),_&&u(Zi,le({modelValue:n.value,"onUpdate:modelValue":m=>n.value=m,key:"tabs-window"},v),{default:()=>{var m;return[o.value.map(g=>{var b;return((b=i.item)==null?void 0:b.call(i,{item:g}))??u(eo,{value:g.value},{default:()=>{var x;return(x=i[`item.${g.value}`])==null?void 0:x.call(i,{item:g})}})}),(m=i.window)==null?void 0:m.call(i)]}})])}),{}}}),io=["onClick"],oo={class:"main"},so={key:0,class:"main-media-details"},no={key:0,class:"main-media-details-image"},ro={class:"main-media-details-track-info"},uo={key:0},co={key:0},mo={key:11,style:{margin:"auto","padding-top":"20px"}},vo={key:1,class:"main-queue-items"},yo={class:"queue-items-scroll-box"},po={class:"media-thumb listitem-media-thumb"},fo={class:"d-flex"},ho={style:{"white-space":"nowrap"},class:"pr-1"},go={key:0},_o={key:0,style:{"margin-left":"50px"}},bo={key:0,class:"text-caption"},wo={key:1,class:"lyrics-wrapper"},Po={key:2,class:"main-queue-items"},ko={class:"main-media-details-image main-media-details-image-alt"},Co={class:"player-bottom"},Io={class:"row",style:{"margin-left":"5%","margin-right":"5%"}},$o={class:"media-controls"},Vo={key:0,class:"row",style:{"margin-left":"5%","margin-right":"5%"}},Qo={key:1,class:"row",style:{height:"70px",display:"flex","justify-content":"center","align-items":"center","padding-bottom":"15px","padding-top":"15px"}},So=G({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(a){const{name:l}=ft(),s=a,i=new ct,n=z(-1),o=new ct,r=z([]),c=z(0),y=z(!1),v=V(()=>t.activePlayerQueue?r.value.slice(t.activePlayerQueue.current_index):[]),I=V(()=>t.activePlayerQueue?r.value.slice(0,t.activePlayerQueue.current_index).reverse():[]),_=V(()=>{var F,N,j,H,Z,J;const w=(j=(N=(F=t.curQueueItem)==null?void 0:F.media_item)==null?void 0:N.metadata)==null?void 0:j.lyrics,f=(J=(Z=(H=t.curQueueItem)==null?void 0:H.media_item)==null?void 0:Z.metadata)==null?void 0:J.lrc_lyrics;return!!w&&w.trim().length>0||!!f&&f.trim().length>0}),m=V(()=>{switch(l.value){case"xs":return"1.2em";case"sm":return"1.6em";case"md":return"2em";case"lg":return t.showQueueItems?"1.5em":"2.5em";case"xl":return t.showQueueItems?"1.6em":"3em";case"xxl":return t.showQueueItems?"1.7em":"3.2em";default:return"1.0em."}}),g=V(()=>{switch(l.value){case"xs":return"1.0em";case"sm":return"1.2em";case"md":return"1.7em";case"lg":return t.showQueueItems?"1.0em":"1.6em";case"xl":return t.showQueueItems?"1.2em":"2em";case"xxl":return t.showQueueItems?"1.2em":"2em";default:return"1.0em."}}),b=V(()=>at.display.height.value>800),x=function(w){t.showFullscreenPlayer=!1,ta.push({name:w.media_type,params:{itemId:w.item_id,provider:w.provider}})},R=function(w){t.globalSearchTerm=w,ta.push({name:"search"}),t.showFullscreenPlayer=!1},q=function(w,f){var j,H,Z,J,ne,U,de;const F=r.value.indexOf(f),N=[{label:"play_now",labelArgs:[],action:()=>{O(f,"play_now")},icon:"mdi-play-circle-outline",disabled:F===((j=t.activePlayerQueue)==null?void 0:j.current_index)||F===((H=t.activePlayerQueue)==null?void 0:H.index_in_buffer)},{label:"play_next",labelArgs:[],action:()=>{O(f,"move_next")},icon:"mdi-skip-next-circle-outline",disabled:F<=(((Z=t.activePlayerQueue)==null?void 0:Z.index_in_buffer)||0)},{label:"queue_move_up",labelArgs:[],action:()=>{O(f,"up")},icon:"mdi-arrow-up",disabled:F<=(((J=t.activePlayerQueue)==null?void 0:J.index_in_buffer)||0)},{label:"queue_move_down",labelArgs:[],action:()=>{O(f,"down")},icon:"mdi-arrow-down",disabled:F<=(((ne=t.activePlayerQueue)==null?void 0:ne.index_in_buffer)||0)},{label:"queue_delete",labelArgs:[],action:()=>{O(f,"delete")},icon:"mdi-delete",disabled:F<=(((U=t.activePlayerQueue)==null?void 0:U.index_in_buffer)||0)}];((de=f==null?void 0:f.media_item)==null?void 0:de.media_type)==Y.TRACK&&N.push({label:"show_info",labelArgs:[],action:()=>{x(f.media_item)},icon:"mdi-information-outline",disabled:!1}),Me.emit("contextmenu",{items:N,posX:w.clientX,posY:w.clientY})},W=function(w){t.activePlayer&&Me.emit("contextmenu",{items:Hl(t.activePlayer,t.activePlayerQueue),posX:w.clientX,posY:w.clientY})},O=function(w,f){var F,N,j,H,Z;!w||!t.activePlayerQueue||(f=="play_now"?L.queueCommandPlayIndex((F=t.activePlayerQueue)==null?void 0:F.queue_id,w.queue_item_id):f=="move_next"?L.queueCommandMoveNext((N=t.activePlayerQueue)==null?void 0:N.queue_id,w.queue_item_id):f=="up"?L.queueCommandMoveUp((j=t.activePlayerQueue)==null?void 0:j.queue_id,w.queue_item_id):f=="down"?L.queueCommandMoveDown((H=t.activePlayerQueue)==null?void 0:H.queue_id,w.queue_item_id):f=="delete"&&L.queueCommandDelete((Z=t.activePlayerQueue)==null?void 0:Z.queue_id,w.queue_item_id))},D=async function(){y.value=!0,r.value=[],await aa(100),y.value=!1},P=async function({done:w}){var j;if(!t.activePlayerQueue||t.activePlayerQueue.items==0){w("empty");return}if(r.value.length>=((j=t.activePlayerQueue)==null?void 0:j.items)){w("empty");return}const f=r.value.length,F=(t.activePlayerQueue.current_index||0)+50,N=await L.getPlayerQueueItems(t.activePlayerQueue.queue_id,F,f);r.value.push(...N),N.length<50?w("empty"):w("ok")};Qe(()=>{const w=L.subscribe(Cl.QUEUE_ITEMS_UPDATED,f=>{var F;f.object_id==((F=t.activePlayerQueue)==null?void 0:F.queue_id)&&(f.data,D())});Ue(w)});const h=async function(w){var N;if(!((N=t.curQueueItem)!=null&&N.media_item))return;if(!t.curQueueItem.media_item.favorite){L.toggleFavorite(t.curQueueItem.media_item);return}let f=t.curQueueItem.media_item;(f.provider!="library"||!("provider_mappings"in f))&&[Y.ALBUM,Y.ARTIST,Y.AUDIOBOOK,Y.PLAYLIST,Y.PODCAST,Y.RADIO,Y.TRACK].includes(f.media_type)&&(f=await L.getLibraryItem(f.media_type,f.item_id,f.provider)||f);const F=[];"favorite"in f&&f.favorite&&f.provider=="library"&&[Y.ALBUM,Y.ARTIST,Y.AUDIOBOOK,Y.PLAYLIST,Y.PODCAST,Y.RADIO,Y.TRACK].includes(f.media_type)&&F.push({label:"favorites_remove",labelArgs:[],action:()=>{L.removeItemFromFavorites(f.media_type,f.item_id),f.favorite=!1,t.curQueueItem.media_item.favorite=!1},icon:"mdi-heart"}),[Y.ALBUM,Y.ARTIST,Y.AUDIOBOOK,Y.PLAYLIST,Y.PODCAST,Y.RADIO,Y.TRACK].includes(f.media_type)&&F.push({label:"add_playlist",labelArgs:[],action:()=>{Me.emit("playlistdialog",{items:[t.curQueueItem.media_item]})},icon:"mdi-plus-circle-outline"}),Me.emit("contextmenu",{items:F,posX:w.clientX,posY:w.clientY})},C=function(){y.value=!0,aa(100).then(()=>{y.value=!1})},T=function(w,f){L.playMedia(w.uri,Il.PLAY,void 0,f.position.toString())};ae(()=>t.activePlayerId,w=>{D()},{immediate:!0});const M=z(void 0),B=z(void 0);return mt(()=>{const w=Xe("white"),f=Xe("black"),F=5,N=.05,j=at.theme.current.value.dark?s.colorPalette.darkColor||"#000":s.colorPalette.lightColor||"#fff";let H=Xe(j);const Z=w.contrast(H),J=f.contrast(H),ne=Z>=J;let U=ne?w:f,de=Math.max(Z,J);if(de<F){let we=N;for(;de<F&&we<=.5;)ne?H=H.darken(N):H=H.lighten(N),de=Xe(U).contrast(H),we+=N}document.documentElement.style.setProperty("--text-color",U.hex()),M.value=U.hex(),B.value=H.hex()}),(w,f)=>(d(),S(Ta,{modelValue:e(t).showFullscreenPlayer,"onUpdate:modelValue":f[12]||(f[12]=F=>e(t).showFullscreenPlayer=F),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition","z-index":"9999"},{default:p(()=>[u(tt,{color:B.value},{default:p(()=>{var F,N,j,H,Z,J,ne,U,de,we,ze,Qt,St,Tt,xt,Lt,Mt,Bt,Et,At,Ft,zt,qt,Dt,Rt,Nt,Wt,Ot,Ht,Ut,Yt,Xt,Gt;return[u(Yl,{class:"v-toolbar-default",color:"transparent"},{prepend:p(()=>[u(be,{icon:"",onClick:f[0]||(f[0]=A=>e(t).showFullscreenPlayer=!1)},{default:p(()=>[u(se,{icon:"mdi-chevron-down"})]),_:1})]),append:p(()=>{var A;return[(A=e(t).activePlayerQueue)!=null&&A.radio_source.length?(d(),S(kt,{key:0,scrim:""},{activator:p(({props:ee})=>[u(be,le(ee,{icon:""}),{default:p(()=>[u(se,{color:"accent",icon:"mdi-radio-tower"})]),_:2},1040)]),default:p(()=>[u(tt,{title:e(te)("queue_radio_enabled"),subtitle:e(te)("queue_radio_based_on")},{text:p(()=>{var ee;return[(d(!0),k(K,null,ue((ee=e(t).activePlayerQueue)==null?void 0:ee.radio_source,ce=>(d(),k("div",{key:ce.uri},[E("a",{onClick:xe=>x(ce)},Q(ce.name),9,io)]))),128))]}),_:1},8,["title","subtitle"])]),_:1})):$("",!0),b.value?$("",!0):(d(),S(Ra,{key:1})),u(be,{icon:"",onClick:Ge(W,["stop"])},{default:p(()=>[u(se,{icon:"mdi-dots-vertical"})]),_:1})]}),_:1}),E("div",oo,[e(ie)("bp7")||!e(t).showQueueItems?(d(),k("div",so,[w.$vuetify.display.height>600?(d(),k("div",no,[((F=e(t).activePlayer)==null?void 0:F.powered)!=!1&&!((N=e(t).curQueueItem)!=null&&N.image)&&((H=(j=e(t).activePlayer)==null?void 0:j.current_media)!=null&&H.image_url)?(d(),S(Je,{key:0,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(t).activePlayer.current_media.image_url},null,8,["src"])):((Z=e(t).activePlayer)==null?void 0:Z.powered)!=!1?(d(),S(We,{key:1,item:e(t).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"},fallback:w.$vuetify.theme.current.dark?e(lt):e(ut)},null,8,["item","fallback"])):(d(),S(Je,{key:2,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:w.$vuetify.theme.current.dark?e(lt):e(ut)},null,8,["src"]))])):$("",!0),E("div",ro,[((J=e(t).activePlayer)==null?void 0:J.powered)==!1?(d(),S(qe,{key:0,style:re(`font-size: ${m.value};`)},{default:p(()=>{var A;return[X(Q((A=e(t).activePlayer)==null?void 0:A.display_name),1)]}),_:1},8,["style"])):(ne=e(t).curQueueItem)!=null&&ne.media_item?(d(),S(qe,{key:1,style:re(`font-size: ${m.value};cursor:pointer;`),onClick:f[1]||(f[1]=A=>x(e(t).curQueueItem.media_item))},{default:p(()=>[u(ye,{sync:e(i)},{default:p(()=>[X(Q(e(t).curQueueItem.media_item.name)+" ",1),"version"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.version?(d(),k("span",uo,"("+Q(e(t).curQueueItem.media_item.version)+")",1)):$("",!0)]),_:1},8,["sync"])]),_:1},8,["style"])):!e(t).activePlayerQueue&&((de=(U=e(t).activePlayer)==null?void 0:U.current_media)!=null&&de.title)?(d(),S(qe,{key:2},{default:p(()=>{var A,ee,ce,xe;return[(ee=(A=e(t).activePlayer)==null?void 0:A.current_media)!=null&&ee.artist?(d(),k("div",co,[u(ye,{sync:e(i)},{default:p(()=>{var Pe,ke;return[X(Q((ke=(Pe=e(t).activePlayer)==null?void 0:Pe.current_media)==null?void 0:ke.artist),1)]}),_:1},8,["sync"])])):$("",!0),(xe=(ce=e(t).activePlayer)==null?void 0:ce.current_media)!=null&&xe.title?(d(),k("div",{key:1,style:re(`font-size: ${g.value};`)},[u(ye,{sync:e(i)},{default:p(()=>{var Pe,ke;return[X(Q((ke=(Pe=e(t).activePlayer)==null?void 0:Pe.current_media)==null?void 0:ke.title),1)]}),_:1},8,["sync"])],4)):$("",!0)]}),_:1})):(d(),S(qe,{key:3,style:re(`font-size: ${m.value};cursor:pointer;`),onClick:f[2]||(f[2]=A=>e(t).showPlayersMenu=!0)},{default:p(()=>[u(ye,{sync:e(i)},{default:p(()=>{var A;return[X(Q(((A=e(t).activePlayer)==null?void 0:A.display_name)||e(te)("no_player")),1)]}),_:1},8,["sync"])]),_:1},8,["style"])),((we=e(t).activePlayer)==null?void 0:we.powered)==!1?(d(),S(Ie,{key:4,class:"text-h6 text-md-h5 text-lg-h4"},{default:p(()=>[X(Q(e(te)("off")),1)]),_:1})):$("",!0),(Qt=(ze=e(t).curQueueItem)==null?void 0:ze.streamdetails)!=null&&Qt.stream_title&&((St=e(t).activePlayer)==null?void 0:St.powered)!=!1?(d(),S(Ie,{key:5,class:"text-h6 text-md-h5 text-lg-h4",onClick:f[3]||(f[3]=A=>{var ee,ce;return R((ce=(ee=e(t).curQueueItem)==null?void 0:ee.streamdetails)==null?void 0:ce.stream_title)})},{default:p(()=>[u(ye,{sync:e(i)},{default:p(()=>[X(Q(e(t).curQueueItem.streamdetails.stream_title),1)]),_:1},8,["sync"])]),_:1})):$("",!0),(Tt=e(t).curQueueItem)!=null&&Tt.media_item&&"album"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.album&&((xt=e(t).activePlayer)==null?void 0:xt.powered)!=!1?(d(),S(Ie,{key:6,style:re(`font-size: ${g.value};cursor:pointer;`),onClick:f[4]||(f[4]=A=>x(e(t).curQueueItem.media_item.album))},{default:p(()=>[u(ye,{sync:e(i)},{default:p(()=>[X(Q(e(t).curQueueItem.media_item.album.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):$("",!0),(Lt=e(t).curQueueItem)!=null&&Lt.media_item&&"artists"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.artists.length&&((Mt=e(t).activePlayer)==null?void 0:Mt.powered)!=!1?(d(),S(Ie,{key:7,style:re(`font-size: ${g.value};cursor:pointer;`),onClick:f[5]||(f[5]=A=>x(e(t).curQueueItem.media_item.artists[0]))},{default:p(()=>[u(ye,{sync:e(i)},{default:p(()=>[X(Q(e(t).curQueueItem.media_item.artists[0].name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):$("",!0),(Bt=e(t).curQueueItem)!=null&&Bt.media_item&&"podcast"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.podcast?(d(),S(Ie,{key:8,style:re(`font-size: ${g.value};`)},{default:p(()=>[u(ye,{sync:e(i)},{default:p(()=>[X(Q(e(t).curQueueItem.media_item.podcast.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):e(t).activePlayer&&((Et=e(t).activePlayer)==null?void 0:Et.active_source)!=((At=e(t).activePlayer)==null?void 0:At.player_id)&&((Ft=e(t).activePlayer)==null?void 0:Ft.powered)!=!1?(d(),S(Ie,{key:9},{default:p(()=>[X(Q(e(te)("external_source_active",[e($a)(e(t).activePlayer)])),1)]),_:1})):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0&&((zt=e(t).activePlayer)==null?void 0:zt.powered)!=!1?(d(),S(Ie,{key:10,style:re(`font-size: ${g.value}`)},{default:p(()=>[X(Q(e(te)("queue_empty")),1)]),_:1},8,["style"])):$("",!0),((qt=e(t).activePlayer)==null?void 0:qt.powered)!=!1?(d(),k("div",mo,[u(Va)])):$("",!0)])])):$("",!0),e(t).showQueueItems?(d(),k("div",vo,[u(lo,{modelValue:c.value,"onUpdate:modelValue":f[6]||(f[6]=A=>c.value=A),"hide-slider":"",density:"compact",onClick:C},{default:p(()=>[u(Ze,{value:0},{default:p(()=>{var A,ee;return[X(Q(e(te)("queue"))+" ",1),u(dt,{color:"grey",content:(((A=e(t).activePlayerQueue)==null?void 0:A.items)||0)-(((ee=e(t).activePlayerQueue)==null?void 0:ee.current_index)||0),inline:""},null,8,["content"])]}),_:1}),u(Ze,{value:1},{default:p(()=>{var A;return[X(Q(e(te)("played"))+" ",1),u(dt,{color:"grey",content:(A=e(t).activePlayerQueue)==null?void 0:A.current_index,inline:""},null,8,["content"])]}),_:1}),_.value?(d(),S(Ze,{key:0,value:2},{default:p(()=>[X(Q(e(te)("lyrics")),1)]),_:1})):$("",!0)]),_:1},8,["modelValue"]),E("div",yo,[!y.value&&c.value!==2?(d(),S(Dl,{key:0,onLoad:P,"empty-text":"",height:"100%"},{default:p(()=>[u(Xl,{"item-height":70,"max-height":"90%",items:c.value==0?v.value:I.value},{default:p(({item:A,index:ee})=>{var ce,xe,Pe,ke,jt;return[u(Ol,{link:"","show-menu-btn":!0,disabled:!A.available,onClick:Ge(me=>q(me,A),["stop"]),onMenu:Ge(me=>q(me,A),["stop"]),onMouseenter:me=>n.value=ee,onMouseleave:f[7]||(f[7]=me=>n.value=-1)},{prepend:p(()=>[E("div",po,[u(We,{size:"50",item:A},null,8,["item"])])]),title:p(()=>[u(ye,{sync:ee==0&&c.value==0?e(i):e(o),disabled:!(ee==0&&c.value==0||n.value==ee)},{default:p(()=>[X(Q(A.name),1)]),_:2},1032,["sync","disabled"])]),subtitle:p(()=>[E("div",fo,[E("span",ho,Q(e(Re)(A.duration))+" | ",1),u(ye,{sync:ee==0&&c.value==0?e(i):e(o),disabled:!(ee==0&&c.value==0||n.value==ee)},{default:p(()=>[A.media_item&&"album"in A.media_item&&A.media_item.album?(d(),k("span",go,Q(A.media_item.album.name),1)):$("",!0)]),_:2},1032,["sync","disabled"])])]),append:p(()=>[A.available?$("",!0):(d(),S(se,{key:0},{default:p(()=>f[13]||(f[13]=[X("mdi-alert")])),_:1}))]),_:2},1032,["disabled","onClick","onMenu","onMouseenter"]),A.queue_item_id==((ce=e(t).curQueueItem)==null?void 0:ce.queue_item_id)&&((ke=(Pe=(xe=A.media_item)==null?void 0:xe.metadata)==null?void 0:Pe.chapters)!=null&&ke.length)?(d(),k("div",_o,[(d(!0),k(K,null,ue((jt=A.media_item.metadata)==null?void 0:jt.chapters,me=>(d(),S(Ve,{key:me.position,onClick:Ge($s=>T(A.media_item,me),["stop"])},{title:p(()=>[E("div",null,Q(me.name),1)]),append:p(()=>[me.end?(d(),k("span",bo,Q(e(Re)(me.end-me.start)),1)):$("",!0)]),_:2},1032,["onClick"]))),128))])):$("",!0)]}),_:1},8,["items"])]),_:1})):$("",!0),c.value===2?(d(),k("div",wo,[u(Ni,{"media-item":(Dt=e(t).curQueueItem)==null?void 0:Dt.media_item,position:(Rt=e(t).activePlayerQueue)==null?void 0:Rt.elapsed_time,duration:(Nt=e(t).curQueueItem)==null?void 0:Nt.duration,"stream-details":(Wt=e(t).curQueueItem)==null?void 0:Wt.streamdetails,"text-color":M.value},null,8,["media-item","position","duration","stream-details","text-color"])])):$("",!0)])])):$("",!0),!e(t).showQueueItems&&w.$vuetify.display.height<=600?(d(),k("div",Po,[E("div",ko,[u(We,{item:e(t).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"}},null,8,["item"])])])):$("",!0)]),E("div",Co,[E("div",Io,[u(Ba,{"show-labels":!0,color:M.value},null,8,["color"])]),E("div",$o,[e(t).activePlayerQueue?(d(),S(Te,{key:0,disabled:!((Ot=e(t).curQueueItem)!=null&&Ot.media_item),icon:(Ut=(Ht=e(t).curQueueItem)==null?void 0:Ht.media_item)!=null&&Ut.favorite?"mdi-heart":"mdi-heart-outline",title:e(te)("tooltip.favorite"),type:"btn",class:"media-controls-item","max-height":"30px",onClick:h},null,8,["disabled","icon","title"])):$("",!0),w.$vuetify.display.mdAndUp?(d(),S(Aa,{key:1,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"30px"},null,8,["player-queue"])):$("",!0),u(za,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),u(Fa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"100px"},null,8,["player","player-queue"]),u(qa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),w.$vuetify.display.mdAndUp?(d(),S(Ea,{key:2,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"35px"},null,8,["player-queue"])):$("",!0),e(t).activePlayerQueue?(d(),S(Da,{key:3,class:"media-controls-item","max-height":"30px"})):$("",!0)]),e(t).activePlayer?(d(),k("div",Vo,[u($t,{width:"100%","is-powered":((Yt=e(t).activePlayer)==null?void 0:Yt.powered)!=!1,disabled:!e(t).activePlayer||!((Xt=e(t).activePlayer)!=null&&Xt.available),"model-value":Math.round(((Gt=e(t).activePlayer)==null?void 0:Gt.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus",color:M.value,"allow-wheel":!0,"onUpdate:modelValue":f[8]||(f[8]=A=>e(t).activePlayer.group_childs.length>0?e(L).playerCommandGroupVolume(e(t).activePlayerId,A):e(L).playerCommandVolumeSet(e(t).activePlayerId,A)),"onClick:prepend":f[9]||(f[9]=A=>e(t).activePlayer.group_childs.length>0?e(L).playerCommandGroupVolumeDown(e(t).activePlayerId):e(L).playerCommandVolumeDown(e(t).activePlayerId)),"onClick:append":f[10]||(f[10]=A=>e(t).activePlayer.group_childs.length>0?e(L).playerCommandGroupVolumeUp(e(t).activePlayerId):e(L).playerCommandVolumeUp(e(t).activePlayerId))},null,8,["is-powered","disabled","model-value","color"])])):$("",!0),b.value?(d(),k("div",Qo,[u(Ce,{class:"responsive-icon-holder-btn",variant:"outlined",onClick:f[11]||(f[11]=A=>e(t).showPlayersMenu=!0)},{default:p(()=>{var A;return[u(se,{icon:((A=e(t).activePlayer)==null?void 0:A.icon)||"mdi-speaker"},null,8,["icon"]),X(" "+Q(e(t).activePlayer?e(Qa)(e(t).activePlayer):""),1)]}),_:1})])):$("",!0)])]}),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),To=pe(So,[["__scopeId","data-v-94562cb0"]]),xo={key:1},Lo={key:2,class:"icon-thumb"},Mo={key:0},Bo={key:2},Eo={key:3},Ao={key:4},Fo={key:0,class:"pl-4"},zo={key:0},qo={key:1},Do={key:2},Ro={key:3},No={key:4,class:"line-clamp-1"},Wo={key:5,class:"line-clamp-1"},Oo={key:6},Ho={key:7,class:"line-clamp-1"},Uo={key:8,class:"line-clamp-1"},Yo={key:0},Xo=G({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(a){const l=new ct,s=a,i=V(()=>{var n,o;return(o=(n=t.activePlayerQueue)==null?void 0:n.current_item)==null?void 0:o.streamdetails});return(n,o)=>(d(),k(K,null,[u(Ve,{style:{height:"auto",width:"fit-content",margin:"0px",padding:"0px"},lines:"two"},{prepend:p(()=>{var r,c,y,v,I,_,m,g,b,x;return[E("div",{class:"media-thumb player-media-thumb",style:re(`cursor: pointer;height: ${e(ie)({breakpoint:"phone"})?50:64}px; width: ${e(ie)({breakpoint:"phone"})?50:64}px; `),onClick:o[0]||(o[0]=R=>e(t).showFullscreenPlayer=!0)},[((r=e(t).activePlayer)==null?void 0:r.powered)!=!1&&((c=e(t).curQueueItem)!=null&&c.media_item||(y=e(t).curQueueItem)!=null&&y.image)?(d(),S(We,{key:0,item:((v=e(t).curQueueItem)==null?void 0:v.media_item)||e(t).curQueueItem,fallback:e(lt)},null,8,["item","fallback"])):((I=e(t).activePlayer)==null?void 0:I.powered)!=!1&&((m=(_=e(t).activePlayer)==null?void 0:_.current_media)!=null&&m.image_url)?(d(),k("div",xo,[u(Je,{class:"media-thumb",style:{"border-radius":"4px"},size:"55",src:e(t).activePlayer.current_media.image_url},null,8,["src"])])):(d(),k("div",Lo,[u(se,{size:"35",icon:((g=e(t).activePlayer)==null?void 0:g.type)==e(Ke).PLAYER&&((b=e(t).activePlayer)!=null&&b.group_childs.length)?"mdi-speaker-multiple":((x=e(t).activePlayer)==null?void 0:x.icon)||"mdi-speaker",style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))],4)]}),title:p(()=>{var r,c,y,v,I,_;return[E("div",{style:re({cursor:"pointer",color:n.primaryColor})},[((r=e(t).activePlayer)==null?void 0:r.powered)==!1?(d(),k("div",{key:0,onClick:o[1]||(o[1]=m=>e(t).showPlayersMenu=!0)},Q((c=e(t).activePlayer)==null?void 0:c.display_name),1)):(y=e(t).curQueueItem)!=null&&y.media_item?(d(),k("div",{key:1,onClick:o[2]||(o[2]=m=>e(t).showFullscreenPlayer=!0)},[u(ye,{sync:e(l)},{default:p(()=>[X(Q(e(t).curQueueItem.media_item.name)+" ",1),"version"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.version?(d(),k("span",Mo,"("+Q(e(t).curQueueItem.media_item.version)+")",1)):$("",!0)]),_:1},8,["sync"])])):e(t).curQueueItem?(d(),k("div",Bo,Q(e(t).curQueueItem.name),1)):!e(t).activePlayerQueue&&((I=(v=e(t).activePlayer)==null?void 0:v.current_media)!=null&&I.title)?(d(),k("div",Eo,Q(e(t).activePlayer.current_media.title),1)):e(t).activePlayer?(d(),k("div",Ao,Q((_=e(t).activePlayer)==null?void 0:_.display_name),1)):(d(),k("div",{key:5,onClick:o[3]||(o[3]=m=>e(t).showPlayersMenu=!0)},Q(n.$t("no_player")),1))],4)]}),append:p(()=>{var r;return[(r=i.value)!=null&&r.audio_format.content_type&&!e(ie)({breakpoint:"phone"})&&n.showQualityDetailsBtn?(d(),k("div",Fo,[u(Va)])):$("",!0)]}),subtitle:p(()=>{var r;return[E("div",{style:re({cursor:"pointer",color:n.primaryColor}),class:"line-clamp-1",onClick:o[4]||(o[4]=c=>e(t).showFullscreenPlayer=!0)},[u(ye,{sync:e(l)},{default:p(()=>{var c,y,v,I,_,m,g,b,x,R,q,W,O,D,P;return[((c=e(t).activePlayer)==null?void 0:c.powered)==!1?(d(),k("div",zo,Q(n.$t("off")),1)):e(t).curQueueItem&&((y=e(t).curQueueItem.media_item)==null?void 0:y.media_type)==e(Y).TRACK&&"album"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.album&&!s.showOnlyArtist?(d(),k("div",qo,Q(e($l)(e(t).curQueueItem.media_item.artists))+" • "+Q(e(t).curQueueItem.media_item.album.name),1)):(v=e(t).curQueueItem)!=null&&v.media_item&&"artists"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.artists.length>0?(d(),k("div",Do,Q(e(t).curQueueItem.media_item.artists[0].name),1)):(I=e(t).curQueueItem)!=null&&I.media_item&&"podcast"in e(t).curQueueItem.media_item&&((_=e(t).curQueueItem.media_item.podcast)!=null&&_.name)?(d(),k("div",Ro,Q(e(t).curQueueItem.media_item.podcast.name),1)):(g=(m=e(t).curQueueItem)==null?void 0:m.streamdetails)!=null&&g.stream_title?(d(),k("div",No,Q((x=(b=e(t).curQueueItem)==null?void 0:b.streamdetails)==null?void 0:x.stream_title),1)):(q=(R=e(t).curQueueItem)==null?void 0:R.media_item)!=null&&q.metadata.description?(d(),k("div",Wo,Q(e(Vl)(e(t).curQueueItem.media_item.metadata.description,100)),1)):!e(t).activePlayerQueue&&((W=e(t).activePlayer)!=null&&W.active_source)&&((D=(O=e(t).activePlayer)==null?void 0:O.current_media)!=null&&D.artist)?(d(),k("div",Oo,Q(e(t).activePlayer.current_media.artist),1)):!e(t).activePlayerQueue&&((P=e(t).activePlayer)!=null&&P.active_source)?(d(),k("div",Ho,Q(n.$t("external_source_active",[e($a)(e(t).activePlayer)])),1)):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(d(),k("div",Uo,Q(n.$t("queue_empty")),1)):$("",!0)]}),_:1},8,["sync"]),e(t).activePlayer&&((r=e(t).activePlayer)==null?void 0:r.powered)!=!1?(d(),k("div",Yo,Q(e(Qa)(e(t).activePlayer)),1)):$("",!0)],4)]}),_:1}),u(To,{"show-fullscreen":e(t).showFullscreenPlayer,"color-palette":n.colorPalette},null,8,["show-fullscreen","color-palette"])],64))}}),Go={key:0},jo={key:0},Ko={class:"text-caption"},Zo={key:1},Jo=G({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(a){const l=a,s=z(!1);return(i,n)=>l.isVisible&&e(t).activePlayer?(d(),k("div",Go,[u(kt,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=o=>s.value=o),class:"volume-control-dialog","close-on-content-click":!1,location:"top",scrim:i.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:p(({props:o})=>{var r,c;return[e(ie)("bp6")||!i.responsiveVolumeSize?(d(),k("div",jo,[u($t,{style:"margin-right: 0px; margin-left: 0px;",width:i.volumeSize,"is-powered":!0,"model-value":e(t).activePlayer.group_childs.length>0?Math.round(((r=e(t).activePlayer)==null?void 0:r.group_volume)||0):Math.round(((c=e(t).activePlayer)==null?void 0:c.volume_level)||0),"allow-wheel":!0,"onUpdate:modelValue":n[0]||(n[0]=y=>{var v,I;return e(t).activePlayer.group_childs.length>0?e(L).playerCommandGroupVolume(((v=e(t).activePlayer)==null?void 0:v.player_id)||"",y):e(L).playerCommandVolumeSet(((I=e(t).activePlayer)==null?void 0:I.player_id)||"",y)})},{prepend:p(()=>[u(be,le({variant:"icon",size:"48",ripple:!1},{...o}),{default:p(()=>{var y,v;return[u(se,{color:l.color?i.color:"",size:24,icon:"mdi-volume-high"},null,8,["color"]),E("div",Ko,Q(e(t).activePlayer.group_childs.length>0?Math.round(((y=e(t).activePlayer)==null?void 0:y.group_volume)||0):Math.round(((v=e(t).activePlayer)==null?void 0:v.volume_level)||0)),1)]}),_:2},1040)]),_:2},1032,["width","model-value"])])):(d(),k("div",Zo,[u(be,le({...o},{size:"48",variant:"icon"}),{default:p(()=>{var y,v;return[u(se,{color:l.color?i.color:"",icon:"mdi-volume-high"},null,8,["color"]),E("div",{class:"text-caption",style:re({color:l.color?i.color:""})},Q(e(t).activePlayer.group_childs.length>0?Math.round(((y=e(t).activePlayer)==null?void 0:y.group_volume)||0):Math.round(((v=e(t).activePlayer)==null?void 0:v.volume_level)||0)),5)]}),_:2},1040)]))]}),default:p(()=>[u(tt,{"min-width":300,style:{overflow:"hidden","padding-top":"20px","padding-bottom":"20px","padding-right":"20px"}},{default:p(()=>[e(t).activePlayer?(d(),S(Ul,{key:0,player:e(t).activePlayer,"show-sub-players":!0,"show-sync-controls":!1,"show-heading-row":!0,"show-volume-control":!0,"allow-wheel":!0,style:{"margin-left":"18px"}},null,8,["player"])):$("",!0)]),_:1})]),_:1},8,["modelValue","scrim"])])):$("",!0)}}),es=pe(Jo,[["__scopeId","data-v-f4084555"]]),ts=G({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(a){return(l,s)=>(d(),k(K,null,[l.player&&l.player.isVisible?(d(),S(Ra,{key:0,color:l.player.color},null,8,["color"])):$("",!0),l.queue&&l.queue.isVisible?(d(),S(Da,{key:1,color:l.player.color,style:{"padding-left":"15px","padding-right":"20px"}},null,8,["color"])):$("",!0),l.volume&&l.volume.isVisible?(d(),S(es,{key:2,color:l.volume.color,"volume-size":l.volume.volumeSize,"responsive-volume-size":l.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):$("",!0)],64))}}),as=["data-floating"],ls=["data-mobile"],is={class:"mediacontrols-left"},os={class:"mediacontrols-bottom-center"},ss={class:"mediacontrols-bottom-right"},ns={key:0,class:"volume-slider"},rs=G({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(a){wa(o=>({"4978018a":n.value})),ha();const{mobile:l}=ft({mobileBreakpoint:576}),s=z({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),i=new Image;i.src=at.theme.current.value.dark?lt:ut,i.crossOrigin="Anonymous",i.addEventListener("load",function(){s.value=Ql(i)});const n=V(()=>at.theme.current.value.dark?s.value&&s.value.darkColor?s.value.darkColor+"26":"CCCCCC26":s.value&&s.value.lightColor?s.value.lightColor+"26":"CCCCCC26");return ae(()=>{var o;return(o=t.curQueueItem)==null?void 0:o.queue_item_id},()=>{var o;(o=t.curQueueItem)!=null&&o.media_item?i.src=ia(t.curQueueItem.media_item,oa.THUMB)||"":t.curQueueItem?i.src=ia(t.curQueueItem,oa.THUMB)||"":i.src=""}),(o,r)=>{var c,y,v,I,_,m,g,b,x,R,q;return d(),k(K,null,[E("div",{class:"mediacontrols-bg","data-floating":o.useFloatingPlayer},null,8,as),E("div",{class:"mediacontrols","data-mobile":e(l)},[E("div",is,[u(Xo,{"show-quality-details-btn":!!e(ie)("bp8"),"show-only-artist":!e(ie)("bp7"),"color-palette":s.value,"primary-color":o.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])]),E("div",os,[u(va,{"visible-components":{repeat:{isVisible:e(ie)("bp3")},shuffle:{isVisible:e(ie)("bp3")},play:{isVisible:!0,icon:{staticWidth:"50px",staticHeight:"50px"},withCircle:o.useFloatingPlayer},previous:{isVisible:e(ie)("bp3")},next:{isVisible:e(ie)("bp3")}}},null,8,["visible-components"]),e(ie)("bp6")?(d(),S(Ba,{key:0,"is-progress-bar":!1,disabled:!((c=e(t).activePlayerQueue)!=null&&c.active)||((I=(v=(y=e(t).activePlayerQueue)==null?void 0:y.current_item)==null?void 0:v.media_item)==null?void 0:I.media_type)!==e(Y).TRACK},null,8,["disabled"])):$("",!0)]),E("div",ss,[E("div",null,[u(ts,{queue:{isVisible:e(ie)("bp3"),color:o.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:o.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!e(l)&&(((_=e(t).activePlayer)==null?void 0:_.volume_control)!=e(la)||((m=e(t).activePlayer)==null?void 0:m.group_childs.length)>0),color:o.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),u(va,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:e(ie)({breakpoint:"bp3",condition:"lt"}),withCircle:!1,icon:{staticWidth:"40px",staticHeight:"40px",color:o.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])],8,ls),e(l)&&(((g=e(t).activePlayer)==null?void 0:g.volume_control)!=e(la)||((b=e(t).activePlayer)==null?void 0:b.group_childs.length)>0)?(d(),k("div",ns,[u($t,{width:"100%",color:"secondary","is-powered":((x=e(t).activePlayer)==null?void 0:x.powered)!=!1,disabled:!e(t).activePlayer||!((R=e(t).activePlayer)!=null&&R.available),"model-value":Math.round(((q=e(t).activePlayer)==null?void 0:q.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":r[0]||(r[0]=W=>e(t).activePlayer.group_childs.length>0?e(L).playerCommandGroupVolume(e(t).activePlayerId,W):e(L).playerCommandVolumeSet(e(t).activePlayerId,W)),"onClick:prepend":r[1]||(r[1]=W=>e(t).activePlayer.group_childs.length>0?e(L).playerCommandGroupVolumeDown(e(t).activePlayerId):e(L).playerCommandVolumeDown(e(t).activePlayerId)),"onClick:append":r[2]||(r[2]=W=>e(t).activePlayer.group_childs.length>0?e(L).playerCommandGroupVolumeUp(e(t).activePlayerId):e(L).playerCommandVolumeUp(e(t).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):$("",!0)],64)}}}),us=pe(rs,[["__scopeId","data-v-e7d0fafb"]]),ds=he({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...wt(),...Se(),...bt(),...It(),..._t(),...Fe({tag:"footer"}),...Ye()},"VFooter"),cs=fe()({name:"VFooter",props:ds(),setup(a,l){let{slots:s}=l;const i=z(),{themeClasses:n}=it(a),{backgroundColorClasses:o,backgroundColorStyles:r}=Oe(oe(a,"color")),{borderClasses:c}=yt(a),{elevationClasses:y}=pt(a),{roundedClasses:v}=ht(a),I=_e(32),{resizeRef:_}=Sl(g=>{g.length&&(I.value=g[0].target.clientHeight)}),m=V(()=>a.height==="auto"?I.value:parseInt(a.height,10));return De(()=>a.app,()=>{const g=Ct({id:a.name,order:V(()=>parseInt(a.order,10)),position:V(()=>"bottom"),layoutSize:m,elementSize:V(()=>a.height==="auto"?void 0:m.value),active:V(()=>a.app),absolute:oe(a,"absolute")});mt(()=>{i.value=g.layoutItemStyles.value})}),ge(()=>u(a.tag,{ref:_,class:["v-footer",n.value,o.value,c.value,y.value,v.value,a.class],style:[r.value,a.app?i.value:{height:Ae(a.height)},a.style]},s)),{}}}),ms=G({__name:"Footer",setup(a){const l=V(()=>t.navigationMenuStyle=="horizontal"),s=V(()=>t.navigationMenuStyle!="horizontal"?0:t.isInStandaloneMode?100:80),i=V(()=>l.value?s.value+5:0);return(n,o)=>(d(),k(K,null,[l.value?(d(),k("div",{key:0,class:He(n.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:re(`
      position: fixed;
      width: 100%;
      height: ${s.value+(e(ie)("bp3")?100:70)}px;
      bottom: 0px;
      z-index: 999;
    `)},null,6)):$("",!0),e(t).navigationMenuStyle=="horizontal"?(d(),S(bi,{key:1,height:s.value},null,8,["height"])):$("",!0),u(cs,{bottom:"",fixed:"",class:He(`d-flex flex-column ${l.value?"mediacontrols-player-float":"mediacontrols-player-default"}`),style:re(`bottom: ${i.value}px;`),elevation:"10",app:""},{default:p(()=>[u(us,{"use-floating-player":l.value},null,8,["use-floating-player"])]),_:1},8,["class","style"])],64))}}),vs={style:{float:"right","margin-right":"-20px"}},ys=G({__name:"PlayerSelect",setup(a){const l=z(!1),s=z(null),i=V(()=>Object.values(L.players).filter(c=>sa(c)).filter(c=>c.player_id!==$e.player_id).sort((c,y)=>{var v;return c.display_name.toUpperCase()>((v=y.display_name)==null?void 0:v.toUpperCase())?1:-1}));ae(()=>t.activePlayerId,c=>{c&&localStorage.setItem("mass.LastPlayerId",c)}),ae(()=>L.players,c=>{c&&!t.activePlayer&&o()},{deep:!0}),ae(()=>L.state,c=>{c.value!=xl.CONNECTED&&(t.activePlayerId=void 0)},{deep:!0});function n(c,y=!1){t.activePlayerId==c.player_id?l.value=!l.value:(l.value=!1,t.activePlayerId=c.player_id),y&&(t.showPlayersMenu=!1)}Qe(()=>{o()});const o=function(){if(t.activePlayer&&sa(t.activePlayer))return;const c=r();c&&(t.activePlayerId=c)},r=function(){const c=localStorage.getItem("mass.LastPlayerId");if(c&&c in L.players&&L.players[c].available)return c};return(c,y)=>(d(),k(K,null,[u(Sa,{modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":y[0]||(y[0]=v=>e(t).showPlayersMenu=v)},null,8,["modelValue"]),e(t).showPlayersMenu?(d(),S(La,{key:0,modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":y[4]||(y[4]=v=>e(t).showPlayersMenu=v),location:"right",app:"",clipped:"",temporary:"",width:460,style:{"z-index":"99999"},"z-index":"99999"},{default:p(()=>[E("div",null,[u(qe,{class:"title",style:{"padding-top":"20px","padding-bottom":"20px"}},{default:p(()=>[E("b",null,Q(c.$t("players")),1),E("div",vs,[u(be,{variant:"icon",to:{name:"playersettings"}},{default:p(()=>[u(se,{size:"30"},{default:p(()=>y[5]||(y[5]=[X("mdi-cog-outline")])),_:1})]),_:1}),u(be,{variant:"icon",onClick:y[1]||(y[1]=v=>e(t).showPlayersMenu=!1)},{default:p(()=>[u(se,{size:"30"},{default:p(()=>y[6]||(y[6]=[X("mdi-window-close")])),_:1})]),_:1})])]),_:1}),u(et),u(Be,{flat:"",style:{margin:"0px 15px 5px 15px"}},{default:p(()=>[e($e).mode===e(Tl).BUILTIN&&e($e).player_id&&e(L).players[e($e).player_id]?(d(),S(je,{key:0,id:e($e).player_id,player:e(L).players[e($e).player_id],"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":!1,"show-sync-controls":!1,"allow-power-control":!0,onClick:y[2]||(y[2]=v=>n(e(L).players[e($e).player_id]))},null,8,["id","player"])):$("",!0),(d(!0),k(K,null,ue(i.value.filter(v=>{var I;return[e(rt).PLAYING,e(rt).PAUSED].includes(v.state)||((I=e(L).queues[v.player_id])==null?void 0:I.items)>0&&v.powered!=!1}),v=>(d(),S(je,{id:v.player_id,key:v.player_id,player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":l.value&&v.player_id==e(t).activePlayerId,"show-sync-controls":v.supported_features.includes(e(Ne).SET_MEMBERS),"allow-power-control":!0,onClick:I=>n(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1}),u(Gl,{modelValue:s.value,"onUpdate:modelValue":y[3]||(y[3]=v=>s.value=v),variant:"accordion",flat:"",class:"expansion"},{default:p(()=>[u(na,{style:{padding:"0"}},{default:p(()=>[u(ra,null,{default:p(()=>[E("h3",null,Q(c.$t("all_players")),1)]),_:1}),u(ua,{style:{padding:"0"}},{default:p(()=>[u(Be,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:p(()=>[(d(!0),k(K,null,ue(i.value.filter(v=>v.type!=e(Ke).GROUP),v=>(d(),S(je,{id:v.player_id,key:v.player_id,player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":l.value&&v.player_id==e(t).activePlayerId,"show-sync-controls":v.supported_features.includes(e(Ne).SET_MEMBERS),"allow-power-control":!0,onClick:I=>n(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1}),i.value.filter(v=>v.type==e(Ke).GROUP).length?(d(),S(na,{key:0,style:{padding:"0"}},{default:p(()=>[u(ra,null,{default:p(()=>[E("h3",null,Q(c.$t("all_groups")),1)]),_:1}),u(ua,{style:{padding:"0"}},{default:p(()=>[u(Be,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:p(()=>[(d(!0),k(K,null,ue(i.value.filter(v=>v.type==e(Ke).GROUP),v=>(d(),S(je,{id:v.player_id,key:v.player_id,player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":l.value&&v.player_id==e(t).activePlayerId,"show-sync-controls":v.supported_features.includes(e(Ne).SET_MEMBERS),"allow-power-control":!0,onClick:I=>n(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1})):$("",!0)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])):$("",!0)],64))}}),ps=pe(ys,[["__scopeId","data-v-a66c8412"]]);function fs(a={}){const{immediate:l=!1,onNeedRefresh:s,onOfflineReady:i,onRegistered:n,onRegisteredSW:o,onRegisterError:r}=a;let c,y,v;const I=async(m=!0)=>{await y,v==null||v()};async function _(){if("serviceWorker"in navigator){if(c=await Ll(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:m}},[],import.meta.url).then(({Workbox:m})=>new m("./sw.js",{scope:"./",type:"classic"})).catch(m=>{r==null||r(m)}),!c)return;v=()=>{c==null||c.messageSkipWaiting()};{let m=!1;const g=()=>{m=!0,c==null||c.addEventListener("controlling",b=>{b.isUpdate&&window.location.reload()}),s==null||s()};c.addEventListener("installed",b=>{typeof b.isUpdate>"u"?typeof b.isExternal<"u"&&b.isExternal?g():!m&&(i==null||i()):b.isUpdate||i==null||i()}),c.addEventListener("waiting",g)}c.register({immediate:l}).then(m=>{o?o("./sw.js",m):n==null||n(m)}).catch(m=>{r==null||r(m)})}}return y=_(),I}function hs(a={}){const{immediate:l=!0,onNeedRefresh:s,onOfflineReady:i,onRegistered:n,onRegisteredSW:o,onRegisterError:r}=a,c=z(!1),y=z(!1);return{updateServiceWorker:fs({immediate:l,onNeedRefresh(){c.value=!0,s==null||s()},onOfflineReady(){y.value=!0,i==null||i()},onRegistered:n,onRegisteredSW:o,onRegisterError:r}),offlineReady:y,needRefresh:c}}const gs={key:0,class:"pwa-toast",role:"alert"},_s={class:"message"},bs={key:0},ws={key:1},Ps=G({__name:"ReloadPrompt",setup(a){const{offlineReady:l,needRefresh:s,updateServiceWorker:i}=hs(),n=async()=>{l.value=!1,s.value=!1};return(o,r)=>e(l)||e(s)?(d(),k("div",gs,[E("div",_s,[e(l)?(d(),k("span",bs," App ready to work offline ")):(d(),k("span",ws," New content available, click on reload button to update. "))]),e(s)?(d(),k("button",{key:0,onClick:r[0]||(r[0]=c=>e(i)())},"Reload")):$("",!0),E("button",{onClick:n},"Close")])):$("",!0)}}),ks=he({...Se(),...Fl({fullHeight:!0}),...Ye()},"VApp"),Cs=fe()({name:"VApp",props:ks(),setup(a,l){let{slots:s}=l;const i=it(a),{layoutClasses:n,getLayoutItem:o,items:r,layoutRef:c}=Al(a),{rtlClasses:y}=vt();return ge(()=>{var v;return u("div",{ref:c,class:["v-application",i.themeClasses.value,n.value,y.value,a.class],style:[a.style]},[u("div",{class:"v-application__wrap"},[(v=s.default)==null?void 0:v.call(s)])])}),{getLayoutItem:o,items:r,theme:i}}}),Is=G({__name:"Default",setup(a){const l=Ml();return ae([()=>l.query.player,()=>Object.keys(L.players).length],([s])=>{var o;if(!s)return;const i=s.toString().toLowerCase(),n=(o=Object.values(L.players).find(r=>r.player_id.toLowerCase()===i||r.display_name.toLowerCase()===i))==null?void 0:o.player_id;n&&(t.activePlayerId=n)},{immediate:!0}),ae(()=>l.query.showFullscreenPlayer,s=>{t.showFullscreenPlayer=!!s},{immediate:!0}),ae(()=>l.query.frameless,s=>{s&&(t.frameless=!0)},{immediate:!0}),(s,i)=>(d(),k(K,null,[e(t).connected?(d(),S(Cs,{key:0},{default:p(()=>[e(t).frameless?(d(),S(ma,{key:0})):(d(),k(K,{key:1},[u(ps),u(ms),u(ma)],64))]),_:1})):(d(),S(Sa,{key:1,class:"centeredoverlay",persistent:"","model-value":!e(t).connected},{default:p(()=>[E("div",null,[u(xa,{color:"primary",indeterminate:"",size:"64"})])]),_:1},8,["model-value"])),e(t).isInStandaloneMode?(d(),S(Ps,{key:2})):$("",!0)],64))}}),Us=pe(Is,[["__scopeId","data-v-33a00054"]]);export{Us as default};
