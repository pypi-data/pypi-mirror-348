(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{3213:function(e,r,t){Promise.resolve().then(t.bind(t,9988))},9988:function(e,r,t){"use strict";t.r(r);var a=t(7821),s=t(9164),l=t(3153),n=t(6712),i=t(1736),o=t(7558),u=t(5231),c=t(1853),d=t(4089),p=t(8504),m=t(8078),f=t(746),h=t(9912);let b=()=>{var e;let r=(0,p.useRouter)(),[t,b]=(0,m.useState)(!1),y=(null===(e=(0,p.useSearchParams)().get("external"))||void 0===e?void 0:e.toLocaleLowerCase())==="true",v=h.z.string({required_error:"Veuillez renseigner votre adresse email"}).email({message:"Veuillez renseigner une adresse email valide"});y||(v=v.regex(new RegExp(/^[\w\-.]*@(((etu(-enise)?|enise)\.)?ec-lyon\.fr|centraliens-lyon\.net)$/),{message:"Veuillez utiliser une adresse email centralienne"}));let j=h.z.object({email:v}),g=(0,f.cI)({resolver:(0,d.F)(j)});async function w(e){try{b(!0);let t=await (0,s.ZiC)({body:{email:e.email,accept_external:y}});if(b(!1),t.response.status<300){r.push("/register/success");return}(0,c.Am)({title:"Erreur",description:t.error.detail,variant:"destructive"})}catch(e){b(!1),(0,c.Am)({title:"Erreur",description:"".concat(e),variant:"destructive"})}}return(0,a.jsx)(l.G,{title:"Cr\xe9er un compte",description:"Vous n'avez besoin que de votre email pour commencer",children:(0,a.jsx)(o.l0,{...g,children:(0,a.jsx)("form",{onSubmit:g.handleSubmit(w),children:(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsx)(n.T,{form:g,name:"email",label:"Email",render:e=>(0,a.jsx)(u.I,{placeholder:"prenom.nom@etu.ec-lyon.fr",...e})}),(0,a.jsx)(i.f,{className:"mt-2 w-full",type:"submit",label:"Commencer \xe0 cr\xe9er le compte",isLoading:t})]})})})})};r.default=()=>(0,a.jsx)(m.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(b,{})})},4397:function(e,r,t){"use strict";t.d(r,{Lp:function(){return j},eI:function(){return v}});let a=/\{[^{}]+\}/g,s=({allowReserved:e,name:r,value:t})=>{if(null==t)return"";if("object"==typeof t)throw Error("Deeply-nested arrays/objects arenâ€™t supported. Provide your own `querySerializer()` to handle these.");return`${r}=${e?t:encodeURIComponent(t)}`},l=({allowReserved:e,explode:r,name:t,style:a,value:l})=>{if(!r){let r=(e?l:l.map(e=>encodeURIComponent(e))).join((e=>{switch(e){case"form":default:return",";case"pipeDelimited":return"|";case"spaceDelimited":return"%20"}})(a));switch(a){case"label":return`.${r}`;case"matrix":return`;${t}=${r}`;case"simple":return r;default:return`${t}=${r}`}}let n=(e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}})(a),i=l.map(r=>"label"===a||"simple"===a?e?r:encodeURIComponent(r):s({allowReserved:e,name:t,value:r})).join(n);return"label"===a||"matrix"===a?n+i:i},n=({allowReserved:e,explode:r,name:t,style:a,value:l})=>{if("deepObject"!==a&&!r){let r=[];Object.entries(l).forEach(([t,a])=>{r=[...r,t,e?a:encodeURIComponent(a)]});let s=r.join(",");switch(a){case"form":return`${t}=${s}`;case"label":return`.${s}`;case"matrix":return`;${t}=${s}`;default:return s}}let n=(e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}})(a),i=Object.entries(l).map(([r,l])=>s({allowReserved:e,name:"deepObject"===a?`${t}[${r}]`:r,value:l})).join(n);return"label"===a||"matrix"===a?n+i:i},i=({allowReserved:e,array:r,object:t}={})=>a=>{let i=[];if(a&&"object"==typeof a)for(let o in a){let u=a[o];null!=u&&(i=Array.isArray(u)?[...i,l({allowReserved:e,explode:!0,name:o,style:"form",value:u,...r})]:"object"!=typeof u?[...i,s({allowReserved:e,name:o,value:u})]:[...i,n({allowReserved:e,explode:!0,name:o,style:"deepObject",value:u,...t})])}return i.join("&")},o=({baseUrl:e,path:r,query:t,querySerializer:i,url:o})=>{let u=e+(o.startsWith("/")?o:`/${o}`);r&&(u=(({path:e,url:r})=>{let t=r,i=r.match(a);if(i)for(let r of i){let a=!1,i=r.substring(1,r.length-1),o="simple";i.endsWith("*")&&(a=!0,i=i.substring(0,i.length-1)),i.startsWith(".")?(i=i.substring(1),o="label"):i.startsWith(";")&&(i=i.substring(1),o="matrix");let u=e[i];null!=u&&(t=Array.isArray(u)?t.replace(r,l({explode:a,name:i,style:o,value:u})):"object"!=typeof u?"matrix"!==o?t.replace(r,"label"===o?`.${u}`:u):t.replace(r,`;${s({name:i,value:u})}`):t.replace(r,n({explode:a,name:i,style:o,value:u})))}return t})({path:r,url:u}));let c=t?i(t):"";return c.startsWith("?")&&(c=c.substring(1)),c&&(u+=`?${c}`),u},u=(...e)=>{let r=new Headers;for(let t of e)if(t&&"object"==typeof t)for(let[e,a]of t instanceof Headers?t.entries():Object.entries(t))if(null===a)r.delete(e);else if(Array.isArray(a))for(let t of a)r.append(e,t);else void 0!==a&&r.set(e,"object"==typeof a?JSON.stringify(a):a);return r};class c{_fns;constructor(){this._fns=[]}eject(e){let r=this._fns.indexOf(e);-1!==r&&(this._fns=[...this._fns.slice(0,r),...this._fns.slice(r+1)])}use(e){this._fns=[...this._fns,e]}}let d=()=>({request:new c,response:new c}),p={bodySerializer:e=>JSON.stringify(e)},m=i({allowReserved:!1,array:{explode:!0,style:"form"},object:{explode:!0,style:"deepObject"}}),f={"Content-Type":"application/json"},h=()=>({...p,baseUrl:"",fetch:globalThis.fetch,global:!0,headers:f,parseAs:"auto",querySerializer:m}),b=h(),y=d(),v=e=>{let r=h(),t={...r,...e};t.baseUrl?.endsWith("/")&&(t.baseUrl=t.baseUrl.substring(0,t.baseUrl.length-1)),t.headers=u(r.headers,t.headers),t.global&&(b={...t});let a=()=>t.root?b:t,s=t.global?y:d(),l=async e=>{let r=a(),t={...r,...e,headers:u(r.headers,e.headers)};t.body&&t.bodySerializer&&(t.body=t.bodySerializer(t.body)),t.body||t.headers.delete("Content-Type");let l=new Request(o({baseUrl:t.baseUrl??"",path:t.path,query:t.query,querySerializer:"function"==typeof t.querySerializer?t.querySerializer:i(t.querySerializer),url:t.url}),{redirect:"follow",...t});for(let e of s.request._fns)l=await e(l,t);let n=t.fetch,c=await n(l);for(let e of s.response._fns)c=await e(c,l,t);let d={request:l,response:c};if(204===c.status||"0"===c.headers.get("Content-Length"))return c.ok?{data:{},...d}:{error:{},...d};if(c.ok){if("stream"===t.parseAs)return{data:c.body,...d};let e=("auto"===t.parseAs?(e=>{if(e)return"application/json"===e||e.endsWith("+json")?"json":"multipart/form-data"===e?"formData":["application/octet-stream","application/pdf","application/zip","audio/","image/","video/"].some(r=>e.includes(r))?"blob":e.includes("text/")?"text":void 0})(c.headers.get("Content-Type")):t.parseAs)??"json",r=await c[e]();return"json"===e&&t.responseTransformer&&(r=await t.responseTransformer(r)),{data:r,...d}}let p=await c.text();try{p=JSON.parse(p)}catch{}return{error:p,...d}};return{connect:e=>l({...e,method:"CONNECT"}),delete:e=>l({...e,method:"DELETE"}),get:e=>l({...e,method:"GET"}),getConfig:a,head:e=>l({...e,method:"HEAD"}),interceptors:s,options:e=>l({...e,method:"OPTIONS"}),patch:e=>l({...e,method:"PATCH"}),post:e=>l({...e,method:"POST"}),put:e=>l({...e,method:"PUT"}),request:l,trace:e=>l({...e,method:"TRACE"})}},j=v({...b,root:!0})}},function(e){e.O(0,[322,807,282,37,164,115,364,744],function(){return e(e.s=3213)}),_N_E=e.O()}]);