import os
from pybuild import Pybuild1, InstallDir, File
from pybuild.info import P


class Package(Pybuild1):
    NAME = "Test"
    KEYWORDS = "test"
    LICENSE = "test"
    DESC = "test desc"
    HOMEPAGE = "https://example.org"
    RDEPEND = "test/test"
    IUSE = "alias1 alias2"

    INSTALL_DIRS = [InstallDir(".", FILES=[File("Bar", OVERRIDES="Foo")])]

    CONFIG = {"TestSection": {"TestKey2": "TestValue2"}}

    def src_prepare(self):
        os.mkdir(P)
        with open(os.path.join(P, "Bar"), "w") as file:
            print("test", file=file)
