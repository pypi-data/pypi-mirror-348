image: python:latest-slim

stages:
  - release

pypi:
  stage: release
  script:
    - pip install twine build
    - python -m build --sdist --outdir dist
    - twine upload --verbose --non-interactive --repository pypi dist/* -u __token__ -p $TWINE
  rules:
    - if: $CI_COMMIT_TAG
