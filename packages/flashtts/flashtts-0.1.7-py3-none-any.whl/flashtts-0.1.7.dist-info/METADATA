Metadata-Version: 2.4
Name: flashtts
Version: 0.1.7
Summary: A Fast TTS toolkit
Home-page: https://github.com/HuiResearch/FlashTTS
Author: HuangHui
Author-email: m13021933043@163.com
License: MIT
Keywords: flashtts,tts,sparktts,spark-tts,megatts3,orpheus-tts,vllm,sglang,llama-cpp
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: einops
Requires-Dist: einx
Requires-Dist: omegaconf
Requires-Dist: soundfile
Requires-Dist: soxr
Requires-Dist: transformers
Requires-Dist: fastapi
Requires-Dist: uvicorn
Requires-Dist: httpx
Requires-Dist: snac
Requires-Dist: av
Requires-Dist: librosa
Requires-Dist: pyloudnorm
Requires-Dist: openai-whisper
Requires-Dist: python-multipart
Requires-Dist: WeTextProcessing==1.0.4.1
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: keywords
Dynamic: license
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

<div align="center">
  <img src="docs/zh/_img/icon.png" width="450" alt="FlashTTS Logo"/>

[ğŸ“˜ Documentation](docs/zh/README.MD) | [ğŸ“š Deepwiki](https://deepwiki.com/HuiResearch/FlashTTS)

[ä¸­æ–‡](README.MD) | [English](README_EN.MD)

</div>

---

# FlashTTS

> åŸºäº **SparkTTSã€OrpheusTTSã€MegaTTS&nbsp;3** ç­‰å…ˆè¿›æ¨¡å‹ï¼ŒFlashTTS æä¾›é«˜è´¨é‡çš„ä¸­æ–‡è¯­éŸ³åˆæˆä¸é›¶æ ·æœ¬å£°éŸ³å…‹éš†æœåŠ¡ã€‚å€ŸåŠ©ç®€æ´ç›´è§‚çš„
> Web ç•Œé¢ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿç”Ÿæˆè‡ªç„¶é€¼çœŸçš„äººå£°ï¼Œæ»¡è¶³é…éŸ³ã€é˜…è¯»ã€æ— éšœç¢ã€è™šæ‹Ÿè§’è‰²ç­‰å¤šå…ƒåœºæ™¯éœ€æ±‚ã€‚

> å¦‚æœ FlashTTS å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç•™ä¸‹ä¸€ä¸ª â­ Starï¼

## âœ¨ åŠŸèƒ½äº®ç‚¹

|     | åŠŸèƒ½          | è¯´æ˜                                                                |
|-----|-------------|-------------------------------------------------------------------|
| ğŸš€  | **å¤šåç«¯æ¨ç†åŠ é€Ÿ** | æ”¯æŒ `vllm`ã€`sglang`ã€`llamaâ€‘cpp`ã€`mlxâ€‘lm`ã€`tensorrt-llm` ç­‰å¤šç§é«˜æ€§èƒ½æ¨ç†å¼•æ“ |
| ğŸ¯  | **é«˜å¹¶å‘**     | åŠ¨æ€æ‰¹å¤„ç†ä¸å¼‚æ­¥é˜Ÿåˆ—ï¼Œè½»æ¾åº”å¯¹å¤§æµé‡è¯·æ±‚                                              |
| ğŸ›ï¸ | **å…¨å‚æ•°æ§åˆ¶**   | å¯è°ƒèŠ‚éŸ³è°ƒã€è¯­é€Ÿã€æ¸©åº¦ã€æƒ…æ„Ÿæ ‡ç­¾ç­‰                                                 |
| ğŸ“±  | **è½»é‡éƒ¨ç½²**    | åŸºäº FastAPIï¼Œä¸€æ¡å‘½ä»¤å³å¯å¯åŠ¨ï¼›æœ€å°ä¾èµ–                                          |
| ğŸ”Š  | **é•¿æ–‡æœ¬åˆæˆ**   | æ”¯æŒè¶…é•¿æ–‡æœ¬ï¼Œä¿æŒè¿ç»­éŸ³è‰²ä¸€è‡´                                                   |
| ğŸ”„  | **æµå¼ TTS**  | è¾¹ç”Ÿæˆè¾¹æ’­æ”¾ï¼Œé™ä½ç­‰å¾…ï¼Œæé«˜äº¤äº’ä½“éªŒ                                                |
| ğŸ­  | **å¤šè§’è‰²å¯¹è¯**   | åŒæ–‡æœ¬å¤šè§’è‰²åˆæˆï¼Œé€‚åˆå‰§æœ¬é…éŸ³                                                   |
| ğŸ¨  | **ç°ä»£åŒ–å‰ç«¯**   | é€‚é…Webç«¯                                                            |

## ğŸ–¼ï¸ å‰ç«¯ç¤ºä¾‹

https://github.com/user-attachments/assets/1bd9d586-fac7-4016-b955-5a58d8fb9d7e

## ğŸ”ˆ è¯­éŸ³æ¼”ç¤º

ä¸‹åˆ— Demo å±•ç¤ºäº† FlashTTS åœ¨ä¸åŒæ¨¡å‹ä¸è§’è‰²ä¸Šçš„å…‹éš†æ•ˆæœã€‚

### SparkTTS æ¨¡å‹

<table>
<tr>
<td align="center">

**Donald Trump en**
</td>
<td align="center">

**Donald Trump zh**
</td>
</tr>

<tr>
<td align="center">

[Donald Trump en](https://github.com/user-attachments/assets/79d4d1d1-5579-4ddb-8092-500b3db05d45)

</td>
<td align="center">

[Donald Trump zh](https://github.com/user-attachments/assets/262f4306-4a0f-4735-b4e7-708cd3193324)

</td>
</tr>
</table>

<table>
<tr>
<td align="center">

**å“ªå’**
</td>
<td align="center">

**æé–**
</td>
</tr>

<tr>
<td align="center">

[å“ªå’](https://github.com/user-attachments/assets/4743778b-63c7-4c42-95b2-636828364d67)

</td>
<td align="center">

[æé–](https://github.com/user-attachments/assets/b5a51fa9-c5a1-4f39-bbf8-09e73b2c1936)

</td>
</tr>
</table>

<table>
<tr>
<td align="center">

**ä½™æ‰¿ä¸œ**
</td>
<td align="center">

**å¾å¿—èƒœ**
</td>
</tr>

<tr>
<td align="center">

[ä½™æ‰¿ä¸œ](https://github.com/user-attachments/assets/1cd5f156-010d-4bc9-8e99-f37def54b99f)

</td>
<td align="center">

[å¾å¿—èƒœ](https://github.com/user-attachments/assets/f197ac39-5928-4ead-83d7-071b1bf5f974)

</td>
</tr>
</table>

### MegaTTS&nbsp;3 æ¨¡å‹

<table>
<tr>
<td align="center">

**è”¡å¾å¤**
</td>
<td align="center">

**å¤ªä¹™çœŸäºº**
</td>
</tr>

<tr>
<td align="center">

[è”¡å¾å¤](https://github.com/user-attachments/assets/bcb48ead-f157-45d7-8060-cbccf418f0ed)

</td>
<td align="center">

[å¤ªä¹™çœŸäºº](https://github.com/user-attachments/assets/73edbd6b-ece3-4e22-95a2-53b7c4e45346)

</td>
</tr>
</table>

### OrpheusTTS (zh) æ¨¡å‹

<table>
<tr>
<td align="center">

**é•¿ä¹**
</td>
<td align="center">

**ç™½èŠ·**
</td>
</tr>

<tr>
<td align="center">

[é•¿ä¹](https://github.com/user-attachments/assets/271bd5a3-dd56-430a-87d0-ebea0e397a89)

</td>
<td align="center">

[ç™½èŠ·](https://github.com/user-attachments/assets/e012c580-840f-401c-99f5-665c72f6b89f)

</td>
</tr>
</table>

## å¿«é€Ÿå¼€å§‹

å»ºè®®åœ¨ **python 3.8 - 3.12** ç¯å¢ƒä¸­ä½¿ç”¨ pip å®‰è£… `flashtts`ï¼š

```bash
pip install flashtts
```

è¯¦ç»†å®‰è£…æ­¥éª¤ï¼Œè¯·å‚è€ƒï¼š[installation.md](docs/zh/get_started/installation.md)

æœ¬åœ°æ¨ç†ï¼š
```bash
flashtts infer \
  -i "ä½ å¥½ï¼Œæ¬¢è¿ä½¿ç”¨è¯­éŸ³åˆæˆã€‚" \
  -o output.wav \
  -m ./models/your_model \
  -b vllm \
  [å…¶ä»–å¯é€‰å‚æ•°]
```

è¯¦ç»†ä½¿ç”¨è¯´æ˜ï¼Œè¯·å‚è€ƒï¼š[quick_start.md](docs/zh/get_started/quick_start.md)

éƒ¨ç½²æ–¹å¼ï¼š
```bash
 flashtts serve \
 --model_path Spark-TTS-0.5B \ 
 --backend vllm \ 
 --role_dir data/roles \ 
 --llm_device cuda \
 --tokenizer_device cuda \
 --detokenizer_device cuda \
 --wav2vec_attn_implementation sdpa \
 --llm_attn_implementation sdpa \ 
 --torch_dtype "bfloat16" \ 
 --max_length 32768 \
 --llm_gpu_memory_utilization 0.6 \
 --fix_voice \  # å¯åŠ¨åå°†å›ºå®šä½spark-ttsä¸­å†…ç½®éŸ³è‰²ï¼ˆfemaleå’Œmaleï¼‰
 --host 0.0.0.0 \
 --port 8000
 ```
webåœ°å€ï¼š`http://localhost:8000`

æ¥å£æ–‡æ¡£åœ°å€ï¼š`http://localhost:8000/docs`

è¯¦ç»†éƒ¨ç½²è¯´æ˜ï¼Œè¯·å‚è€ƒï¼š[server.md](docs/zh/server/server.md)
    
## âš¡ æ¨ç†é€Ÿåº¦

æµ‹è¯•ç¯å¢ƒï¼š`A800 GPU` Â· æ¨¡å‹ï¼š`Spark-TTSâ€‘0.5B` Â· æµ‹è¯•è„šæœ¬ï¼š[speed_test.py](examples/speed_test.py)

| åœºæ™¯  |    å¼•æ“     | è®¾å¤‡  | éŸ³é¢‘é•¿åº¦ (s) | æ¨ç†è€—æ—¶ (s) | RTF  |
|:---:|:---------:|:---:|:--------:|:--------:|:----:|
| çŸ­æ–‡æœ¬ | llamaâ€‘cpp | CPU |   7.48   |   6.81   | 0.91 |
| çŸ­æ–‡æœ¬ |   torch   | GPU |   7.18   |   7.68   | 1.07 |
| çŸ­æ–‡æœ¬ |   vllm    | GPU |   7.24   |   1.66   | 0.23 |
| çŸ­æ–‡æœ¬ |  sglang   | GPU |   7.58   |   1.07   | 0.14 |
| é•¿æ–‡æœ¬ | llamaâ€‘cpp | CPU |  121.98  |  117.83  | 0.97 |
| é•¿æ–‡æœ¬ |   torch   | GPU |  113.70  |  107.17  | 0.94 |
| é•¿æ–‡æœ¬ |   vllm    | GPU |  111.82  |   7.28   | 0.07 |
| é•¿æ–‡æœ¬ |  sglang   | GPU |  117.02  |   4.20   | 0.04 |

> **RTF < 1** è¡¨ç¤ºå®æ—¶åˆæˆã€‚

## âš™ï¸ ä½¿ç”¨æç¤º

1. **SparkTTS** æƒé‡éœ€ä½¿ç”¨ `bfloat16` æˆ– `float32`ï¼›`float16` ä¼šæŠ¥é”™ã€‚
2. è‹¥é‡åˆ°é•¿æ—¶é—´ç©ºç™½éŸ³ï¼Œå¯å°† `repetition_penalty` è°ƒé«˜ (> 1.0)ã€‚
3. **OrpheusTTS** æ”¯æŒåœ¨æ–‡æœ¬ä¸­æ’å…¥ `<tag>` æ§åˆ¶æƒ…æ„Ÿï¼Œæ ‡ç­¾è§ [`orpheus_engine.py`](flashtts/engine/orpheus_engine.py) ä¸­
   `LANG_MAP`ã€‚
4. å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œ**MegaTTS&nbsp;3** æœªå…¬å¼€ WaveVAE
   ç¼–ç å™¨ï¼Œè¯·å‚è€ƒå®˜æ–¹è¯´æ˜ä¸‹è½½ï¼š[å‚è€ƒéŸ³é¢‘](https://drive.google.com/drive/folders/1QhcHWcy20JfqWjgqZX1YM3I6i9u4oNlr)ã€‚

## ğŸ¤ é¸£è°¢

- [Sparkâ€‘TTS](https://github.com/SparkAudio/Spark-TTS)
- [Orpheusâ€‘TTS](https://github.com/canopyai/Orpheus-TTS)
- [MegaTTS&nbsp;3](https://github.com/bytedance/MegaTTS3)

## âš ï¸ å…è´£å£°æ˜

FlashTTS ä»…ä¾›å­¦æœ¯ç ”ç©¶ã€æ•™è‚²ä¸åˆæ³•ç”¨é€”ï¼Œå¦‚æ— éšœç¢è¾…åŠ©ã€ä¸ªæ€§åŒ–è¯­éŸ³åˆæˆç­‰ã€‚è¯·å‹¿å°†å…¶ç”¨äºæ¬ºè¯ˆã€å†’å……ã€æ·±åº¦ä¼ªé€ ç­‰è¿æ³•åœºæ™¯ã€‚è¿è€…è‡ªè¡Œæ‰¿æ‹…æ³•å¾‹ä¸é“å¾·è´£ä»»ã€‚

## License

æœ¬é¡¹ç›®æ²¿ç”¨ Sparkâ€‘TTS çš„åè®®ï¼Œè¯¦æƒ…å‚è§ [LICENSE](https://github.com/SparkAudio/Spark-TTS/blob/main/LICENSE)ã€‚

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=HuiResearch/FlashTTS&type=Date)](https://www.star-history.com/#HuiResearch/FlashTTS&Date)
