{"version":3,"file":"40908.d3f8026efa374002.js","sources":["https://raw.githubusercontent.com/home-assistant/frontend/20250516.0/src/common/color/colors.ts","https://raw.githubusercontent.com/home-assistant/frontend/20250516.0/src/common/entity/context/get_entity_context.ts","https://raw.githubusercontent.com/home-assistant/frontend/20250516.0/src/components/chart/ha-sankey-chart.ts","https://raw.githubusercontent.com/home-assistant/frontend/20250516.0/src/components/trace/hat-graph-const.ts","https://raw.githubusercontent.com/home-assistant/frontend/20250516.0/src/data/recorder.ts","https://raw.githubusercontent.com/home-assistant/frontend/20250516.0/src/mixins/subscribe-mixin.ts","https://raw.githubusercontent.com/home-assistant/frontend/20250516.0/src/panels/lovelace/cards/energy/hui-energy-sankey-card.ts","https://raw.githubusercontent.com/home-assistant/frontend/20250516.0/src/util/text.ts"],"names":["COLORS","getColorByIndex","index","length","getGraphColorByIndex","style","themeColor","getPropertyValue","theme2hex","getAllGraphColors","memoizeOne","map","_color","newArgs","lastArgs","getEntityContext","stateObj","hass","entry","entities","entity_id","getEntityEntryContext","entity","device","area","floor","deviceId","device_id","devices","undefined","areaId","area_id","areas","floorId","floor_id","floors","OVERFLOW_MARGIN","FONT_SIZE","NODE_GAP","LABEL_DISTANCE","HaSankeyChart","LitElement","render","options","grid","top","bottom","left","right","tooltip","trigger","formatter","this","_renderTooltip","appendTo","document","body","html","_createData","data","_sizeController","value","width","SankeyChart","_processLinks","nodes","rawLinks","accountedIn","Map","accountedOut","links","forEach","link","sourceNode","find","n","id","source","targetNode","target","sourceAccounted","get","targetAccounted","sourceRemaining","targetRemaining","Math","min","set","push","args","vertical","ResizeController","callback","entries","contentRect","params","valueFormatter","node","marker","label","filteredNodes","filter","indexes","Set","depthMap","sort","i","labelSpace","NODE_SIZE","type","itemStyle","color","depth","draggable","orient","nodeWidth","nodeGap","lineStyle","opacity","layoutIterations","position","distance","minMargin","overflow","labelLayout","longestWord","text","split","reduce","longest","current","wordWidth","measureTextWidth","fontSize","rect","align","lineCount","ceil","labelRect","height","lineHeight","emphasis","focus","styles","css","attribute","Boolean","String","SPACING","BRANCH_HEIGHT","StatisticMeanType","STATISTIC_TYPES","getRecorderInfo","conn","sendMessagePromise","getStatisticIds","statistic_type","callWS","getStatisticMetadata","statistic_ids","fetchStatistics","startTime","endTime","period","units","types","start_time","toISOString","end_time","fetchStatistic","statistic_id","fixed_period","start","Date","end","calendar","rolling_window","validateStatistics","updateStatisticsMetadata","unit_of_measurement","clearStatistics","calculateStatisticSumGrowth","values","growth","change","calculateStatisticsSumGrowth","stats","totalGrowth","stat","statGrowth","statisticsHaveType","some","mean_stat_types","sum_stat_types","statisticsMetaHasType","metadata","includes","mean_type","has_sum","adjustStatisticsSum","adjustment","adjustment_unit_of_measurement","start_time_iso","getStatisticLabel","statisticsId","statisticsMetaData","states","computeStateName","name","getDisplayUnit","unit","attributes","statistics_unit_of_measurement","isExternalStatistic","updateStatisticsIssues","SubscribeMixin","superClass","SubscribeClass","connectedCallback","super","_checkSubscribed","disconnectedCallback","__unsubs","unsub","pop","Promise","then","unsubFunc","updated","changedProps","has","hassSubscribeRequiredHostProps","key","keys","hassSubscribe","isConnected","prop","DEFAULT_CONFIG","group_by_floor","group_by_area","HuiEnergySankeyCard","setConfig","config","_config","getEnergyDataCollection","collection_key","subscribe","_data","getCardSize","getGridOptions","columns","min_columns","rows","min_rows","shouldUpdate","nothing","localize","prefs","energySourcesByType","summedData","compareSummedData","_","getSummedData","computedStyle","getComputedStyle","homeNode","totalFromGrid","total","from_grid","formatNumber","locale","solar","totalSolarProduction","sum","battery","netBattery","from_battery","to_battery","netBatteryOut","max","netBatteryIn","flow_to","totalToGrid","to_grid","untrackedConsumption","deviceNodes","device_consumption","idx","stat_consumption","statsMetadata","_groupByFloorAndArea","Object","a","b","level","Infinity","floorNodeId","targetNodeId","areaNodeId","deviceNode","hasData","title","layout","_valueFormatter","no_area","no_floor","unshift","textMeasureCanvas","fontFamily","createElement","context","getContext","font","textMetrics","measureText","actualBoundingBoxRight","actualBoundingBoxLeft"],"mappings":"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"}