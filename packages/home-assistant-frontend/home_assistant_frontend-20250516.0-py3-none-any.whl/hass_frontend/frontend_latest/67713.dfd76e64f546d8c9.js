export const __webpack_ids__=["67713"];export const __webpack_modules__={58125:function(e,t,i){i.d(t,{wZ:()=>r,jL:()=>s,sU:()=>d});i(81738),i(94814),i(6989);var o=i(28105),a=i(15459);i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761);const s=e=>(e.name_by_user||e.name)?.trim(),r=(e,t,i)=>s(e)||i&&n(t,i)||t.localize("ui.panel.config.devices.unnamed_device",{type:t.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)}),n=(e,t)=>{for(const i of t||[]){const t="string"==typeof i?i:i.entity_id,o=e.states[t];if(o)return(0,a.C)(o)}},d=(0,o.Z)((e=>function(e){const t=new Set,i=new Set;for(const o of e)i.has(o)?t.add(o):i.add(o);return t}(Object.values(e).map((e=>s(e))).filter((e=>void 0!==e)))))},6439:function(e,t,i){i(81738),i(33480),i(94814),i(6989),i(72489);var o=i(73742),a=i(59048),s=i(26292),r=i(28105),n=i(39884),d=i(58125),l=i(44272),c=i(36221),h=i(56795),p=i(28905);i(81205),i(12692);const u=e=>a.dy` <ha-combo-box-item type="button"> <span slot="headline">${e.name}</span> ${e.area?a.dy`<span slot="supporting-text">${e.area}</span>`:a.Ld} </ha-combo-box-item> `;class v extends a.oi{async open(){await this.updateComplete,await(this.comboBox?.open())}async focus(){await this.updateComplete,await(this.comboBox?.focus())}updated(e){if(!this._init&&this.hass||this._init&&e.has("_opened")&&this._opened){this._init=!0;const e=this._getDevices(Object.values(this.hass.devices),this.hass.areas,Object.values(this.hass.entities),this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.excludeDevices);this.comboBox.items=e,this.comboBox.filteredItems=e}}render(){return a.dy` <ha-combo-box .hass="${this.hass}" .label="${void 0===this.label&&this.hass?this.hass.localize("ui.components.device-picker.device"):this.label}" .value="${this._value}" .helper="${this.helper}" .renderer="${u}" .disabled="${this.disabled}" .required="${this.required}" item-id-path="id" item-value-path="id" item-label-path="name" @opened-changed="${this._openedChanged}" @value-changed="${this._deviceChanged}" @filter-changed="${this._filterChanged}"></ha-combo-box> `}get _value(){return this.value||""}_filterChanged(e){const t=e.target,i=e.detail.value.toLowerCase();t.filteredItems=i.length?(0,h.q)(i,t.items||[]):t.items}_deviceChanged(e){e.stopPropagation();let t=e.detail.value;"no_devices"===t&&(t=""),t!==this._value&&this._setValue(t)}_openedChanged(e){this._opened=e.detail.value}_setValue(e){this.value=e,setTimeout((()=>{(0,n.B)(this,"value-changed",{value:e}),(0,n.B)(this,"change")}),0)}constructor(...e){super(...e),this.disabled=!1,this.required=!1,this._init=!1,this._getDevices=(0,r.Z)(((e,t,i,o,a,s,r,n,h)=>{if(!e.length)return[{id:"no_devices",area:"",name:this.hass.localize("ui.components.device-picker.no_devices"),strings:[]}];let u={};(o||a||s||n)&&(u=(0,p.R6)(i));let v=e.filter((e=>e.id===this.value||!e.disabled_by));o&&(v=v.filter((e=>{const t=u[e.id];return!(!t||!t.length)&&u[e.id].some((e=>o.includes((0,l.M)(e.entity_id))))}))),a&&(v=v.filter((e=>{const t=u[e.id];return!t||!t.length||i.every((e=>!a.includes((0,l.M)(e.entity_id))))}))),h&&(v=v.filter((e=>!h.includes(e.id)))),s&&(v=v.filter((e=>{const t=u[e.id];return!(!t||!t.length)&&u[e.id].some((e=>{const t=this.hass.states[e.entity_id];return!!t&&(t.attributes.device_class&&s.includes(t.attributes.device_class))}))}))),n&&(v=v.filter((e=>{const t=u[e.id];return!(!t||!t.length)&&t.some((e=>{const t=this.hass.states[e.entity_id];return!!t&&n(t)}))}))),r&&(v=v.filter((e=>e.id===this.value||r(e))));const _=v.map((e=>{const i=(0,d.wZ)(e,this.hass,u[e.id]);return{id:e.id,name:i||this.hass.localize("ui.components.device-picker.unnamed_device"),area:e.area_id&&t[e.area_id]?t[e.area_id].name:this.hass.localize("ui.components.device-picker.no_area"),strings:[i||""]}}));return _.length?1===_.length?_:_.sort(((e,t)=>(0,c.$K)(e.name||"",t.name||"",this.hass.locale.language))):[{id:"no_devices",area:"",name:this.hass.localize("ui.components.device-picker.no_match"),strings:[]}]}))}}(0,o.__decorate)([(0,s.Cb)({attribute:!1})],v.prototype,"hass",void 0),(0,o.__decorate)([(0,s.Cb)()],v.prototype,"label",void 0),(0,o.__decorate)([(0,s.Cb)()],v.prototype,"value",void 0),(0,o.__decorate)([(0,s.Cb)()],v.prototype,"helper",void 0),(0,o.__decorate)([(0,s.Cb)({type:Array,attribute:"include-domains"})],v.prototype,"includeDomains",void 0),(0,o.__decorate)([(0,s.Cb)({type:Array,attribute:"exclude-domains"})],v.prototype,"excludeDomains",void 0),(0,o.__decorate)([(0,s.Cb)({type:Array,attribute:"include-device-classes"})],v.prototype,"includeDeviceClasses",void 0),(0,o.__decorate)([(0,s.Cb)({type:Array,attribute:"exclude-devices"})],v.prototype,"excludeDevices",void 0),(0,o.__decorate)([(0,s.Cb)({attribute:!1})],v.prototype,"deviceFilter",void 0),(0,o.__decorate)([(0,s.Cb)({attribute:!1})],v.prototype,"entityFilter",void 0),(0,o.__decorate)([(0,s.Cb)({type:Boolean})],v.prototype,"disabled",void 0),(0,o.__decorate)([(0,s.Cb)({type:Boolean})],v.prototype,"required",void 0),(0,o.__decorate)([(0,s.SB)()],v.prototype,"_opened",void 0),(0,o.__decorate)([(0,s.IO)("ha-combo-box",!0)],v.prototype,"comboBox",void 0),v=(0,o.__decorate)([(0,s.Mo)("ha-device-picker")],v)},41037:function(e,t,i){i(81738),i(22960);var o=i(73742),a=i(59048),s=i(26292),r=i(83054);i(12066),i(39765);class n extends a.oi{get items(){return this._menu?.items}get selected(){return this._menu?.selected}focus(){this._menu?.open?this._menu.focusItemAtIndex(0):this._triggerButton?.focus()}render(){return a.dy` <div @click="${this._handleClick}"> <slot name="trigger" @slotchange="${this._setTriggerAria}"></slot> </div> <ha-menu .corner="${this.corner}" .menuCorner="${this.menuCorner}" .fixed="${this.fixed}" .multi="${this.multi}" .activatable="${this.activatable}" .y="${this.y}" .x="${this.x}"> <slot></slot> </ha-menu> `}firstUpdated(e){super.firstUpdated(e),"rtl"===r.E.document.dir&&this.updateComplete.then((()=>{this.querySelectorAll("ha-list-item").forEach((e=>{const t=document.createElement("style");t.innerHTML="span.material-icons:first-of-type { margin-left: var(--mdc-list-item-graphic-margin, 32px) !important; margin-right: 0px !important;}",e.shadowRoot.appendChild(t)}))}))}_handleClick(){this.disabled||(this._menu.anchor=this.noAnchor?null:this,this._menu.show())}get _triggerButton(){return this.querySelector('ha-icon-button[slot="trigger"], ha-button[slot="trigger"], mwc-button[slot="trigger"]')}_setTriggerAria(){this._triggerButton&&(this._triggerButton.ariaHasPopup="menu")}constructor(...e){super(...e),this.corner="BOTTOM_START",this.menuCorner="START",this.x=null,this.y=null,this.multi=!1,this.activatable=!1,this.disabled=!1,this.fixed=!1,this.noAnchor=!1}}n.styles=a.iv`:host{display:inline-block;position:relative}::slotted([disabled]){color:var(--disabled-text-color)}`,(0,o.__decorate)([(0,s.Cb)()],n.prototype,"corner",void 0),(0,o.__decorate)([(0,s.Cb)({attribute:"menu-corner"})],n.prototype,"menuCorner",void 0),(0,o.__decorate)([(0,s.Cb)({type:Number})],n.prototype,"x",void 0),(0,o.__decorate)([(0,s.Cb)({type:Number})],n.prototype,"y",void 0),(0,o.__decorate)([(0,s.Cb)({type:Boolean})],n.prototype,"multi",void 0),(0,o.__decorate)([(0,s.Cb)({type:Boolean})],n.prototype,"activatable",void 0),(0,o.__decorate)([(0,s.Cb)({type:Boolean})],n.prototype,"disabled",void 0),(0,o.__decorate)([(0,s.Cb)({type:Boolean})],n.prototype,"fixed",void 0),(0,o.__decorate)([(0,s.Cb)({type:Boolean,attribute:"no-anchor"})],n.prototype,"noAnchor",void 0),(0,o.__decorate)([(0,s.IO)("ha-menu",!0)],n.prototype,"_menu",void 0),n=(0,o.__decorate)([(0,s.Mo)("ha-button-menu")],n)},63752:function(e,t,i){var o=i(73742),a=i(35423),s=i(21306),r=i(59048),n=i(26292);class d extends a.A{}d.styles=[s.W,r.iv`:host{--mdc-theme-secondary:var(--primary-color)}`],d=(0,o.__decorate)([(0,n.Mo)("ha-checkbox")],d)},12692:function(e,t,i){var o=i(73742),a=i(59048),s=i(26292),r=i(53898);class n extends r.t{constructor(...e){super(...e),this.borderTop=!1}}n.styles=[...r.C,a.iv`:host{--md-list-item-one-line-container-height:48px;--md-list-item-two-line-container-height:64px}:host([border-top]) md-item{border-top:1px solid var(--divider-color)}[slot=start]{--state-icon-color:var(--secondary-text-color)}[slot=headline]{line-height:22px;font-size:14px;white-space:nowrap}[slot=supporting-text]{line-height:18px;font-size:12px;white-space:nowrap}::slotted(img),::slotted(state-badge){width:32px;height:32px}::slotted(.code){font-family:var(--ha-font-family-code);font-size:var(--ha-font-size-xs)}::slotted(.domain){font-size:var(--ha-font-size-s);font-weight:var(--ha-font-weight-normal);line-height:var(--ha-line-height-normal);align-self:flex-end;max-width:30%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}`],(0,o.__decorate)([(0,s.Cb)({type:Boolean,reflect:!0,attribute:"border-top"})],n.prototype,"borderTop",void 0),n=(0,o.__decorate)([(0,s.Mo)("ha-combo-box-item")],n)},81205:function(e,t,i){i(81738),i(22960);var o=i(73742),a=i(4816),s=(i(9365),i(18464)),r=i(59048),n=i(26292),d=i(25191),l=i(39884);i(12692),i(48017),i(37492);(0,s.hC)("vaadin-combo-box-item",r.iv`:host{padding:0!important}:host([focused]:not([disabled])){background-color:rgba(var(--rgb-primary-text-color,0,0,0),.12)}:host([selected]:not([disabled])){background-color:transparent;color:var(--mdc-theme-primary);--mdc-ripple-color:var(--mdc-theme-primary);--mdc-theme-text-primary-on-background:var(--mdc-theme-primary)}:host([selected]:not([disabled])):before{background-color:var(--mdc-theme-primary);opacity:.12;content:"";position:absolute;top:0;left:0;width:100%;height:100%}:host([selected][focused]:not([disabled])):before{opacity:.24}:host(:hover:not([disabled])){background-color:transparent}[part=content]{width:100%}[part=checkmark]{display:none}`);class c extends r.oi{async open(){await this.updateComplete,this._comboBox?.open()}async focus(){await this.updateComplete,await(this._inputElement?.updateComplete),this._inputElement?.focus()}disconnectedCallback(){super.disconnectedCallback(),this._overlayMutationObserver&&(this._overlayMutationObserver.disconnect(),this._overlayMutationObserver=void 0),this._bodyMutationObserver&&(this._bodyMutationObserver.disconnect(),this._bodyMutationObserver=void 0)}get selectedItem(){return this._comboBox.selectedItem}setInputValue(e){this._comboBox.value=e}setTextFieldValue(e){this._inputElement.value=e}render(){return r.dy` <vaadin-combo-box-light .itemValuePath="${this.itemValuePath}" .itemIdPath="${this.itemIdPath}" .itemLabelPath="${this.itemLabelPath}" .items="${this.items}" .value="${this.value||""}" .filteredItems="${this.filteredItems}" .dataProvider="${this.dataProvider}" .allowCustomValue="${this.allowCustomValue}" .disabled="${this.disabled}" .required="${this.required}" ${(0,a.t)(this.renderer||this._defaultRowRenderer)} @opened-changed="${this._openedChanged}" @filter-changed="${this._filterChanged}" @value-changed="${this._valueChanged}" attr-for-value="value"> <ha-textfield label="${(0,d.o)(this.label)}" placeholder="${(0,d.o)(this.placeholder)}" ?disabled="${this.disabled}" ?required="${this.required}" validationMessage="${(0,d.o)(this.validationMessage)}" .errorMessage="${this.errorMessage}" class="input" autocapitalize="none" autocomplete="off" autocorrect="off" input-spellcheck="false" .suffix="${r.dy`<div style="width:28px" role="none presentation"></div>`}" .icon="${this.icon}" .invalid="${this.invalid}" .helper="${this.helper}" helperPersistent> <slot name="icon" slot="leadingIcon"></slot> </ha-textfield> ${this.value&&!this.hideClearIcon?r.dy`<ha-svg-icon role="button" tabindex="-1" aria-label="${(0,d.o)(this.hass?.localize("ui.common.clear"))}" class="clear-button" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}" @click="${this._clearValue}"></ha-svg-icon>`:""} <ha-svg-icon role="button" tabindex="-1" aria-label="${(0,d.o)(this.label)}" aria-expanded="${this.opened?"true":"false"}" class="toggle-button" .path="${this.opened?"M7,15L12,10L17,15H7Z":"M7,10L12,15L17,10H7Z"}" ?disabled="${this.disabled}" @click="${this._toggleOpen}"></ha-svg-icon> </vaadin-combo-box-light> `}_clearValue(e){e.stopPropagation(),(0,l.B)(this,"value-changed",{value:void 0})}_toggleOpen(e){this.opened?(this._comboBox?.close(),e.stopPropagation()):this._comboBox?.inputElement.focus()}_openedChanged(e){e.stopPropagation();const t=e.detail.value;if(setTimeout((()=>{this.opened=t}),0),(0,l.B)(this,"opened-changed",{value:e.detail.value}),t){const e=document.querySelector("vaadin-combo-box-overlay");e&&this._removeInert(e),this._observeBody()}else this._bodyMutationObserver?.disconnect(),this._bodyMutationObserver=void 0}_observeBody(){"MutationObserver"in window&&!this._bodyMutationObserver&&(this._bodyMutationObserver=new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{"VAADIN-COMBO-BOX-OVERLAY"===e.nodeName&&this._removeInert(e)})),e.removedNodes.forEach((e=>{"VAADIN-COMBO-BOX-OVERLAY"===e.nodeName&&(this._overlayMutationObserver?.disconnect(),this._overlayMutationObserver=void 0)}))}))})),this._bodyMutationObserver.observe(document.body,{childList:!0}))}_removeInert(e){if(e.inert)return e.inert=!1,this._overlayMutationObserver?.disconnect(),void(this._overlayMutationObserver=void 0);"MutationObserver"in window&&!this._overlayMutationObserver&&(this._overlayMutationObserver=new MutationObserver((e=>{e.forEach((e=>{if("inert"===e.attributeName){const t=e.target;t.inert&&(this._overlayMutationObserver?.disconnect(),this._overlayMutationObserver=void 0,t.inert=!1)}}))})),this._overlayMutationObserver.observe(e,{attributes:!0}))}_filterChanged(e){e.stopPropagation(),(0,l.B)(this,"filter-changed",{value:e.detail.value})}_valueChanged(e){e.stopPropagation(),this.allowCustomValue||(this._comboBox._closeOnBlurIsPrevented=!0);const t=e.detail.value;t!==this.value&&(0,l.B)(this,"value-changed",{value:t||void 0})}constructor(...e){super(...e),this.invalid=!1,this.icon=!1,this.allowCustomValue=!1,this.itemValuePath="value",this.itemLabelPath="label",this.disabled=!1,this.required=!1,this.opened=!1,this.hideClearIcon=!1,this._defaultRowRenderer=e=>r.dy` <ha-combo-box-item type="button"> ${this.itemLabelPath?e[this.itemLabelPath]:e} </ha-combo-box-item> `}}c.styles=r.iv`:host{display:block;width:100%}vaadin-combo-box-light{position:relative;--vaadin-combo-box-overlay-max-height:calc(45vh - 56px)}ha-textfield{width:100%}ha-textfield>ha-icon-button{--mdc-icon-button-size:24px;padding:2px;color:var(--secondary-text-color)}ha-svg-icon{color:var(--input-dropdown-icon-color);position:absolute;cursor:pointer}.toggle-button{right:12px;top:-10px;inset-inline-start:initial;inset-inline-end:12px;direction:var(--direction)}:host([opened]) .toggle-button{color:var(--primary-color)}.toggle-button[disabled]{color:var(--disabled-text-color);pointer-events:none}.clear-button{--mdc-icon-size:20px;top:-7px;right:36px;inset-inline-start:initial;inset-inline-end:36px;direction:var(--direction)}`,(0,o.__decorate)([(0,n.Cb)({attribute:!1})],c.prototype,"hass",void 0),(0,o.__decorate)([(0,n.Cb)()],c.prototype,"label",void 0),(0,o.__decorate)([(0,n.Cb)()],c.prototype,"value",void 0),(0,o.__decorate)([(0,n.Cb)()],c.prototype,"placeholder",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:!1})],c.prototype,"validationMessage",void 0),(0,o.__decorate)([(0,n.Cb)()],c.prototype,"helper",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:"error-message"})],c.prototype,"errorMessage",void 0),(0,o.__decorate)([(0,n.Cb)({type:Boolean})],c.prototype,"invalid",void 0),(0,o.__decorate)([(0,n.Cb)({type:Boolean})],c.prototype,"icon",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:!1})],c.prototype,"items",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:!1})],c.prototype,"filteredItems",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:!1})],c.prototype,"dataProvider",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:"allow-custom-value",type:Boolean})],c.prototype,"allowCustomValue",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:"item-value-path"})],c.prototype,"itemValuePath",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:"item-label-path"})],c.prototype,"itemLabelPath",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:"item-id-path"})],c.prototype,"itemIdPath",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:!1})],c.prototype,"renderer",void 0),(0,o.__decorate)([(0,n.Cb)({type:Boolean})],c.prototype,"disabled",void 0),(0,o.__decorate)([(0,n.Cb)({type:Boolean})],c.prototype,"required",void 0),(0,o.__decorate)([(0,n.Cb)({type:Boolean,reflect:!0})],c.prototype,"opened",void 0),(0,o.__decorate)([(0,n.Cb)({type:Boolean,attribute:"hide-clear-icon"})],c.prototype,"hideClearIcon",void 0),(0,o.__decorate)([(0,n.IO)("vaadin-combo-box-light",!0)],c.prototype,"_comboBox",void 0),(0,o.__decorate)([(0,n.IO)("ha-textfield",!0)],c.prototype,"_inputElement",void 0),c=(0,o.__decorate)([(0,n.Mo)("ha-combo-box")],c)},53166:function(e,t,i){var o=i(73742),a=i(3416),s=i(24196),r=i(59048),n=i(26292),d=i(31733),l=i(39884);class c extends a.a{render(){const e={"mdc-form-field--align-end":this.alignEnd,"mdc-form-field--space-between":this.spaceBetween,"mdc-form-field--nowrap":this.nowrap};return r.dy` <div class="mdc-form-field ${(0,d.$)(e)}"> <slot></slot> <label class="mdc-label" @click="${this._labelClick}"> <slot name="label">${this.label}</slot> </label> </div>`}_labelClick(){const e=this.input;if(e&&(e.focus(),!e.disabled))switch(e.tagName){case"HA-CHECKBOX":e.checked=!e.checked,(0,l.B)(e,"change");break;case"HA-RADIO":e.checked=!0,(0,l.B)(e,"change");break;default:e.click()}}constructor(...e){super(...e),this.disabled=!1}}c.styles=[s.W,r.iv`:host(:not([alignEnd])) ::slotted(ha-switch){margin-right:10px;margin-inline-end:10px;margin-inline-start:inline}.mdc-form-field{align-items:var(--ha-formfield-align-items,center);gap:4px}.mdc-form-field>label{direction:var(--direction);margin-inline-start:0;margin-inline-end:auto;padding:0}:host([disabled]) label{color:var(--disabled-text-color)}`],(0,o.__decorate)([(0,n.Cb)({type:Boolean,reflect:!0})],c.prototype,"disabled",void 0),c=(0,o.__decorate)([(0,n.Mo)("ha-formfield")],c)},64881:function(e,t,i){var o=i(73742),a=i(92560),s=i(84862),r=i(26292);class n extends a.Kh{}n.styles=s.W,n=(0,o.__decorate)([(0,r.Mo)("ha-list")],n)},53898:function(e,t,i){i.d(t,{C:()=>d,t:()=>l});var o=i(73742),a=i(74789),s=i(62693),r=i(59048),n=i(26292);const d=[s.W,r.iv`:host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color)}md-item{overflow:var(--md-item-overflow,hidden);align-items:var(--md-item-align-items,center);gap:var(--ha-md-list-item-gap,16px)}`];class l extends a.d{}l.styles=d,l=(0,o.__decorate)([(0,n.Mo)("ha-md-list-item")],l)},39765:function(e,t,i){var o=i(73742),a=i(69287),s=i(70840),r=i(59048),n=i(26292),d=i(31733);i(64881);class l extends a.HB{get listElement(){return this.listElement_||(this.listElement_=this.renderRoot.querySelector("ha-list")),this.listElement_}renderList(){const e="menu"===this.innerRole?"menuitem":"option",t=this.renderListClasses();return r.dy`<ha-list rootTabbable .innerAriaLabel="${this.innerAriaLabel}" .innerRole="${this.innerRole}" .multi="${this.multi}" class="${(0,d.$)(t)}" .itemRoles="${e}" .wrapFocus="${this.wrapFocus}" .activatable="${this.activatable}" @action="${this.onAction}"> <slot></slot> </ha-list>`}}l.styles=s.W,l=(0,o.__decorate)([(0,n.Mo)("ha-menu")],l)},37492:function(e,t,i){var o=i(73742),a=i(94068),s=i(16880),r=i(59048),n=i(26292),d=i(83054);class l extends a.P{updated(e){super.updated(e),(e.has("invalid")||e.has("errorMessage"))&&(this.setCustomValidity(this.invalid?this.errorMessage||this.validationMessage||"Invalid":""),(this.invalid||this.validateOnInitialRender||e.has("invalid")&&void 0!==e.get("invalid"))&&this.reportValidity()),e.has("autocomplete")&&(this.autocomplete?this.formElement.setAttribute("autocomplete",this.autocomplete):this.formElement.removeAttribute("autocomplete")),e.has("autocorrect")&&(this.autocorrect?this.formElement.setAttribute("autocorrect",this.autocorrect):this.formElement.removeAttribute("autocorrect")),e.has("inputSpellcheck")&&(this.inputSpellcheck?this.formElement.setAttribute("spellcheck",this.inputSpellcheck):this.formElement.removeAttribute("spellcheck"))}renderIcon(e,t=!1){const i=t?"trailing":"leading";return r.dy` <span class="mdc-text-field__icon mdc-text-field__icon--${i}" tabindex="${t?1:-1}"> <slot name="${i}Icon"></slot> </span> `}constructor(...e){super(...e),this.icon=!1,this.iconTrailing=!1}}l.styles=[s.W,r.iv`.mdc-text-field__input{width:var(--ha-textfield-input-width,100%)}.mdc-text-field:not(.mdc-text-field--with-leading-icon){padding:var(--text-field-padding,0px 16px)}.mdc-text-field__affix--suffix{padding-left:var(--text-field-suffix-padding-left,12px);padding-right:var(--text-field-suffix-padding-right,0px);padding-inline-start:var(--text-field-suffix-padding-left,12px);padding-inline-end:var(--text-field-suffix-padding-right,0px);direction:ltr}.mdc-text-field--with-leading-icon{padding-inline-start:var(--text-field-suffix-padding-left,0px);padding-inline-end:var(--text-field-suffix-padding-right,16px);direction:var(--direction)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:var(--text-field-suffix-padding-left,0px);padding-right:var(--text-field-suffix-padding-right,0px);padding-inline-start:var(--text-field-suffix-padding-left,0px);padding-inline-end:var(--text-field-suffix-padding-right,0px)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__affix--suffix{color:var(--secondary-text-color)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__icon{color:var(--secondary-text-color)}.mdc-text-field__icon--leading{margin-inline-start:16px;margin-inline-end:8px;direction:var(--direction)}.mdc-text-field__icon--trailing{padding:var(--textfield-icon-trailing-padding,12px)}.mdc-floating-label:not(.mdc-floating-label--float-above){max-width:calc(100% - 16px)}.mdc-floating-label--float-above{max-width:calc((100% - 16px)/ .75);transition:none}input{text-align:var(--text-field-text-align,start)}input[type=color]{height:20px}::-ms-reveal{display:none}:host([no-spinner]) input::-webkit-inner-spin-button,:host([no-spinner]) input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=color]::-webkit-color-swatch-wrapper{padding:0}:host([no-spinner]) input[type=number]{-moz-appearance:textfield}.mdc-text-field__ripple{overflow:hidden}.mdc-text-field{overflow:var(--text-field-overflow)}.mdc-floating-label{padding-inline-end:16px;padding-inline-start:initial;inset-inline-start:16px!important;inset-inline-end:initial!important;transform-origin:var(--float-start);direction:var(--direction);text-align:var(--float-start);box-sizing:border-box;text-overflow:ellipsis}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px - var(--text-field-suffix-padding-left,0px));inset-inline-start:calc(48px + var(--text-field-suffix-padding-left,0px))!important;inset-inline-end:initial!important;direction:var(--direction)}.mdc-text-field__input[type=number]{direction:var(--direction)}.mdc-text-field__affix--prefix{padding-right:var(--text-field-prefix-padding-right,2px);padding-inline-end:var(--text-field-prefix-padding-right,2px);padding-inline-start:initial}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__affix--prefix{color:var(--mdc-text-field-label-ink-color)}#helper-text ha-markdown{display:inline-block}`,"rtl"===d.E.document.dir?r.iv`.mdc-floating-label,.mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field__icon--leading,.mdc-text-field__input[type=number]{direction:rtl;--direction:rtl}`:r.iv``],(0,o.__decorate)([(0,n.Cb)({type:Boolean})],l.prototype,"invalid",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:"error-message"})],l.prototype,"errorMessage",void 0),(0,o.__decorate)([(0,n.Cb)({type:Boolean})],l.prototype,"icon",void 0),(0,o.__decorate)([(0,n.Cb)({type:Boolean})],l.prototype,"iconTrailing",void 0),(0,o.__decorate)([(0,n.Cb)()],l.prototype,"autocomplete",void 0),(0,o.__decorate)([(0,n.Cb)()],l.prototype,"autocorrect",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:"input-spellcheck"})],l.prototype,"inputSpellcheck",void 0),(0,o.__decorate)([(0,n.IO)("input")],l.prototype,"formElement",void 0),l=(0,o.__decorate)([(0,n.Mo)("ha-textfield")],l)},58047:function(e,t,i){i(81738),i(94814);var o=i(73742),a=i(59048),s=i(26292),r=(i(48017),i(993),i(37492),i(39884));class n extends a.oi{focus(){this._input?.focus()}render(){return a.dy` <ha-textfield .autofocus="${this.autofocus}" .label="${this.label||this.hass.localize("ui.common.search")}" .value="${this.filter||""}" icon .iconTrailing="${this.filter||this.suffix}" @input="${this._filterInputChanged}"> <slot name="prefix" slot="leadingIcon"> <ha-svg-icon tabindex="-1" class="prefix" .path="${"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"}"></ha-svg-icon> </slot> <div class="trailing" slot="trailingIcon"> ${this.filter&&a.dy` <ha-icon-button @click="${this._clearSearch}" .label="${this.hass.localize("ui.common.clear")}" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}" class="clear-button"></ha-icon-button> `} <slot name="suffix"></slot> </div> </ha-textfield> `}async _filterChanged(e){(0,r.B)(this,"value-changed",{value:String(e)})}async _filterInputChanged(e){this._filterChanged(e.target.value)}async _clearSearch(){this._filterChanged("")}constructor(...e){super(...e),this.suffix=!1,this.autofocus=!1}}n.styles=a.iv`:host{display:inline-flex}ha-icon-button,ha-svg-icon{color:var(--primary-text-color)}ha-svg-icon{outline:0}.clear-button{--mdc-icon-size:20px}ha-textfield{display:inherit}.trailing{display:flex;align-items:center}`,(0,o.__decorate)([(0,s.Cb)({attribute:!1})],n.prototype,"hass",void 0),(0,o.__decorate)([(0,s.Cb)()],n.prototype,"filter",void 0),(0,o.__decorate)([(0,s.Cb)({type:Boolean})],n.prototype,"suffix",void 0),(0,o.__decorate)([(0,s.Cb)({type:Boolean})],n.prototype,"autofocus",void 0),(0,o.__decorate)([(0,s.Cb)({type:String})],n.prototype,"label",void 0),(0,o.__decorate)([(0,s.IO)("ha-textfield",!0)],n.prototype,"_input",void 0),n=(0,o.__decorate)([(0,s.Mo)("search-input")],n)},14159:function(e,t,i){i.d(t,{Dm:()=>n,jg:()=>s,p4:()=>a,pN:()=>r,xC:()=>o});const o=e=>{let t=e;return"string"==typeof e&&(t=parseInt(e,16)),"0x"+t.toString(16).padStart(4,"0")},a=e=>e.split(":").slice(-4).reverse().join(""),s=(e,t)=>{const i=e.user_given_name?e.user_given_name:e.name,o=t.user_given_name?t.user_given_name:t.name;return i.localeCompare(o)},r=(e,t)=>{const i=e.name,o=t.name;return i.localeCompare(o)},n=e=>`${e.name} (Endpoint id: ${e.endpoint_id}, Id: ${o(e.id)}, Type: ${e.type})`},83366:function(e,t,i){i.a(e,(async function(e,o){try{i.r(t),i.d(t,{ZHANetworkVisualizationPage:()=>u});i(2394),i(81738),i(22960),i(6989);var a=i(73742),s=(i(98334),i(59048)),r=i(26292),n=i(98958),d=i(67050),l=(i(58047),i(6439),i(41037),i(63752),i(53166),i(68986)),c=(i(92622),i(14159)),h=i(87106),p=e([h]);h=(p.then?(await p)():p)[0];class u extends s.oi{firstUpdated(e){super.firstUpdated(e),this.zoomedDeviceIdFromURL&&(this.zoomedDeviceId=this.zoomedDeviceIdFromURL),this.hass&&this._fetchData(),this._network=new n.Zc(this._visualization,{},{autoResize:!0,layout:{improvedLayout:!0},physics:{barnesHut:{springConstant:0,avoidOverlap:10,damping:.09}},nodes:{font:{multi:"html"}},edges:{smooth:{enabled:!0,type:"continuous",forceDirection:"none",roundness:.6}}}),this._network.on("doubleClick",(e=>{const t=e.nodes[0];if(t){const e=this._devices.get(t);e&&(0,d.c)(`/config/devices/device/${e.device_reg_id}`)}})),this._network.on("click",(e=>{const t=e.nodes[0];if(t){const e=this._devices.get(t);e&&this._autoZoom&&(this.zoomedDeviceId=e.device_reg_id,this._zoomToDevice())}})),this._network.on("stabilized",(()=>{this.zoomedDeviceId&&this._zoomToDevice()}))}render(){return s.dy` <hass-tabs-subpage .tabs="${h.zhaTabs}" .hass="${this.hass}" .narrow="${this.narrow}" .isWide="${this.isWide}" .route="${this.route}" .header="${this.hass.localize("ui.panel.config.zha.visualization.header")}"> ${this.narrow?s.dy` <div slot="header"> <search-input .hass="${this.hass}" class="header" @value-changed="${this._handleSearchChange}" .filter="${this._filter}" .label="${this.hass.localize("ui.panel.config.zha.visualization.highlight_label")}"> </search-input> </div> `:""} <div class="header"> ${this.narrow?"":s.dy`<search-input .hass="${this.hass}" @value-changed="${this._handleSearchChange}" .filter="${this._filter}" .label="${this.hass.localize("ui.panel.config.zha.visualization.highlight_label")}"></search-input>`} <ha-device-picker .hass="${this.hass}" .value="${this.zoomedDeviceId}" .label="${this.hass.localize("ui.panel.config.zha.visualization.zoom_label")}" .deviceFilter="${this._filterDevices}" @value-changed="${this._onZoomToDevice}"></ha-device-picker> <div class="controls"> <ha-formfield .label="${this.hass.localize("ui.panel.config.zha.visualization.auto_zoom")}"> <ha-checkbox @change="${this._handleAutoZoomCheckboxChange}" .checked="${this._autoZoom}"> </ha-checkbox> </ha-formfield> <ha-formfield .label="${this.hass.localize("ui.panel.config.zha.visualization.enable_physics")}"><ha-checkbox @change="${this._handlePhysicsCheckboxChange}" .checked="${this._enablePhysics}"> </ha-checkbox></ha-formfield> <mwc-button @click="${this._refreshTopology}"> ${this.hass.localize("ui.panel.config.zha.visualization.refresh_topology")} </mwc-button> </div> </div> <div id="visualization"></div> </hass-tabs-subpage> `}async _fetchData(){const e=await(0,l.LO)(this.hass);this._devices=new Map(e.map((e=>[e.ieee,e]))),this._devicesByDeviceId=new Map(e.map((e=>[e.device_reg_id,e]))),this._updateDevices(e)}_updateDevices(e){this._nodes=[];const t=[];e.forEach((e=>{this._nodes.push({id:e.ieee,label:this._buildLabel(e),shape:this._getShape(e),mass:this._getMass(e),fixed:"Coordinator"===e.device_type,color:{background:e.available?"#66FF99":"#FF9999"}}),e.neighbors&&e.neighbors.length>0&&e.neighbors.forEach((i=>{const o=t.findIndex((t=>e.ieee===t.to&&i.ieee===t.from));if(-1===o){const o=this._getEdgeOptions(parseInt(i.lqi));t.push({from:e.ieee,to:i.ieee,label:i.lqi+"",color:o.color,width:o.width,length:o.length,physics:o.physics,arrows:{from:{enabled:"Child"!==i.relationship}},dashes:"Child"!==i.relationship})}else{const e=this._getEdgeOptions(Math.min(parseInt(t[o].label),parseInt(i.lqi)));t[o].label+=" & "+i.lqi,t[o].color=e.color,t[o].width=e.width,t[o].length=e.length,t[o].physics=e.physics,delete t[o].arrows,delete t[o].dashes}}))})),this._network?.setData({nodes:this._nodes,edges:t})}_getEdgeOptions(e){const t=2e3-4*e;return e>192?{color:{color:"#17ab00",highlight:"#17ab00"},width:e/20,length:t,physics:!1}:e>128?{color:{color:"#e6b402",highlight:"#e6b402"},width:9,length:t,physics:!1}:{color:{color:"#bfbfbf",highlight:"#bfbfbf"},width:1,length:t,physics:!1}}_getMass(e){return e.available?"Coordinator"===e.device_type?2:"Router"===e.device_type?4:5:6}_getShape(e){return"Coordinator"===e.device_type?"box":"Router"===e.device_type?"ellipse":"circle"}_buildLabel(e){let t=null!==e.user_given_name?`<b>${e.user_given_name}</b>\n`:"";return t+=`<b>IEEE: </b>${e.ieee}`,t+=`\n<b>Device Type: </b>${e.device_type.replace("_"," ")}`,null!=e.nwk&&(t+=`\n<b>NWK: </b>${(0,c.xC)(e.nwk)}`),null!=e.manufacturer&&null!=e.model?t+=`\n<b>Device: </b>${e.manufacturer} ${e.model}`:t+="\n<b>Device is not in <i>'zigbee.db'</i></b>",e.area_id&&(t+=`\n<b>Area ID: </b>${e.area_id}`),t}_handleSearchChange(e){this._filter=e.detail.value;const t=this._filter.toLowerCase();if(this._network)if(this._filter){const e=[];this._nodes.forEach((i=>{i.label&&i.label.toLowerCase().includes(t)&&e.push(i.id)})),this.zoomedDeviceId="",this._zoomOut(),this._network.selectNodes(e,!0)}else this._network.unselectAll()}_onZoomToDevice(e){e.stopPropagation(),this.zoomedDeviceId=e.detail.value,this._network&&this._zoomToDevice()}_zoomToDevice(){if(this._filter="",this.zoomedDeviceId){const e=this._devicesByDeviceId.get(this.zoomedDeviceId);e&&this._network.fit({nodes:[e.ieee],animation:{duration:500,easingFunction:"easeInQuad"}})}else this._zoomOut()}_zoomOut(){this._network.fit({nodes:[],animation:{duration:500,easingFunction:"easeOutQuad"}})}async _refreshTopology(){await(0,l.f3)(this.hass)}_handleAutoZoomCheckboxChange(e){this._autoZoom=e.target.checked}_handlePhysicsCheckboxChange(e){this._enablePhysics=e.target.checked,this._network.setOptions(this._enablePhysics?{physics:{enabled:!0}}:{physics:{enabled:!1}})}static get styles(){return[s.iv`.header{border-bottom:1px solid var(--divider-color);padding:0 8px;display:flex;align-items:center;justify-content:space-between;height:var(--header-height);box-sizing:border-box}.header>*{padding:0 8px}:host([narrow]) .header{flex-direction:column;align-items:stretch;height:var(--header-height) * 2}.search-toolbar{display:flex;align-items:center;color:var(--secondary-text-color);padding:0 16px}search-input{flex:1;display:block}search-input.header{color:var(--secondary-text-color)}ha-device-picker{flex:1}.controls{display:flex;align-items:center;justify-content:space-between}#visualization{height:calc(100% - var(--header-height));width:100%}:host([narrow]) #visualization{height:calc(100% - (var(--header-height) * 2))}`]}constructor(...e){super(...e),this.narrow=!1,this.isWide=!1,this._devices=new Map,this._devicesByDeviceId=new Map,this._nodes=[],this._autoZoom=!0,this._enablePhysics=!0,this._filterDevices=e=>{if(!this.hass)return!1;for(const t of e.identifiers)for(const e of t)if("zha"===e)return!0;return!1}}}(0,a.__decorate)([(0,r.Cb)({attribute:!1})],u.prototype,"hass",void 0),(0,a.__decorate)([(0,r.Cb)({attribute:!1})],u.prototype,"route",void 0),(0,a.__decorate)([(0,r.Cb)({type:Boolean,reflect:!0})],u.prototype,"narrow",void 0),(0,a.__decorate)([(0,r.Cb)({attribute:"is-wide",type:Boolean})],u.prototype,"isWide",void 0),(0,a.__decorate)([(0,r.Cb)({attribute:!1})],u.prototype,"zoomedDeviceIdFromURL",void 0),(0,a.__decorate)([(0,r.SB)()],u.prototype,"zoomedDeviceId",void 0),(0,a.__decorate)([(0,r.IO)("#visualization",!0)],u.prototype,"_visualization",void 0),(0,a.__decorate)([(0,r.SB)()],u.prototype,"_devices",void 0),(0,a.__decorate)([(0,r.SB)()],u.prototype,"_devicesByDeviceId",void 0),(0,a.__decorate)([(0,r.SB)()],u.prototype,"_nodes",void 0),(0,a.__decorate)([(0,r.SB)()],u.prototype,"_network",void 0),(0,a.__decorate)([(0,r.SB)()],u.prototype,"_filter",void 0),u=(0,a.__decorate)([(0,r.Mo)("zha-network-visualization-page")],u),o()}catch(e){o(e)}}))}};
//# sourceMappingURL=67713.dfd76e64f546d8c9.js.map