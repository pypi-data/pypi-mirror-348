"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["432"],{58125:function(e,t,i){i.d(t,{wZ:()=>s,jL:()=>r,sU:()=>d});i(26847),i(81738),i(94814),i(6989),i(20655),i(27530);var o=i(28105),a=i(15459);i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761);const r=e=>{var t;return null===(t=e.name_by_user||e.name)||void 0===t?void 0:t.trim()},s=(e,t,i)=>r(e)||i&&n(t,i)||t.localize("ui.panel.config.devices.unnamed_device",{type:t.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)}),n=(e,t)=>{for(const i of t||[]){const t="string"==typeof i?i:i.entity_id,o=e.states[t];if(o)return(0,a.C)(o)}},d=(0,o.Z)((e=>function(e){const t=new Set,i=new Set;for(const o of e)i.has(o)?t.add(o):i.add(o);return t}(Object.values(e).map((e=>r(e))).filter((e=>void 0!==e)))))},6439:function(e,t,i){i.a(e,(async function(e,t){try{i(39710),i(26847),i(18574),i(81738),i(33480),i(94814),i(6989),i(72489),i(1455),i(56389),i(27530);var o=i(73742),a=i(59048),r=i(7616),s=i(28105),n=i(39884),d=i(58125),l=i(44272),c=i(36221),h=i(56795),p=i(10500),u=i(81205),v=(i(12692),e([u]));u=(v.then?(await v)():v)[0];let _,m,b,f=e=>e;const g=e=>(0,a.dy)(_||(_=f` <ha-combo-box-item type="button"> <span slot="headline">${0}</span> ${0} </ha-combo-box-item> `),e.name,e.area?(0,a.dy)(m||(m=f`<span slot="supporting-text">${0}</span>`),e.area):a.Ld);class y extends a.oi{async open(){var e;await this.updateComplete,await(null===(e=this.comboBox)||void 0===e?void 0:e.open())}async focus(){var e;await this.updateComplete,await(null===(e=this.comboBox)||void 0===e?void 0:e.focus())}updated(e){if(!this._init&&this.hass||this._init&&e.has("_opened")&&this._opened){this._init=!0;const e=this._getDevices(Object.values(this.hass.devices),this.hass.areas,Object.values(this.hass.entities),this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.excludeDevices);this.comboBox.items=e,this.comboBox.filteredItems=e}}render(){return(0,a.dy)(b||(b=f` <ha-combo-box .hass="${0}" .label="${0}" .value="${0}" .helper="${0}" .renderer="${0}" .disabled="${0}" .required="${0}" item-id-path="id" item-value-path="id" item-label-path="name" @opened-changed="${0}" @value-changed="${0}" @filter-changed="${0}"></ha-combo-box> `),this.hass,void 0===this.label&&this.hass?this.hass.localize("ui.components.device-picker.device"):this.label,this._value,this.helper,g,this.disabled,this.required,this._openedChanged,this._deviceChanged,this._filterChanged)}get _value(){return this.value||""}_filterChanged(e){const t=e.target,i=e.detail.value.toLowerCase();t.filteredItems=i.length?(0,h.q)(i,t.items||[]):t.items}_deviceChanged(e){e.stopPropagation();let t=e.detail.value;"no_devices"===t&&(t=""),t!==this._value&&this._setValue(t)}_openedChanged(e){this._opened=e.detail.value}_setValue(e){this.value=e,setTimeout((()=>{(0,n.B)(this,"value-changed",{value:e}),(0,n.B)(this,"change")}),0)}constructor(...e){super(...e),this.disabled=!1,this.required=!1,this._init=!1,this._getDevices=(0,s.Z)(((e,t,i,o,a,r,s,n,h)=>{if(!e.length)return[{id:"no_devices",area:"",name:this.hass.localize("ui.components.device-picker.no_devices"),strings:[]}];let u={};(o||a||r||n)&&(u=(0,p.R6)(i));let v=e.filter((e=>e.id===this.value||!e.disabled_by));o&&(v=v.filter((e=>{const t=u[e.id];return!(!t||!t.length)&&u[e.id].some((e=>o.includes((0,l.M)(e.entity_id))))}))),a&&(v=v.filter((e=>{const t=u[e.id];return!t||!t.length||i.every((e=>!a.includes((0,l.M)(e.entity_id))))}))),h&&(v=v.filter((e=>!h.includes(e.id)))),r&&(v=v.filter((e=>{const t=u[e.id];return!(!t||!t.length)&&u[e.id].some((e=>{const t=this.hass.states[e.entity_id];return!!t&&(t.attributes.device_class&&r.includes(t.attributes.device_class))}))}))),n&&(v=v.filter((e=>{const t=u[e.id];return!(!t||!t.length)&&t.some((e=>{const t=this.hass.states[e.entity_id];return!!t&&n(t)}))}))),s&&(v=v.filter((e=>e.id===this.value||s(e))));const _=v.map((e=>{const i=(0,d.wZ)(e,this.hass,u[e.id]);return{id:e.id,name:i||this.hass.localize("ui.components.device-picker.unnamed_device"),area:e.area_id&&t[e.area_id]?t[e.area_id].name:this.hass.localize("ui.components.device-picker.no_area"),strings:[i||""]}}));return _.length?1===_.length?_:_.sort(((e,t)=>(0,c.$K)(e.name||"",t.name||"",this.hass.locale.language))):[{id:"no_devices",area:"",name:this.hass.localize("ui.components.device-picker.no_match"),strings:[]}]}))}}(0,o.__decorate)([(0,r.Cb)({attribute:!1})],y.prototype,"hass",void 0),(0,o.__decorate)([(0,r.Cb)()],y.prototype,"label",void 0),(0,o.__decorate)([(0,r.Cb)()],y.prototype,"value",void 0),(0,o.__decorate)([(0,r.Cb)()],y.prototype,"helper",void 0),(0,o.__decorate)([(0,r.Cb)({type:Array,attribute:"include-domains"})],y.prototype,"includeDomains",void 0),(0,o.__decorate)([(0,r.Cb)({type:Array,attribute:"exclude-domains"})],y.prototype,"excludeDomains",void 0),(0,o.__decorate)([(0,r.Cb)({type:Array,attribute:"include-device-classes"})],y.prototype,"includeDeviceClasses",void 0),(0,o.__decorate)([(0,r.Cb)({type:Array,attribute:"exclude-devices"})],y.prototype,"excludeDevices",void 0),(0,o.__decorate)([(0,r.Cb)({attribute:!1})],y.prototype,"deviceFilter",void 0),(0,o.__decorate)([(0,r.Cb)({attribute:!1})],y.prototype,"entityFilter",void 0),(0,o.__decorate)([(0,r.Cb)({type:Boolean})],y.prototype,"disabled",void 0),(0,o.__decorate)([(0,r.Cb)({type:Boolean})],y.prototype,"required",void 0),(0,o.__decorate)([(0,r.SB)()],y.prototype,"_opened",void 0),(0,o.__decorate)([(0,r.IO)("ha-combo-box",!0)],y.prototype,"comboBox",void 0),y=(0,o.__decorate)([(0,r.Mo)("ha-device-picker")],y),t()}catch(_){t(_)}}))},41037:function(e,t,i){i(26847),i(81738),i(22960),i(27530);var o=i(73742),a=i(59048),r=i(7616),s=i(83054);i(12066),i(39765);let n,d,l=e=>e;class c extends a.oi{get items(){var e;return null===(e=this._menu)||void 0===e?void 0:e.items}get selected(){var e;return null===(e=this._menu)||void 0===e?void 0:e.selected}focus(){var e,t;null!==(e=this._menu)&&void 0!==e&&e.open?this._menu.focusItemAtIndex(0):null===(t=this._triggerButton)||void 0===t||t.focus()}render(){return(0,a.dy)(n||(n=l` <div @click="${0}"> <slot name="trigger" @slotchange="${0}"></slot> </div> <ha-menu .corner="${0}" .menuCorner="${0}" .fixed="${0}" .multi="${0}" .activatable="${0}" .y="${0}" .x="${0}"> <slot></slot> </ha-menu> `),this._handleClick,this._setTriggerAria,this.corner,this.menuCorner,this.fixed,this.multi,this.activatable,this.y,this.x)}firstUpdated(e){super.firstUpdated(e),"rtl"===s.E.document.dir&&this.updateComplete.then((()=>{this.querySelectorAll("ha-list-item").forEach((e=>{const t=document.createElement("style");t.innerHTML="span.material-icons:first-of-type { margin-left: var(--mdc-list-item-graphic-margin, 32px) !important; margin-right: 0px !important;}",e.shadowRoot.appendChild(t)}))}))}_handleClick(){this.disabled||(this._menu.anchor=this.noAnchor?null:this,this._menu.show())}get _triggerButton(){return this.querySelector('ha-icon-button[slot="trigger"], ha-button[slot="trigger"], mwc-button[slot="trigger"]')}_setTriggerAria(){this._triggerButton&&(this._triggerButton.ariaHasPopup="menu")}constructor(...e){super(...e),this.corner="BOTTOM_START",this.menuCorner="START",this.x=null,this.y=null,this.multi=!1,this.activatable=!1,this.disabled=!1,this.fixed=!1,this.noAnchor=!1}}c.styles=(0,a.iv)(d||(d=l`:host{display:inline-block;position:relative}::slotted([disabled]){color:var(--disabled-text-color)}`)),(0,o.__decorate)([(0,r.Cb)()],c.prototype,"corner",void 0),(0,o.__decorate)([(0,r.Cb)({attribute:"menu-corner"})],c.prototype,"menuCorner",void 0),(0,o.__decorate)([(0,r.Cb)({type:Number})],c.prototype,"x",void 0),(0,o.__decorate)([(0,r.Cb)({type:Number})],c.prototype,"y",void 0),(0,o.__decorate)([(0,r.Cb)({type:Boolean})],c.prototype,"multi",void 0),(0,o.__decorate)([(0,r.Cb)({type:Boolean})],c.prototype,"activatable",void 0),(0,o.__decorate)([(0,r.Cb)({type:Boolean})],c.prototype,"disabled",void 0),(0,o.__decorate)([(0,r.Cb)({type:Boolean})],c.prototype,"fixed",void 0),(0,o.__decorate)([(0,r.Cb)({type:Boolean,attribute:"no-anchor"})],c.prototype,"noAnchor",void 0),(0,o.__decorate)([(0,r.IO)("ha-menu",!0)],c.prototype,"_menu",void 0),c=(0,o.__decorate)([(0,r.Mo)("ha-button-menu")],c)},63752:function(e,t,i){var o=i(73742),a=i(35423),r=i(21306),s=i(59048),n=i(7616);let d;class l extends a.A{}l.styles=[r.W,(0,s.iv)(d||(d=(e=>e)`:host{--mdc-theme-secondary:var(--primary-color)}`))],l=(0,o.__decorate)([(0,n.Mo)("ha-checkbox")],l)},12692:function(e,t,i){i(26847),i(27530);var o=i(73742),a=i(59048),r=i(7616),s=i(53898);let n;class d extends s.t{constructor(...e){super(...e),this.borderTop=!1}}d.styles=[...s.C,(0,a.iv)(n||(n=(e=>e)`:host{--md-list-item-one-line-container-height:48px;--md-list-item-two-line-container-height:64px}:host([border-top]) md-item{border-top:1px solid var(--divider-color)}[slot=start]{--state-icon-color:var(--secondary-text-color)}[slot=headline]{line-height:22px;font-size:14px;white-space:nowrap}[slot=supporting-text]{line-height:18px;font-size:12px;white-space:nowrap}::slotted(img),::slotted(state-badge){width:32px;height:32px}::slotted(.code){font-family:var(--ha-font-family-code);font-size:var(--ha-font-size-xs)}::slotted(.domain){font-size:var(--ha-font-size-s);font-weight:var(--ha-font-weight-normal);line-height:var(--ha-line-height-normal);align-self:flex-end;max-width:30%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}`))],(0,o.__decorate)([(0,r.Cb)({type:Boolean,reflect:!0,attribute:"border-top"})],d.prototype,"borderTop",void 0),d=(0,o.__decorate)([(0,r.Mo)("ha-combo-box-item")],d)},81205:function(e,t,i){i.a(e,(async function(e,t){try{i(26847),i(81738),i(22960),i(1455),i(27530);var o=i(73742),a=i(4816),r=i(5335),s=i(18464),n=i(59048),d=i(7616),l=i(25191),c=i(39884),h=(i(12692),i(48017),i(37492),e([r]));r=(h.then?(await h)():h)[0];let p,u,v,_,m,b,f=e=>e;const g="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",y="M7,10L12,15L17,10H7Z",x="M7,15L12,10L17,15H7Z";(0,s.hC)("vaadin-combo-box-item",(0,n.iv)(p||(p=f`:host{padding:0!important}:host([focused]:not([disabled])){background-color:rgba(var(--rgb-primary-text-color,0,0,0),.12)}:host([selected]:not([disabled])){background-color:transparent;color:var(--mdc-theme-primary);--mdc-ripple-color:var(--mdc-theme-primary);--mdc-theme-text-primary-on-background:var(--mdc-theme-primary)}:host([selected]:not([disabled])):before{background-color:var(--mdc-theme-primary);opacity:.12;content:"";position:absolute;top:0;left:0;width:100%;height:100%}:host([selected][focused]:not([disabled])):before{opacity:.24}:host(:hover:not([disabled])){background-color:transparent}[part=content]{width:100%}[part=checkmark]{display:none}`)));class C extends n.oi{async open(){var e;await this.updateComplete,null===(e=this._comboBox)||void 0===e||e.open()}async focus(){var e,t;await this.updateComplete,await(null===(e=this._inputElement)||void 0===e?void 0:e.updateComplete),null===(t=this._inputElement)||void 0===t||t.focus()}disconnectedCallback(){super.disconnectedCallback(),this._overlayMutationObserver&&(this._overlayMutationObserver.disconnect(),this._overlayMutationObserver=void 0),this._bodyMutationObserver&&(this._bodyMutationObserver.disconnect(),this._bodyMutationObserver=void 0)}get selectedItem(){return this._comboBox.selectedItem}setInputValue(e){this._comboBox.value=e}setTextFieldValue(e){this._inputElement.value=e}render(){var e;return(0,n.dy)(u||(u=f` <vaadin-combo-box-light .itemValuePath="${0}" .itemIdPath="${0}" .itemLabelPath="${0}" .items="${0}" .value="${0}" .filteredItems="${0}" .dataProvider="${0}" .allowCustomValue="${0}" .disabled="${0}" .required="${0}" ${0} @opened-changed="${0}" @filter-changed="${0}" @value-changed="${0}" attr-for-value="value"> <ha-textfield label="${0}" placeholder="${0}" ?disabled="${0}" ?required="${0}" validationMessage="${0}" .errorMessage="${0}" class="input" autocapitalize="none" autocomplete="off" autocorrect="off" input-spellcheck="false" .suffix="${0}" .icon="${0}" .invalid="${0}" .helper="${0}" helperPersistent> <slot name="icon" slot="leadingIcon"></slot> </ha-textfield> ${0} <ha-svg-icon role="button" tabindex="-1" aria-label="${0}" aria-expanded="${0}" class="toggle-button" .path="${0}" ?disabled="${0}" @click="${0}"></ha-svg-icon> </vaadin-combo-box-light> `),this.itemValuePath,this.itemIdPath,this.itemLabelPath,this.items,this.value||"",this.filteredItems,this.dataProvider,this.allowCustomValue,this.disabled,this.required,(0,a.t)(this.renderer||this._defaultRowRenderer),this._openedChanged,this._filterChanged,this._valueChanged,(0,l.o)(this.label),(0,l.o)(this.placeholder),this.disabled,this.required,(0,l.o)(this.validationMessage),this.errorMessage,(0,n.dy)(v||(v=f`<div style="width:28px" role="none presentation"></div>`)),this.icon,this.invalid,this.helper,this.value&&!this.hideClearIcon?(0,n.dy)(_||(_=f`<ha-svg-icon role="button" tabindex="-1" aria-label="${0}" class="clear-button" .path="${0}" @click="${0}"></ha-svg-icon>`),(0,l.o)(null===(e=this.hass)||void 0===e?void 0:e.localize("ui.common.clear")),g,this._clearValue):"",(0,l.o)(this.label),this.opened?"true":"false",this.opened?x:y,this.disabled,this._toggleOpen)}_clearValue(e){e.stopPropagation(),(0,c.B)(this,"value-changed",{value:void 0})}_toggleOpen(e){var t,i;this.opened?(null===(t=this._comboBox)||void 0===t||t.close(),e.stopPropagation()):null===(i=this._comboBox)||void 0===i||i.inputElement.focus()}_openedChanged(e){e.stopPropagation();const t=e.detail.value;if(setTimeout((()=>{this.opened=t}),0),(0,c.B)(this,"opened-changed",{value:e.detail.value}),t){const e=document.querySelector("vaadin-combo-box-overlay");e&&this._removeInert(e),this._observeBody()}else{var i;null===(i=this._bodyMutationObserver)||void 0===i||i.disconnect(),this._bodyMutationObserver=void 0}}_observeBody(){"MutationObserver"in window&&!this._bodyMutationObserver&&(this._bodyMutationObserver=new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{"VAADIN-COMBO-BOX-OVERLAY"===e.nodeName&&this._removeInert(e)})),e.removedNodes.forEach((e=>{var t;"VAADIN-COMBO-BOX-OVERLAY"===e.nodeName&&(null===(t=this._overlayMutationObserver)||void 0===t||t.disconnect(),this._overlayMutationObserver=void 0)}))}))})),this._bodyMutationObserver.observe(document.body,{childList:!0}))}_removeInert(e){var t;if(e.inert)return e.inert=!1,null===(t=this._overlayMutationObserver)||void 0===t||t.disconnect(),void(this._overlayMutationObserver=void 0);"MutationObserver"in window&&!this._overlayMutationObserver&&(this._overlayMutationObserver=new MutationObserver((e=>{e.forEach((e=>{if("inert"===e.attributeName){const i=e.target;var t;if(i.inert)null===(t=this._overlayMutationObserver)||void 0===t||t.disconnect(),this._overlayMutationObserver=void 0,i.inert=!1}}))})),this._overlayMutationObserver.observe(e,{attributes:!0}))}_filterChanged(e){e.stopPropagation(),(0,c.B)(this,"filter-changed",{value:e.detail.value})}_valueChanged(e){e.stopPropagation(),this.allowCustomValue||(this._comboBox._closeOnBlurIsPrevented=!0);const t=e.detail.value;t!==this.value&&(0,c.B)(this,"value-changed",{value:t||void 0})}constructor(...e){super(...e),this.invalid=!1,this.icon=!1,this.allowCustomValue=!1,this.itemValuePath="value",this.itemLabelPath="label",this.disabled=!1,this.required=!1,this.opened=!1,this.hideClearIcon=!1,this._defaultRowRenderer=e=>(0,n.dy)(m||(m=f` <ha-combo-box-item type="button"> ${0} </ha-combo-box-item> `),this.itemLabelPath?e[this.itemLabelPath]:e)}}C.styles=(0,n.iv)(b||(b=f`:host{display:block;width:100%}vaadin-combo-box-light{position:relative;--vaadin-combo-box-overlay-max-height:calc(45vh - 56px)}ha-textfield{width:100%}ha-textfield>ha-icon-button{--mdc-icon-button-size:24px;padding:2px;color:var(--secondary-text-color)}ha-svg-icon{color:var(--input-dropdown-icon-color);position:absolute;cursor:pointer}.toggle-button{right:12px;top:-10px;inset-inline-start:initial;inset-inline-end:12px;direction:var(--direction)}:host([opened]) .toggle-button{color:var(--primary-color)}.toggle-button[disabled]{color:var(--disabled-text-color);pointer-events:none}.clear-button{--mdc-icon-size:20px;top:-7px;right:36px;inset-inline-start:initial;inset-inline-end:36px;direction:var(--direction)}`)),(0,o.__decorate)([(0,d.Cb)({attribute:!1})],C.prototype,"hass",void 0),(0,o.__decorate)([(0,d.Cb)()],C.prototype,"label",void 0),(0,o.__decorate)([(0,d.Cb)()],C.prototype,"value",void 0),(0,o.__decorate)([(0,d.Cb)()],C.prototype,"placeholder",void 0),(0,o.__decorate)([(0,d.Cb)({attribute:!1})],C.prototype,"validationMessage",void 0),(0,o.__decorate)([(0,d.Cb)()],C.prototype,"helper",void 0),(0,o.__decorate)([(0,d.Cb)({attribute:"error-message"})],C.prototype,"errorMessage",void 0),(0,o.__decorate)([(0,d.Cb)({type:Boolean})],C.prototype,"invalid",void 0),(0,o.__decorate)([(0,d.Cb)({type:Boolean})],C.prototype,"icon",void 0),(0,o.__decorate)([(0,d.Cb)({attribute:!1})],C.prototype,"items",void 0),(0,o.__decorate)([(0,d.Cb)({attribute:!1})],C.prototype,"filteredItems",void 0),(0,o.__decorate)([(0,d.Cb)({attribute:!1})],C.prototype,"dataProvider",void 0),(0,o.__decorate)([(0,d.Cb)({attribute:"allow-custom-value",type:Boolean})],C.prototype,"allowCustomValue",void 0),(0,o.__decorate)([(0,d.Cb)({attribute:"item-value-path"})],C.prototype,"itemValuePath",void 0),(0,o.__decorate)([(0,d.Cb)({attribute:"item-label-path"})],C.prototype,"itemLabelPath",void 0),(0,o.__decorate)([(0,d.Cb)({attribute:"item-id-path"})],C.prototype,"itemIdPath",void 0),(0,o.__decorate)([(0,d.Cb)({attribute:!1})],C.prototype,"renderer",void 0),(0,o.__decorate)([(0,d.Cb)({type:Boolean})],C.prototype,"disabled",void 0),(0,o.__decorate)([(0,d.Cb)({type:Boolean})],C.prototype,"required",void 0),(0,o.__decorate)([(0,d.Cb)({type:Boolean,reflect:!0})],C.prototype,"opened",void 0),(0,o.__decorate)([(0,d.Cb)({type:Boolean,attribute:"hide-clear-icon"})],C.prototype,"hideClearIcon",void 0),(0,o.__decorate)([(0,d.IO)("vaadin-combo-box-light",!0)],C.prototype,"_comboBox",void 0),(0,o.__decorate)([(0,d.IO)("ha-textfield",!0)],C.prototype,"_inputElement",void 0),C=(0,o.__decorate)([(0,d.Mo)("ha-combo-box")],C),t()}catch(p){t(p)}}))},53166:function(e,t,i){i(26847),i(27530);var o=i(73742),a=i(3416),r=i(24196),s=i(59048),n=i(7616),d=i(31733),l=i(39884);let c,h,p=e=>e;class u extends a.a{render(){const e={"mdc-form-field--align-end":this.alignEnd,"mdc-form-field--space-between":this.spaceBetween,"mdc-form-field--nowrap":this.nowrap};return(0,s.dy)(c||(c=p` <div class="mdc-form-field ${0}"> <slot></slot> <label class="mdc-label" @click="${0}"> <slot name="label">${0}</slot> </label> </div>`),(0,d.$)(e),this._labelClick,this.label)}_labelClick(){const e=this.input;if(e&&(e.focus(),!e.disabled))switch(e.tagName){case"HA-CHECKBOX":e.checked=!e.checked,(0,l.B)(e,"change");break;case"HA-RADIO":e.checked=!0,(0,l.B)(e,"change");break;default:e.click()}}constructor(...e){super(...e),this.disabled=!1}}u.styles=[r.W,(0,s.iv)(h||(h=p`:host(:not([alignEnd])) ::slotted(ha-switch){margin-right:10px;margin-inline-end:10px;margin-inline-start:inline}.mdc-form-field{align-items:var(--ha-formfield-align-items,center);gap:4px}.mdc-form-field>label{direction:var(--direction);margin-inline-start:0;margin-inline-end:auto;padding:0}:host([disabled]) label{color:var(--disabled-text-color)}`))],(0,o.__decorate)([(0,n.Cb)({type:Boolean,reflect:!0})],u.prototype,"disabled",void 0),u=(0,o.__decorate)([(0,n.Mo)("ha-formfield")],u)},64881:function(e,t,i){var o=i(73742),a=i(92560),r=i(84862),s=i(7616);class n extends a.Kh{}n.styles=r.W,n=(0,o.__decorate)([(0,s.Mo)("ha-list")],n)},53898:function(e,t,i){i.d(t,{C:()=>l,t:()=>c});var o=i(73742),a=i(74789),r=i(62693),s=i(59048),n=i(7616);let d;const l=[r.W,(0,s.iv)(d||(d=(e=>e)`:host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color)}md-item{overflow:var(--md-item-overflow,hidden);align-items:var(--md-item-align-items,center);gap:var(--ha-md-list-item-gap,16px)}`))];class c extends a.d{}c.styles=l,c=(0,o.__decorate)([(0,n.Mo)("ha-md-list-item")],c)},39765:function(e,t,i){var o=i(73742),a=i(69287),r=i(70840),s=i(59048),n=i(7616),d=i(31733);i(64881);let l,c=e=>e;class h extends a.HB{get listElement(){return this.listElement_||(this.listElement_=this.renderRoot.querySelector("ha-list")),this.listElement_}renderList(){const e="menu"===this.innerRole?"menuitem":"option",t=this.renderListClasses();return(0,s.dy)(l||(l=c`<ha-list rootTabbable .innerAriaLabel="${0}" .innerRole="${0}" .multi="${0}" class="${0}" .itemRoles="${0}" .wrapFocus="${0}" .activatable="${0}" @action="${0}"> <slot></slot> </ha-list>`),this.innerAriaLabel,this.innerRole,this.multi,(0,d.$)(t),e,this.wrapFocus,this.activatable,this.onAction)}}h.styles=r.W,h=(0,o.__decorate)([(0,n.Mo)("ha-menu")],h)},37492:function(e,t,i){i(26847),i(27530);var o=i(73742),a=i(94068),r=i(16880),s=i(59048),n=i(7616),d=i(83054);let l,c,h,p,u=e=>e;class v extends a.P{updated(e){super.updated(e),(e.has("invalid")||e.has("errorMessage"))&&(this.setCustomValidity(this.invalid?this.errorMessage||this.validationMessage||"Invalid":""),(this.invalid||this.validateOnInitialRender||e.has("invalid")&&void 0!==e.get("invalid"))&&this.reportValidity()),e.has("autocomplete")&&(this.autocomplete?this.formElement.setAttribute("autocomplete",this.autocomplete):this.formElement.removeAttribute("autocomplete")),e.has("autocorrect")&&(this.autocorrect?this.formElement.setAttribute("autocorrect",this.autocorrect):this.formElement.removeAttribute("autocorrect")),e.has("inputSpellcheck")&&(this.inputSpellcheck?this.formElement.setAttribute("spellcheck",this.inputSpellcheck):this.formElement.removeAttribute("spellcheck"))}renderIcon(e,t=!1){const i=t?"trailing":"leading";return(0,s.dy)(l||(l=u` <span class="mdc-text-field__icon mdc-text-field__icon--${0}" tabindex="${0}"> <slot name="${0}Icon"></slot> </span> `),i,t?1:-1,i)}constructor(...e){super(...e),this.icon=!1,this.iconTrailing=!1}}v.styles=[r.W,(0,s.iv)(c||(c=u`.mdc-text-field__input{width:var(--ha-textfield-input-width,100%)}.mdc-text-field:not(.mdc-text-field--with-leading-icon){padding:var(--text-field-padding,0px 16px)}.mdc-text-field__affix--suffix{padding-left:var(--text-field-suffix-padding-left,12px);padding-right:var(--text-field-suffix-padding-right,0px);padding-inline-start:var(--text-field-suffix-padding-left,12px);padding-inline-end:var(--text-field-suffix-padding-right,0px);direction:ltr}.mdc-text-field--with-leading-icon{padding-inline-start:var(--text-field-suffix-padding-left,0px);padding-inline-end:var(--text-field-suffix-padding-right,16px);direction:var(--direction)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:var(--text-field-suffix-padding-left,0px);padding-right:var(--text-field-suffix-padding-right,0px);padding-inline-start:var(--text-field-suffix-padding-left,0px);padding-inline-end:var(--text-field-suffix-padding-right,0px)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__affix--suffix{color:var(--secondary-text-color)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__icon{color:var(--secondary-text-color)}.mdc-text-field__icon--leading{margin-inline-start:16px;margin-inline-end:8px;direction:var(--direction)}.mdc-text-field__icon--trailing{padding:var(--textfield-icon-trailing-padding,12px)}.mdc-floating-label:not(.mdc-floating-label--float-above){max-width:calc(100% - 16px)}.mdc-floating-label--float-above{max-width:calc((100% - 16px)/ .75);transition:none}input{text-align:var(--text-field-text-align,start)}input[type=color]{height:20px}::-ms-reveal{display:none}:host([no-spinner]) input::-webkit-inner-spin-button,:host([no-spinner]) input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=color]::-webkit-color-swatch-wrapper{padding:0}:host([no-spinner]) input[type=number]{-moz-appearance:textfield}.mdc-text-field__ripple{overflow:hidden}.mdc-text-field{overflow:var(--text-field-overflow)}.mdc-floating-label{padding-inline-end:16px;padding-inline-start:initial;inset-inline-start:16px!important;inset-inline-end:initial!important;transform-origin:var(--float-start);direction:var(--direction);text-align:var(--float-start);box-sizing:border-box;text-overflow:ellipsis}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px - var(--text-field-suffix-padding-left,0px));inset-inline-start:calc(48px + var(--text-field-suffix-padding-left,0px))!important;inset-inline-end:initial!important;direction:var(--direction)}.mdc-text-field__input[type=number]{direction:var(--direction)}.mdc-text-field__affix--prefix{padding-right:var(--text-field-prefix-padding-right,2px);padding-inline-end:var(--text-field-prefix-padding-right,2px);padding-inline-start:initial}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__affix--prefix{color:var(--mdc-text-field-label-ink-color)}#helper-text ha-markdown{display:inline-block}`)),"rtl"===d.E.document.dir?(0,s.iv)(h||(h=u`.mdc-floating-label,.mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field__icon--leading,.mdc-text-field__input[type=number]{direction:rtl;--direction:rtl}`)):(0,s.iv)(p||(p=u``))],(0,o.__decorate)([(0,n.Cb)({type:Boolean})],v.prototype,"invalid",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:"error-message"})],v.prototype,"errorMessage",void 0),(0,o.__decorate)([(0,n.Cb)({type:Boolean})],v.prototype,"icon",void 0),(0,o.__decorate)([(0,n.Cb)({type:Boolean})],v.prototype,"iconTrailing",void 0),(0,o.__decorate)([(0,n.Cb)()],v.prototype,"autocomplete",void 0),(0,o.__decorate)([(0,n.Cb)()],v.prototype,"autocorrect",void 0),(0,o.__decorate)([(0,n.Cb)({attribute:"input-spellcheck"})],v.prototype,"inputSpellcheck",void 0),(0,o.__decorate)([(0,n.IO)("input")],v.prototype,"formElement",void 0),v=(0,o.__decorate)([(0,n.Mo)("ha-textfield")],v)},58047:function(e,t,i){i(26847),i(81738),i(94814),i(1455),i(27530);var o=i(73742),a=i(59048),r=i(7616),s=(i(48017),i(993),i(37492),i(39884));let n,d,l,c=e=>e;class h extends a.oi{focus(){var e;null===(e=this._input)||void 0===e||e.focus()}render(){return(0,a.dy)(n||(n=c` <ha-textfield .autofocus="${0}" .label="${0}" .value="${0}" icon .iconTrailing="${0}" @input="${0}"> <slot name="prefix" slot="leadingIcon"> <ha-svg-icon tabindex="-1" class="prefix" .path="${0}"></ha-svg-icon> </slot> <div class="trailing" slot="trailingIcon"> ${0} <slot name="suffix"></slot> </div> </ha-textfield> `),this.autofocus,this.label||this.hass.localize("ui.common.search"),this.filter||"",this.filter||this.suffix,this._filterInputChanged,"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",this.filter&&(0,a.dy)(d||(d=c` <ha-icon-button @click="${0}" .label="${0}" .path="${0}" class="clear-button"></ha-icon-button> `),this._clearSearch,this.hass.localize("ui.common.clear"),"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"))}async _filterChanged(e){(0,s.B)(this,"value-changed",{value:String(e)})}async _filterInputChanged(e){this._filterChanged(e.target.value)}async _clearSearch(){this._filterChanged("")}constructor(...e){super(...e),this.suffix=!1,this.autofocus=!1}}h.styles=(0,a.iv)(l||(l=c`:host{display:inline-flex}ha-icon-button,ha-svg-icon{color:var(--primary-text-color)}ha-svg-icon{outline:0}.clear-button{--mdc-icon-size:20px}ha-textfield{display:inherit}.trailing{display:flex;align-items:center}`)),(0,o.__decorate)([(0,r.Cb)({attribute:!1})],h.prototype,"hass",void 0),(0,o.__decorate)([(0,r.Cb)()],h.prototype,"filter",void 0),(0,o.__decorate)([(0,r.Cb)({type:Boolean})],h.prototype,"suffix",void 0),(0,o.__decorate)([(0,r.Cb)({type:Boolean})],h.prototype,"autofocus",void 0),(0,o.__decorate)([(0,r.Cb)({type:String})],h.prototype,"label",void 0),(0,o.__decorate)([(0,r.IO)("ha-textfield",!0)],h.prototype,"_input",void 0),h=(0,o.__decorate)([(0,r.Mo)("search-input")],h)},14159:function(e,t,i){i.d(t,{Dm:()=>n,jg:()=>r,p4:()=>a,pN:()=>s,xC:()=>o});i(6988),i(70820),i(56303);const o=e=>{let t=e;return"string"==typeof e&&(t=parseInt(e,16)),"0x"+t.toString(16).padStart(4,"0")},a=e=>e.split(":").slice(-4).reverse().join(""),r=(e,t)=>{const i=e.user_given_name?e.user_given_name:e.name,o=t.user_given_name?t.user_given_name:t.name;return i.localeCompare(o)},s=(e,t)=>{const i=e.name,o=t.name;return i.localeCompare(o)},n=e=>`${e.name} (Endpoint id: ${e.endpoint_id}, Id: ${o(e.id)}, Type: ${e.type})`},83366:function(e,t,i){i.a(e,(async function(e,o){try{i.r(t),i.d(t,{ZHANetworkVisualizationPage:()=>g});i(39710),i(26847),i(2394),i(81738),i(22960),i(6989),i(70820),i(1455),i(64455),i(56389),i(6202),i(27530);var a=i(73742),r=(i(98334),i(59048)),s=i(7616),n=i(65092),d=i(67050),l=(i(58047),i(6439)),c=(i(41037),i(63752),i(53166),i(68986)),h=(i(92622),i(14159)),p=i(87106),u=e([l,n,p]);[l,n,p]=u.then?(await u)():u;let v,_,m,b,f=e=>e;class g extends r.oi{firstUpdated(e){super.firstUpdated(e),this.zoomedDeviceIdFromURL&&(this.zoomedDeviceId=this.zoomedDeviceIdFromURL),this.hass&&this._fetchData(),this._network=new n.Zc(this._visualization,{},{autoResize:!0,layout:{improvedLayout:!0},physics:{barnesHut:{springConstant:0,avoidOverlap:10,damping:.09}},nodes:{font:{multi:"html"}},edges:{smooth:{enabled:!0,type:"continuous",forceDirection:"none",roundness:.6}}}),this._network.on("doubleClick",(e=>{const t=e.nodes[0];if(t){const e=this._devices.get(t);e&&(0,d.c)(`/config/devices/device/${e.device_reg_id}`)}})),this._network.on("click",(e=>{const t=e.nodes[0];if(t){const e=this._devices.get(t);e&&this._autoZoom&&(this.zoomedDeviceId=e.device_reg_id,this._zoomToDevice())}})),this._network.on("stabilized",(()=>{this.zoomedDeviceId&&this._zoomToDevice()}))}render(){return(0,r.dy)(v||(v=f` <hass-tabs-subpage .tabs="${0}" .hass="${0}" .narrow="${0}" .isWide="${0}" .route="${0}" .header="${0}"> ${0} <div class="header"> ${0} <ha-device-picker .hass="${0}" .value="${0}" .label="${0}" .deviceFilter="${0}" @value-changed="${0}"></ha-device-picker> <div class="controls"> <ha-formfield .label="${0}"> <ha-checkbox @change="${0}" .checked="${0}"> </ha-checkbox> </ha-formfield> <ha-formfield .label="${0}"><ha-checkbox @change="${0}" .checked="${0}"> </ha-checkbox></ha-formfield> <mwc-button @click="${0}"> ${0} </mwc-button> </div> </div> <div id="visualization"></div> </hass-tabs-subpage> `),p.zhaTabs,this.hass,this.narrow,this.isWide,this.route,this.hass.localize("ui.panel.config.zha.visualization.header"),this.narrow?(0,r.dy)(_||(_=f` <div slot="header"> <search-input .hass="${0}" class="header" @value-changed="${0}" .filter="${0}" .label="${0}"> </search-input> </div> `),this.hass,this._handleSearchChange,this._filter,this.hass.localize("ui.panel.config.zha.visualization.highlight_label")):"",this.narrow?"":(0,r.dy)(m||(m=f`<search-input .hass="${0}" @value-changed="${0}" .filter="${0}" .label="${0}"></search-input>`),this.hass,this._handleSearchChange,this._filter,this.hass.localize("ui.panel.config.zha.visualization.highlight_label")),this.hass,this.zoomedDeviceId,this.hass.localize("ui.panel.config.zha.visualization.zoom_label"),this._filterDevices,this._onZoomToDevice,this.hass.localize("ui.panel.config.zha.visualization.auto_zoom"),this._handleAutoZoomCheckboxChange,this._autoZoom,this.hass.localize("ui.panel.config.zha.visualization.enable_physics"),this._handlePhysicsCheckboxChange,this._enablePhysics,this._refreshTopology,this.hass.localize("ui.panel.config.zha.visualization.refresh_topology"))}async _fetchData(){const e=await(0,c.LO)(this.hass);this._devices=new Map(e.map((e=>[e.ieee,e]))),this._devicesByDeviceId=new Map(e.map((e=>[e.device_reg_id,e]))),this._updateDevices(e)}_updateDevices(e){var t;this._nodes=[];const i=[];e.forEach((e=>{this._nodes.push({id:e.ieee,label:this._buildLabel(e),shape:this._getShape(e),mass:this._getMass(e),fixed:"Coordinator"===e.device_type,color:{background:e.available?"#66FF99":"#FF9999"}}),e.neighbors&&e.neighbors.length>0&&e.neighbors.forEach((t=>{const o=i.findIndex((i=>e.ieee===i.to&&t.ieee===i.from));if(-1===o){const o=this._getEdgeOptions(parseInt(t.lqi));i.push({from:e.ieee,to:t.ieee,label:t.lqi+"",color:o.color,width:o.width,length:o.length,physics:o.physics,arrows:{from:{enabled:"Child"!==t.relationship}},dashes:"Child"!==t.relationship})}else{const e=this._getEdgeOptions(Math.min(parseInt(i[o].label),parseInt(t.lqi)));i[o].label+=" & "+t.lqi,i[o].color=e.color,i[o].width=e.width,i[o].length=e.length,i[o].physics=e.physics,delete i[o].arrows,delete i[o].dashes}}))})),null===(t=this._network)||void 0===t||t.setData({nodes:this._nodes,edges:i})}_getEdgeOptions(e){const t=2e3-4*e;return e>192?{color:{color:"#17ab00",highlight:"#17ab00"},width:e/20,length:t,physics:!1}:e>128?{color:{color:"#e6b402",highlight:"#e6b402"},width:9,length:t,physics:!1}:{color:{color:"#bfbfbf",highlight:"#bfbfbf"},width:1,length:t,physics:!1}}_getMass(e){return e.available?"Coordinator"===e.device_type?2:"Router"===e.device_type?4:5:6}_getShape(e){return"Coordinator"===e.device_type?"box":"Router"===e.device_type?"ellipse":"circle"}_buildLabel(e){let t=null!==e.user_given_name?`<b>${e.user_given_name}</b>\n`:"";return t+=`<b>IEEE: </b>${e.ieee}`,t+=`\n<b>Device Type: </b>${e.device_type.replace("_"," ")}`,null!=e.nwk&&(t+=`\n<b>NWK: </b>${(0,h.xC)(e.nwk)}`),null!=e.manufacturer&&null!=e.model?t+=`\n<b>Device: </b>${e.manufacturer} ${e.model}`:t+="\n<b>Device is not in <i>'zigbee.db'</i></b>",e.area_id&&(t+=`\n<b>Area ID: </b>${e.area_id}`),t}_handleSearchChange(e){this._filter=e.detail.value;const t=this._filter.toLowerCase();if(this._network)if(this._filter){const e=[];this._nodes.forEach((i=>{i.label&&i.label.toLowerCase().includes(t)&&e.push(i.id)})),this.zoomedDeviceId="",this._zoomOut(),this._network.selectNodes(e,!0)}else this._network.unselectAll()}_onZoomToDevice(e){e.stopPropagation(),this.zoomedDeviceId=e.detail.value,this._network&&this._zoomToDevice()}_zoomToDevice(){if(this._filter="",this.zoomedDeviceId){const e=this._devicesByDeviceId.get(this.zoomedDeviceId);e&&this._network.fit({nodes:[e.ieee],animation:{duration:500,easingFunction:"easeInQuad"}})}else this._zoomOut()}_zoomOut(){this._network.fit({nodes:[],animation:{duration:500,easingFunction:"easeOutQuad"}})}async _refreshTopology(){await(0,c.f3)(this.hass)}_handleAutoZoomCheckboxChange(e){this._autoZoom=e.target.checked}_handlePhysicsCheckboxChange(e){this._enablePhysics=e.target.checked,this._network.setOptions(this._enablePhysics?{physics:{enabled:!0}}:{physics:{enabled:!1}})}static get styles(){return[(0,r.iv)(b||(b=f`.header{border-bottom:1px solid var(--divider-color);padding:0 8px;display:flex;align-items:center;justify-content:space-between;height:var(--header-height);box-sizing:border-box}.header>*{padding:0 8px}:host([narrow]) .header{flex-direction:column;align-items:stretch;height:var(--header-height) * 2}.search-toolbar{display:flex;align-items:center;color:var(--secondary-text-color);padding:0 16px}search-input{flex:1;display:block}search-input.header{color:var(--secondary-text-color)}ha-device-picker{flex:1}.controls{display:flex;align-items:center;justify-content:space-between}#visualization{height:calc(100% - var(--header-height));width:100%}:host([narrow]) #visualization{height:calc(100% - (var(--header-height) * 2))}`))]}constructor(...e){super(...e),this.narrow=!1,this.isWide=!1,this._devices=new Map,this._devicesByDeviceId=new Map,this._nodes=[],this._autoZoom=!0,this._enablePhysics=!0,this._filterDevices=e=>{if(!this.hass)return!1;for(const t of e.identifiers)for(const e of t)if("zha"===e)return!0;return!1}}}(0,a.__decorate)([(0,s.Cb)({attribute:!1})],g.prototype,"hass",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],g.prototype,"route",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,reflect:!0})],g.prototype,"narrow",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:"is-wide",type:Boolean})],g.prototype,"isWide",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],g.prototype,"zoomedDeviceIdFromURL",void 0),(0,a.__decorate)([(0,s.SB)()],g.prototype,"zoomedDeviceId",void 0),(0,a.__decorate)([(0,s.IO)("#visualization",!0)],g.prototype,"_visualization",void 0),(0,a.__decorate)([(0,s.SB)()],g.prototype,"_devices",void 0),(0,a.__decorate)([(0,s.SB)()],g.prototype,"_devicesByDeviceId",void 0),(0,a.__decorate)([(0,s.SB)()],g.prototype,"_nodes",void 0),(0,a.__decorate)([(0,s.SB)()],g.prototype,"_network",void 0),(0,a.__decorate)([(0,s.SB)()],g.prototype,"_filter",void 0),g=(0,a.__decorate)([(0,s.Mo)("zha-network-visualization-page")],g),o()}catch(v){o(v)}}))},83788:function(e,t,i){i.a(e,(async function(e,t){try{i(26847),i(1455),i(27530);"function"!=typeof window.ResizeObserver&&(window.ResizeObserver=(await i.e("89931").then(i.bind(i,11860))).default),t()}catch(o){t(o)}}),1)}}]);
//# sourceMappingURL=432.ee57eff933556ff6.js.map