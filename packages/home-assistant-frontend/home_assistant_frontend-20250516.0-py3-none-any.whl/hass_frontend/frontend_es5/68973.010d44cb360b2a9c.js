"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["68973"],{92535:function(e,t,i){i.a(e,(async function(e,o){try{i.d(t,{t:()=>l});var r=i(40142),a=i(45691),s=e([r,a]);function l(e,t,i,o){const s=o/60/24,n=new Date(e);if(s>88)return 0===n.getMonth()?`{bold|${(0,r.NC)(n,t,i)}}`:(0,r.Nh)(n,t,i);if(s>35)return 1===n.getDate()?`{bold|${(0,r.ud)(n,t,i)}}`:(0,r.ud)(n,t,i);if(s>7){const e=(0,r.ud)(n,t,i);return 1===n.getDate()?`{bold|${e}}`:e}return s>2?(0,r.U8)(n,t,i):o&&o<5?(0,a.Vu)(n,t,i):0===n.getHours()&&0===n.getMinutes()&&0===n.getSeconds()?`{bold|${(0,r.ud)(n,t,i)}}`:(0,a.mr)(n,t,i)}[r,a]=s.then?(await s)():s,o()}catch(n){o(n)}}))},37008:function(e,t,i){i.a(e,(async function(e,o){try{i.d(t,{Q:()=>D});i(26847),i(2394),i(44438),i(81738),i(94814),i(29981),i(22960),i(6989),i(93190),i(87799),i(1455),i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761),i(27530);var r=i(73742),a=i(72644),s=i(64346),n=i(19627),l=i(59048),d=i(7616),c=i(31733),h=i(20480),p=i(55815),u=i(39884),g=i(86339),v=i(97133),y=i(2913),m=(i(48017),i(92535)),_=i(45332),x=(i(84447),e([s,m]));[s,m]=x.then?(await x)():x;let b,f,w,C,L,k,V=e=>e;const S="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",P="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",Z="M12,4C14.1,4 16.1,4.8 17.6,6.3C20.7,9.4 20.7,14.5 17.6,17.6C15.8,19.5 13.3,20.2 10.9,19.9L11.4,17.9C13.1,18.1 14.9,17.5 16.2,16.2C18.5,13.9 18.5,10.1 16.2,7.7C15.1,6.6 13.5,6 12,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15 3.3,11 5.1,7.9L6.6,9.4C5.5,11.6 5.9,14.4 7.8,16.2C8.3,16.7 8.9,17.1 9.6,17.4L9,19.4C8,19 7.1,18.4 6.3,17.6Z",D=3e5,$=10,A=6,O=300;class T extends l.oi{disconnectedCallback(){var e;for(super.disconnectedCallback();this._listeners.length;)this._listeners.pop()();null===(e=this.chart)||void 0===e||e.dispose(),this.chart=void 0,this._originalZrFlush=void 0}connectedCallback(){super.connectedCallback(),this.hasUpdated&&this._setupChart(),this._listeners.push((0,g.K)("(prefers-reduced-motion)",(e=>{this._reducedMotion!==e&&(this._reducedMotion=e,this._setChartOptions({animation:!this._reducedMotion}))})));const e=e=>{var t,i;!this._modifierPressed&&(y.V&&"Meta"===e.key||!y.V&&"Control"===e.key)&&(this._modifierPressed=!0,null!==(t=this.options)&&void 0!==t&&t.dataZoom||this._setChartOptions({dataZoom:this._getDataZoomConfig()}),null===(i=this.chart)||void 0===i||i.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}))},t=e=>{var t,i;this._modifierPressed&&(y.V&&"Meta"===e.key||!y.V&&"Control"===e.key)&&(this._modifierPressed=!1,null!==(t=this.options)&&void 0!==t&&t.dataZoom||this._setChartOptions({dataZoom:this._getDataZoomConfig()}),null===(i=this.chart)||void 0===i||i.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!1}))};window.addEventListener("keydown",e),window.addEventListener("keyup",t),this._listeners.push((()=>window.removeEventListener("keydown",e)),(()=>window.removeEventListener("keyup",t)))}firstUpdated(){this._setupChart()}willUpdate(e){if(!this.chart)return;if(e.has("_themes"))return void this._setupChart();let t={};(e.has("data")||e.has("_hiddenDatasets"))&&(t.series=this._getSeries()),e.has("options")?t=Object.assign(Object.assign({},t),this._createOptions()):this._isTouchDevice&&e.has("_isZoomed")&&(t.dataZoom=this._getDataZoomConfig()),Object.keys(t).length>0&&this._setChartOptions(t)}render(){return(0,l.dy)(b||(b=V` <div class="container ${0}" style="${0}"> <div class="chart-container" style="${0}"> <div class="chart"></div> </div> ${0} ${0} </div> `),(0,c.$)({"has-height":!!this.height}),(0,h.V)({height:this.height}),(0,h.V)({height:this.height?void 0:`${this._getDefaultHeight()}px`}),this._renderLegend(),this._isZoomed?(0,l.dy)(f||(f=V`<ha-icon-button class="zoom-reset" .path="${0}" @click="${0}" title="${0}"></ha-icon-button>`),Z,this._handleZoomReset,this.hass.localize("ui.components.history_charts.zoom_reset")):l.Ld)}_renderLegend(){var e;if(null===(e=this.options)||void 0===e||!e.legend||!this.data)return l.Ld;const t=(0,_.r)(this.options.legend)[0];if(!t.show)return l.Ld;const i=(0,_.r)(this.data),o=t.data||i.filter((e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.length)&&(e.id||e.name)})).map((e=>{var t;return null!==(t=e.name)&&void 0!==t?t:e.id}))||[],r=window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches?A:$;return(0,l.dy)(w||(w=V`<div class="${0}"> <ul> ${0} ${0} </ul> </div>`),(0,c.$)({"chart-legend":!0,"multiple-items":o.length>1}),o.map(((e,t)=>{var o;if(!this.expandLegend&&t>=r)return l.Ld;const a=i.find((t=>t.id===e||t.name===e)),s=null==a?void 0:a.color,n=null==a||null===(o=a.itemStyle)||void 0===o?void 0:o.borderColor;return(0,l.dy)(C||(C=V`<li .name="${0}" @click="${0}" class="${0}" .title="${0}"> <div class="bullet" style="${0}"></div> <div class="label">${0}</div> </li>`),e,this._legendClick,(0,c.$)({hidden:this._hiddenDatasets.has(e)}),e,(0,h.V)({backgroundColor:s,borderColor:n||s}),e)})),o.length>r?(0,l.dy)(L||(L=V`<li> <ha-assist-chip @click="${0}" filled label="${0}"> <ha-svg-icon slot="trailing-icon" .path="${0}"></ha-svg-icon> </ha-assist-chip> </li>`),this._toggleExpandedLegend,this.expandLegend?this.hass.localize("ui.components.history_charts.collapse_legend"):`${this.hass.localize("ui.components.history_charts.expand_legend")} (${o.length-r})`,this.expandLegend?P:S):l.Ld)}async _setupChart(){if(this._loading)return;const e=this.renderRoot.querySelector(".chart");this._loading=!0;try{var t,o;this.chart&&this.chart.dispose();const r=(await Promise.all([i.e("75166"),i.e("72217"),i.e("71352"),i.e("41717")]).then(i.bind(i,68234))).default;null!==(t=this.extraComponents)&&void 0!==t&&t.length&&r.use(this.extraComponents),r.registerTheme("custom",this._createTheme()),this.chart=r.init(e,"custom"),this.chart.on("datazoom",(e=>{var t,i;const{start:o,end:r}=null!==(t=null===(i=e.batch)||void 0===i?void 0:i[0])&&void 0!==t?t:e;this._isZoomed=0!==o||100!==r,this._zoomRatio=(r-o)/100})),this.chart.on("click",(e=>{(0,u.B)(this,"chart-click",e)})),this.chart.getZr().on("dblclick",this._handleClickZoom),this._isTouchDevice&&this.chart.getZr().on("click",(e=>{e.zrByTouch&&(this._lastTapTime&&Date.now()-this._lastTapTime<O?this._handleClickZoom(e):this._lastTapTime=Date.now())}));const a=(0,_.r)((null===(o=this.options)||void 0===o?void 0:o.legend)||[])[0];Object.entries((null==a?void 0:a.selected)||{}).forEach((([e,t])=>{!1===t&&this._hiddenDatasets.add(e)})),this.chart.setOption(Object.assign(Object.assign({},this._createOptions()),{},{series:this._getSeries()}))}finally{this._loading=!1}}_getDataZoomConfig(){var e,t,i,o,r,a;const s=null!==(e=null===(t=this.options)||void 0===t||null===(t=t.xAxis)||void 0===t?void 0:t[0])&&void 0!==e?e:null===(i=this.options)||void 0===i?void 0:i.xAxis,n=null!==(o=null===(r=this.options)||void 0===r||null===(r=r.yAxis)||void 0===r?void 0:r[0])&&void 0!==o?o:null===(a=this.options)||void 0===a?void 0:a.yAxis;if("value"!==(null==s?void 0:s.type)||"category"!==(null==n?void 0:n.type))return{id:"dataZoom",type:"inside",orient:"horizontal",filterMode:"none",moveOnMouseMove:!this._isTouchDevice||this._isZoomed,preventDefaultMouseMove:!this._isTouchDevice||this._isZoomed,zoomLock:!this._isTouchDevice&&!this._modifierPressed}}_createOptions(){var e,t;let i=null===(e=this.options)||void 0===e?void 0:e.xAxis;i&&(i=Array.isArray(i)?i:[i],i=i.map((e=>{if("time"!==e.type||!1===e.show)return e;e.max&&e.min&&(this._minutesDifference=(0,n.X)(e.max,e.min));const t=this._minutesDifference/60/24;let i;return t&&(i=t>=89?24192e5:t>2?864e5:void 0),Object.assign(Object.assign({axisLine:{show:!1},splitLine:{show:!0}},e),{},{axisLabel:Object.assign({formatter:this._formatTimeLabel,rich:{bold:{fontWeight:"bold"}},hideOverlap:!0},e.axisLabel),minInterval:i})})));const o=Object.assign(Object.assign({animation:!this._reducedMotion,darkMode:null!==(t=this._themes.darkMode)&&void 0!==t&&t,aria:{show:!0},dataZoom:this._getDataZoomConfig(),toolbox:{top:1/0,left:1/0,feature:{dataZoom:{show:!0,yAxisIndex:!1,filterMode:"none"}},iconStyle:{opacity:0}}},this.options),{},{legend:{show:!1},xAxis:i});if(window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches&&o.tooltip){const e=Array.isArray(o.tooltip)?o.tooltip:[o.tooltip];e.forEach((e=>{e.confine=!0,e.appendTo=void 0,e.triggerOn="click"})),o.tooltip=e}return o}_createTheme(){const e=getComputedStyle(this);return{color:(0,p.o9)(e),backgroundColor:"transparent",textStyle:{color:e.getPropertyValue("--primary-text-color"),fontFamily:"Roboto, Noto, sans-serif"},title:{textStyle:{color:e.getPropertyValue("--primary-text-color")},subtextStyle:{color:e.getPropertyValue("--secondary-text-color")}},line:{lineStyle:{width:1.5},symbolSize:1,symbol:"circle",smooth:!1},bar:{itemStyle:{barBorderWidth:1.5}},categoryAxis:{axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!0,color:e.getPropertyValue("--primary-text-color")},splitLine:{show:!1,lineStyle:{color:e.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[e.getPropertyValue("--divider-color")+"3F",e.getPropertyValue("--divider-color")+"7F"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:e.getPropertyValue("--divider-color")}},axisTick:{show:!0,lineStyle:{color:e.getPropertyValue("--divider-color")}},axisLabel:{show:!0,color:e.getPropertyValue("--primary-text-color")},splitLine:{show:!0,lineStyle:{color:e.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[e.getPropertyValue("--divider-color")+"3F",e.getPropertyValue("--divider-color")+"7F"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:e.getPropertyValue("--divider-color")}},axisTick:{show:!0,lineStyle:{color:e.getPropertyValue("--divider-color")}},axisLabel:{show:!0,color:e.getPropertyValue("--primary-text-color")},splitLine:{show:!0,lineStyle:{color:e.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[e.getPropertyValue("--divider-color")+"3F",e.getPropertyValue("--divider-color")+"7F"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:e.getPropertyValue("--divider-color")}},axisTick:{show:!0,lineStyle:{color:e.getPropertyValue("--divider-color")}},axisLabel:{show:!0,color:e.getPropertyValue("--primary-text-color")},splitLine:{show:!0,lineStyle:{color:e.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[e.getPropertyValue("--divider-color")+"3F",e.getPropertyValue("--divider-color")+"7F"]}}},legend:{textStyle:{color:e.getPropertyValue("--primary-text-color")},inactiveColor:e.getPropertyValue("--disabled-text-color"),pageIconColor:e.getPropertyValue("--primary-text-color"),pageIconInactiveColor:e.getPropertyValue("--disabled-text-color"),pageTextStyle:{color:e.getPropertyValue("--secondary-text-color")}},tooltip:{backgroundColor:e.getPropertyValue("--card-background-color"),borderColor:e.getPropertyValue("--divider-color"),textStyle:{color:e.getPropertyValue("--primary-text-color"),fontSize:12},axisPointer:{lineStyle:{color:e.getPropertyValue("--info-color")},crossStyle:{color:e.getPropertyValue("--info-color")}},extraCssText:"direction:"+e.getPropertyValue("--direction")+";margin-inline-start:3px;margin-inline-end:8px;"},timeline:{}}}_getSeries(){var e,t,i;const o=(0,_.r)(this.data).filter((e=>{var t;return!this._hiddenDatasets.has(String(null!==(t=e.name)&&void 0!==t?t:e.id))})),r=null!==(e=null===(t=this.options)||void 0===t||null===(t=t.yAxis)||void 0===t?void 0:t[0])&&void 0!==e?e:null===(i=this.options)||void 0===i?void 0:i.yAxis;return"log"===(null==r?void 0:r.type)?o.map((e=>{var t;return"line"===e.type?Object.assign(Object.assign({},e),{},{data:null===(t=e.data)||void 0===t?void 0:t.map((e=>Array.isArray(e)?[e[0],"number"!=typeof e[1]||e[1]>0?e[1]:null,...e.slice(2)]:e))}):e})):o}_getDefaultHeight(){return Math.max(this.clientWidth/2,200)}_setChartOptions(e){if(!this.chart)return;if(!this._originalZrFlush){if((0,_.r)(this.data).reduce(((e,t)=>e+(t.data||[]).length),0)>1e4){const e=this.chart.getZr();this._originalZrFlush=e.flush,e.flush=()=>{setTimeout((()=>{var t;null===(t=this._originalZrFlush)||void 0===t||t.call(e)}),5)}}}const t=e.series?["series"]:[];this.chart.setOption(e,{replaceMerge:t})}_handleZoomReset(){var e;null===(e=this.chart)||void 0===e||e.dispatchAction({type:"dataZoom",start:0,end:100})}_legendClick(e){var t;if(!this.chart)return;const i=null===(t=e.currentTarget)||void 0===t?void 0:t.name;this._hiddenDatasets.has(i)?(this._hiddenDatasets.delete(i),(0,u.B)(this,"dataset-unhidden",{name:i})):(this._hiddenDatasets.add(i),(0,u.B)(this,"dataset-hidden",{name:i})),this.requestUpdate("_hiddenDatasets")}_toggleExpandedLegend(){this.expandLegend=!this.expandLegend,setTimeout((()=>{var e;null===(e=this.chart)||void 0===e||e.resize()}))}constructor(...e){super(...e),this.data=[],this._isZoomed=!1,this._zoomRatio=1,this._minutesDifference=1440,this._hiddenDatasets=new Set,this._modifierPressed=!1,this._isTouchDevice="ontouchstart"in window,this._resizeController=new s.Z(this,{callback:()=>{var e;return null===(e=this.chart)||void 0===e?void 0:e.resize()}}),this._loading=!1,this._reducedMotion=!1,this._listeners=[],this._formatTimeLabel=e=>(0,m.t)(e,this.hass.locale,this.hass.config,this._minutesDifference*this._zoomRatio),this._handleClickZoom=e=>{if(!this.chart)return;const t=this._isZoomed?[0,100]:[e.offsetX/this.chart.getWidth()*100-15,e.offsetX/this.chart.getWidth()*100+15];this.chart.dispatchAction({type:"dataZoom",start:t[0],end:t[1]})}}}T.styles=(0,l.iv)(k||(k=V`:host{display:block;position:relative;letter-spacing:normal}.container{display:flex;flex-direction:column;position:relative}.container.has-height{max-height:var(--chart-max-height,350px)}.chart-container{width:100%;max-height:var(--chart-max-height,350px)}.has-height .chart-container{flex:1}.chart{height:100%;width:100%}.zoom-reset{position:absolute;top:16px;right:4px;background:var(--card-background-color);border-radius:4px;--mdc-icon-button-size:32px;color:var(--primary-color);border:1px solid var(--divider-color)}.chart-legend{max-height:60%;overflow-y:auto;padding:12px 0 0;font-size:12px;color:var(--primary-text-color)}.chart-legend ul{margin:0;padding:0;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;gap:8px}.chart-legend li{height:24px;cursor:pointer;display:inline-flex;align-items:center;padding:0 2px;box-sizing:border-box;overflow:hidden}.chart-legend.multiple-items li{max-width:220px}.chart-legend .hidden{color:var(--secondary-text-color)}.chart-legend .label{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chart-legend .bullet{border-width:1px;border-style:solid;border-radius:50%;display:block;height:16px;width:16px;margin-right:4px;flex-shrink:0;box-sizing:border-box;margin-inline-end:4px;margin-inline-start:initial;direction:var(--direction)}.chart-legend .hidden .bullet{border-color:var(--secondary-text-color)!important;background-color:transparent!important}ha-assist-chip{height:100%;--_label-text-weight:500;--_leading-space:8px;--_trailing-space:8px;--_icon-label-space:4px}`)),(0,r.__decorate)([(0,d.Cb)({attribute:!1})],T.prototype,"hass",void 0),(0,r.__decorate)([(0,d.Cb)({attribute:!1})],T.prototype,"data",void 0),(0,r.__decorate)([(0,d.Cb)({attribute:!1})],T.prototype,"options",void 0),(0,r.__decorate)([(0,d.Cb)({type:String})],T.prototype,"height",void 0),(0,r.__decorate)([(0,d.Cb)({attribute:"expand-legend",type:Boolean})],T.prototype,"expandLegend",void 0),(0,r.__decorate)([(0,d.Cb)({attribute:!1})],T.prototype,"extraComponents",void 0),(0,r.__decorate)([(0,d.SB)(),(0,a.F_)({context:v.LW,subscribe:!0})],T.prototype,"_themes",void 0),(0,r.__decorate)([(0,d.SB)()],T.prototype,"_isZoomed",void 0),(0,r.__decorate)([(0,d.SB)()],T.prototype,"_zoomRatio",void 0),(0,r.__decorate)([(0,d.SB)()],T.prototype,"_minutesDifference",void 0),(0,r.__decorate)([(0,d.SB)()],T.prototype,"_hiddenDatasets",void 0),T=(0,r.__decorate)([(0,d.Mo)("ha-chart-base")],T),o()}catch(b){o(b)}}))},84447:function(e,t,i){i(26847),i(87799),i(27530);var o=i(73742),r=i(27885),a=i(67522),s=i(23533),n=i(7046),l=i(59048),d=i(7616);let c,h,p,u,g=e=>e;class v extends r.g{renderOutline(){return this.filled?(0,l.dy)(c||(c=g`<span class="filled"></span>`)):super.renderOutline()}getContainerClasses(){return Object.assign(Object.assign({},super.getContainerClasses()),{},{active:this.active})}renderPrimaryContent(){return(0,l.dy)(h||(h=g` <span class="leading icon" aria-hidden="true"> ${0} </span> <span class="label">${0}</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> ${0} </span> `),this.renderLeadingIcon(),this.label,this.renderTrailingIcon())}renderTrailingIcon(){return(0,l.dy)(p||(p=g`<slot name="trailing-icon"></slot>`))}constructor(...e){super(...e),this.filled=!1,this.active=!1}}v.styles=[s.W,n.W,a.W,(0,l.iv)(u||(u=g`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(
          --ha-assist-chip-container-shape,
          16px
        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailing-icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px);font-size:var(--_label-text-size)!important}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:Roboto,sans-serif}`))],(0,o.__decorate)([(0,d.Cb)({type:Boolean,reflect:!0})],v.prototype,"filled",void 0),(0,o.__decorate)([(0,d.Cb)({type:Boolean})],v.prototype,"active",void 0),v=(0,o.__decorate)([(0,d.Mo)("ha-assist-chip")],v)},2913:function(e,t,i){i.d(t,{V:()=>o});i(64455),i(32192);const o=/Mac/i.test(navigator.userAgent)}}]);
//# sourceMappingURL=68973.010d44cb360b2a9c.js.map