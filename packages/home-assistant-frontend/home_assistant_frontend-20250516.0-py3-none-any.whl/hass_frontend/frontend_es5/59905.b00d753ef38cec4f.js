"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["59905"],{96005:function(e,t,i){var a=i(73742),o=i(57714),s=i(52732),l=i(98939),r=i(23533),d=i(40621),n=i(59048),c=i(7616);let h;class u extends o.W{}u.styles=[r.W,d.W,l.W,s.W,(0,n.iv)(h||(h=(e=>e)`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color);--md-input-chip-container-shape:16px;--md-input-chip-outline-color:var(--outline-color);--md-input-chip-selected-container-color:rgba(
          var(--rgb-primary-text-color),
          0.15
        );--ha-input-chip-selected-container-opacity:1;--md-input-chip-label-text-font:Roboto,sans-serif}::slotted([slot=icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px)}.selected::before{opacity:var(--ha-input-chip-selected-container-opacity)}`))],u=(0,a.__decorate)([(0,c.Mo)("ha-input-chip")],u)},11992:function(e,t,i){i.a(e,(async function(e,t){try{i(39710),i(26847),i(81738),i(33480),i(94814),i(29981),i(22960),i(6989),i(72489),i(87799),i(1455),i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761),i(56389),i(27530);var a=i(73742),o=i(59048),s=i(7616),l=i(28105),r=i(39884),d=i(44272),n=i(56795),c=i(10500),h=i(27831),u=i(6291),p=i(54614),_=i(81205),b=(i(12692),i(48017),i(993),e([_]));_=(b.then?(await b)():b)[0];let v,m,y,f=e=>e;const g="___ADD_NEW___",C="___NO_LABELS___",x="___ADD_NEW_SUGGESTION___",$=e=>(0,o.dy)(v||(v=f` <ha-combo-box-item type="button"> ${0} ${0} </ha-combo-box-item> `),e.icon?(0,o.dy)(m||(m=f`<ha-icon slot="start" .icon="${0}"></ha-icon>`),e.icon):o.Ld,e.name);class B extends((0,u.f)(o.oi)){async open(){var e;await this.updateComplete,await(null===(e=this.comboBox)||void 0===e?void 0:e.open())}async focus(){var e;await this.updateComplete,await(null===(e=this.comboBox)||void 0===e?void 0:e.focus())}hassSubscribe(){return[(0,h.f4)(this.hass.connection,(e=>{this._labels=e}))]}updated(e){if(!this._init&&this.hass&&this._labels||this._init&&e.has("_opened")&&this._opened){this._init=!0;const e=this._getLabels(this._labels,this.hass.areas,Object.values(this.hass.devices),Object.values(this.hass.entities),this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.noAdd,this.excludeLabels).map((e=>Object.assign(Object.assign({},e),{},{strings:[e.label_id,e.name]})));this.comboBox.items=e,this.comboBox.filteredItems=e}}render(){var e;return(0,o.dy)(y||(y=f` <ha-combo-box .hass="${0}" .helper="${0}" item-value-path="label_id" item-id-path="label_id" item-label-path="name" .value="${0}" .disabled="${0}" .required="${0}" .label="${0}" .placeholder="${0}" .renderer="${0}" @filter-changed="${0}" @opened-changed="${0}" @value-changed="${0}"> </ha-combo-box> `),this.hass,this.helper,this._value,this.disabled,this.required,void 0===this.label&&this.hass?this.hass.localize("ui.components.label-picker.label"):this.label,this.placeholder?null===(e=this._labels)||void 0===e||null===(e=e.find((e=>e.label_id===this.placeholder)))||void 0===e?void 0:e.name:void 0,$,this._filterChanged,this._openedChanged,this._labelChanged)}_filterChanged(e){var t;const i=e.target,a=e.detail.value;if(!a)return void(this.comboBox.filteredItems=this.comboBox.items);const o=(0,n.q)(a,(null===(t=i.items)||void 0===t?void 0:t.filter((e=>![C,g].includes(e.label_id))))||[]);0===o.length?this.noAdd?this.comboBox.filteredItems=[{label_id:C,name:this.hass.localize("ui.components.label-picker.no_match"),icon:null,color:null}]:(this._suggestion=a,this.comboBox.filteredItems=[{label_id:x,name:this.hass.localize("ui.components.label-picker.add_new_sugestion",{name:this._suggestion}),icon:"mdi:plus",color:null}]):this.comboBox.filteredItems=o}get _value(){return this.value||""}_openedChanged(e){this._opened=e.detail.value}_labelChanged(e){e.stopPropagation();let t=e.detail.value;if(t===C)return t="",void this.comboBox.setInputValue("");[x,g].includes(t)?(e.target.value=this._value,this.hass.loadFragmentTranslation("config"),(0,p.T)(this,{entry:void 0,suggestedName:t===x?this._suggestion:"",createEntry:async e=>{const t=await(0,h.jo)(this.hass,e),i=[...this._labels,t];return this.comboBox.filteredItems=this._getLabels(i,this.hass.areas,Object.values(this.hass.devices),Object.values(this.hass.entities),this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.noAdd,this.excludeLabels),await this.updateComplete,await this.comboBox.updateComplete,this._setValue(t.label_id),t}}),this._suggestion=void 0,this.comboBox.setInputValue("")):t!==this._value&&this._setValue(t)}_setValue(e){this.value=e,setTimeout((()=>{(0,r.B)(this,"value-changed",{value:e}),(0,r.B)(this,"change")}),0)}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._init=!1,this._getLabels=(0,l.Z)(((e,t,i,a,o,s,l,r,n,h,u)=>{let p,_,b={};(o||s||l||r||n)&&(b=(0,c.R6)(a),p=i,_=a.filter((e=>e.labels.length>0)),o&&(p=p.filter((e=>{const t=b[e.id];return!(!t||!t.length)&&b[e.id].some((e=>o.includes((0,d.M)(e.entity_id))))})),_=_.filter((e=>o.includes((0,d.M)(e.entity_id))))),s&&(p=p.filter((e=>{const t=b[e.id];return!t||!t.length||a.every((e=>!s.includes((0,d.M)(e.entity_id))))})),_=_.filter((e=>!s.includes((0,d.M)(e.entity_id))))),l&&(p=p.filter((e=>{const t=b[e.id];return!(!t||!t.length)&&b[e.id].some((e=>{const t=this.hass.states[e.entity_id];return!!t&&(t.attributes.device_class&&l.includes(t.attributes.device_class))}))})),_=_.filter((e=>{const t=this.hass.states[e.entity_id];return t.attributes.device_class&&l.includes(t.attributes.device_class)}))),r&&(p=p.filter((e=>r(e)))),n&&(p=p.filter((e=>{const t=b[e.id];return!(!t||!t.length)&&b[e.id].some((e=>{const t=this.hass.states[e.entity_id];return!!t&&n(t)}))})),_=_.filter((e=>{const t=this.hass.states[e.entity_id];return!!t&&n(t)}))));let v=e;const m=new Set;let y;return p&&(y=p.filter((e=>e.area_id)).map((e=>e.area_id)),p.forEach((e=>{e.labels.forEach((e=>m.add(e)))}))),_&&(y=(null!=y?y:[]).concat(_.filter((e=>e.area_id)).map((e=>e.area_id))),_.forEach((e=>{e.labels.forEach((e=>m.add(e)))}))),y&&y.forEach((e=>{t[e].labels.forEach((e=>m.add(e)))})),u&&(v=v.filter((e=>!u.includes(e.label_id)))),(p||_)&&(v=v.filter((e=>m.has(e.label_id)))),v.length||(v=[{label_id:C,name:this.hass.localize("ui.components.label-picker.no_match"),icon:null,color:null,description:null,created_at:0,modified_at:0}]),h?v:[...v,{label_id:g,name:this.hass.localize("ui.components.label-picker.add_new"),icon:"mdi:plus",color:null,description:null,created_at:0,modified_at:0}]}))}}(0,a.__decorate)([(0,s.Cb)({attribute:!1})],B.prototype,"hass",void 0),(0,a.__decorate)([(0,s.Cb)()],B.prototype,"label",void 0),(0,a.__decorate)([(0,s.Cb)()],B.prototype,"value",void 0),(0,a.__decorate)([(0,s.Cb)()],B.prototype,"helper",void 0),(0,a.__decorate)([(0,s.Cb)()],B.prototype,"placeholder",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"no-add"})],B.prototype,"noAdd",void 0),(0,a.__decorate)([(0,s.Cb)({type:Array,attribute:"include-domains"})],B.prototype,"includeDomains",void 0),(0,a.__decorate)([(0,s.Cb)({type:Array,attribute:"exclude-domains"})],B.prototype,"excludeDomains",void 0),(0,a.__decorate)([(0,s.Cb)({type:Array,attribute:"include-device-classes"})],B.prototype,"includeDeviceClasses",void 0),(0,a.__decorate)([(0,s.Cb)({type:Array,attribute:"exclude-label"})],B.prototype,"excludeLabels",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],B.prototype,"deviceFilter",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],B.prototype,"entityFilter",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],B.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],B.prototype,"required",void 0),(0,a.__decorate)([(0,s.SB)()],B.prototype,"_opened",void 0),(0,a.__decorate)([(0,s.SB)()],B.prototype,"_labels",void 0),(0,a.__decorate)([(0,s.IO)("ha-combo-box",!0)],B.prototype,"comboBox",void 0),B=(0,a.__decorate)([(0,s.Mo)("ha-label-picker")],B),t()}catch(v){t(v)}}))},80032:function(e,t,i){i.a(e,(async function(e,t){try{i(39710),i(26847),i(18574),i(81738),i(94814),i(22960),i(6989),i(1455),i(56389),i(27530);var a=i(73742),o=i(59048),s=i(7616),l=i(88245),r=i(28105),d=i(34394),n=i(39884),c=i(36221),h=i(27831),u=i(6291),p=i(54614),_=(i(67801),i(96005),i(11992)),b=e([_]);_=(b.then?(await b)():b)[0];let v,m,y,f,g,C=e=>e;class x extends((0,u.f)(o.oi)){async open(){var e;await this.updateComplete,await(null===(e=this.labelPicker)||void 0===e?void 0:e.open())}async focus(){var e;await this.updateComplete,await(null===(e=this.labelPicker)||void 0===e?void 0:e.focus())}hassSubscribe(){return[(0,h.f4)(this.hass.connection,(e=>{const t={};e.forEach((e=>{t[e.label_id]=e})),this._labels=t}))]}render(){const e=this._sortedLabels(this.value,this._labels,this.hass.locale.language);return(0,o.dy)(v||(v=C` ${0} <ha-label-picker .hass="${0}" .helper="${0}" .disabled="${0}" .required="${0}" .label="${0}" .placeholder="${0}" .excludeLabels="${0}" @value-changed="${0}"> </ha-label-picker> `),null!=e&&e.length?(0,o.dy)(m||(m=C`<ha-chip-set> ${0} </ha-chip-set>`),(0,l.r)(e,(e=>null==e?void 0:e.label_id),(e=>{const t=null!=e&&e.color?(0,d.I)(e.color):void 0;return(0,o.dy)(y||(y=C` <ha-input-chip .item="${0}" @remove="${0}" @click="${0}" .label="${0}" selected="selected" style="${0}"> ${0} </ha-input-chip> `),e,this._removeItem,this._openDetail,null==e?void 0:e.name,t?`--color: ${t}`:"",null!=e&&e.icon?(0,o.dy)(f||(f=C`<ha-icon slot="icon" .icon="${0}"></ha-icon>`),e.icon):o.Ld)}))):o.Ld,this.hass,this.helper,this.disabled,this.required,void 0===this.label&&this.hass?this.hass.localize("ui.components.label-picker.add_label"):this.label,this.placeholder,this.value,this._labelChanged)}get _value(){return this.value||[]}_removeItem(e){const t=e.currentTarget.item;this._setValue(this._value.filter((e=>e!==t.label_id)))}_openDetail(e){const t=e.currentTarget.item;(0,p.T)(this,{entry:t,updateEntry:async e=>await(0,h.$0)(this.hass,t.label_id,e)})}_labelChanged(e){e.stopPropagation();const t=e.detail.value;t&&!this._value.includes(t)&&(this._setValue([...this._value,t]),this.labelPicker.value="")}_setValue(e){this.value=e,setTimeout((()=>{(0,n.B)(this,"value-changed",{value:e}),(0,n.B)(this,"change")}),0)}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._sortedLabels=(0,r.Z)(((e,t,i)=>null==e?void 0:e.map((e=>null==t?void 0:t[e])).sort(((e,t)=>(0,c.$K)((null==e?void 0:e.name)||"",(null==t?void 0:t.name)||"",i)))))}}x.styles=(0,o.iv)(g||(g=C`ha-chip-set{margin-bottom:8px}ha-input-chip{--md-input-chip-selected-container-color:var(--color, var(--grey-color));--ha-input-chip-selected-container-opacity:0.5;--md-input-chip-selected-outline-width:1px}`)),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],x.prototype,"hass",void 0),(0,a.__decorate)([(0,s.Cb)()],x.prototype,"label",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],x.prototype,"value",void 0),(0,a.__decorate)([(0,s.Cb)()],x.prototype,"helper",void 0),(0,a.__decorate)([(0,s.Cb)()],x.prototype,"placeholder",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean,attribute:"no-add"})],x.prototype,"noAdd",void 0),(0,a.__decorate)([(0,s.Cb)({type:Array,attribute:"include-domains"})],x.prototype,"includeDomains",void 0),(0,a.__decorate)([(0,s.Cb)({type:Array,attribute:"exclude-domains"})],x.prototype,"excludeDomains",void 0),(0,a.__decorate)([(0,s.Cb)({type:Array,attribute:"include-device-classes"})],x.prototype,"includeDeviceClasses",void 0),(0,a.__decorate)([(0,s.Cb)({type:Array,attribute:"exclude-label"})],x.prototype,"excludeLabels",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],x.prototype,"deviceFilter",void 0),(0,a.__decorate)([(0,s.Cb)({attribute:!1})],x.prototype,"entityFilter",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],x.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.Cb)({type:Boolean})],x.prototype,"required",void 0),(0,a.__decorate)([(0,s.SB)()],x.prototype,"_labels",void 0),(0,a.__decorate)([(0,s.IO)("ha-label-picker",!0)],x.prototype,"labelPicker",void 0),x=(0,a.__decorate)([(0,s.Mo)("ha-labels-picker")],x),t()}catch(v){t(v)}}))}}]);
//# sourceMappingURL=59905.b00d753ef38cec4f.js.map